{"version":3,"sources":["dibgram/language-pack/special-strings lazy /^/.//.*/.json$/ groupOptions: {} namespace object","dibgram/TdWeb/tdlib.ts","dibgram/TdWeb/config.js","dibgram/TdWeb/tdweb.js","dibgram/ui/icon/chat_filters/chat-filters.ts","dibgram/ui/elements/ripple-effect.tsx","dibgram/ui/elements/icon-button.tsx","dibgram/ui/icon/icons.ts","dibgram/messenger/sections/navigation-menu/hamburger-menu/menu-button.tsx","dibgram/messenger/chat-store.ts","dibgram/ui/scroll/scrollbar.tsx","dibgram/language-pack/string-format.tsx","dibgram/language-pack/language-pack.ts","dibgram/messenger/sections/navigation-menu/chat-folders.tsx","dibgram/ui/elements/loading-spinner.tsx","dibgram/ui/components/connecting.tsx","dibgram/messenger/users-store.ts","dibgram/ui/elements/link-button.tsx","dibgram/messenger/supergroup-store.ts","dibgram/messenger/chat-misc.ts","dibgram/ui/menu/context-menu.tsx","dibgram/ui/menu/menu.tsx","dibgram/ui/dialog/toast.tsx","dibgram/TdWeb/options.ts","dibgram/messenger/message-misc.ts","dibgram/TdWeb/file.ts","dibgram/ui/img/TgLogo.png","dibgram/ui/components/profile-photo.tsx","dibgram/time-tostring.ts","dibgram/messenger/sections/payments/currency-tostring.tsx","dibgram/messenger/user-misc.ts","dibgram/ui/elements/small-button.tsx","dibgram/ui/dialog/dialogs.tsx","dibgram/ui/dialog/dialog.tsx","dibgram/ui/dialog/confirm-dialog.tsx","dibgram/dibgram-mods.ts","dibgram/ui/themes/dibgram-theme-to-css.ts","dibgram/ui/themes/theme.tsx","dibgram/messenger/message/ui/entities.tsx","dibgram/messenger/message/message-pinned-message.tsx","dibgram/messenger/message/message-summary-noicon.tsx","dibgram/ui/icon/menu/menu.tsx","dibgram/messenger/sections/navigation-menu/chat-list-item.tsx","dibgram/messenger/sections/navigation-menu/chat-list.tsx","dibgram/messenger/sections/navigation-menu/search/search-box.tsx","dibgram/TdWeb/connectionStore.ts","dibgram/ui/elements/nav-animation.tsx","dibgram/messenger/sections/navigation-menu/chat-list-bar.tsx","version.ts","dibgram/ui/tool-strip/button.tsx","dibgram/ui/tool-strip/tool-strip.ts","dibgram/ui/tool-strip/section.tsx","dibgram/ui/tool-strip/toggle-button.tsx","dibgram/ui/tool-strip/separator.tsx","dibgram/ui/tool-strip/heading.tsx","dibgram/ui/menu/three-dots-menu.tsx","dibgram/ui/dialog/search.tsx","dibgram/messenger/sections/settings/choose-language.tsx","dibgram/messenger/sections/settings/advanced/advanced.tsx","dibgram/messenger/sections/settings/settings-dialog.tsx","dibgram/messenger/sections/navigation-menu/hamburger-menu/menu.tsx","dibgram/messenger/message-store.ts","dibgram/messenger/message/message-summary-withicon.tsx","dibgram/messenger/message/ui/message-containers.tsx","dibgram/messenger/sections/chat/headers/title.tsx","dibgram/messenger/basic-group-store.ts","dibgram/messenger/sections/chat/footer/compose-button.tsx","dibgram/messenger/sections/chat/footer/footer.tsx","dibgram/ui/components/download-circle.tsx","dibgram/ui/components/photo.tsx","dibgram/ui/components/thumbnail.tsx","dibgram/messenger/users-wrapper.tsx","dibgram/messenger/message/ui/types/messageText.tsx","dibgram/messenger/message/ui/types/messageUnsupported.tsx","dibgram/messenger/message/ui/message.tsx","dibgram/messenger/message/ui/types/messageExpiredPhoto.tsx","dibgram/messenger/message/ui/types/messageExpiredVideo.tsx","dibgram/messenger/message/ui/types/messageVideoChatScheduled.tsx","dibgram/messenger/message/ui/types/messageVideoChatStarted.tsx","dibgram/messenger/message/ui/types/messageVideoChatEnded.tsx","dibgram/messenger/message/ui/types/messageInviteVideoChatParticipants.tsx","dibgram/messenger/message/ui/types/messageBasicGroupChatCreate.tsx","dibgram/messenger/message/ui/types/messageSupergroupChatCreate.tsx","dibgram/messenger/message/ui/types/messageChatChangeTitle.tsx","dibgram/messenger/message/ui/types/messageChatDeletePhoto.tsx","dibgram/messenger/message/ui/types/messageChatAddMembers.tsx","dibgram/messenger/message/ui/types/messageChatJoinByLink.tsx","dibgram/messenger/message/ui/types/messageChatJoinByRequest.tsx","dibgram/messenger/message/ui/types/messageChatDeleteMember.tsx","dibgram/messenger/message/ui/types/messagePinMessage.tsx","dibgram/messenger/message/ui/types/messageChatSetTheme.tsx","dibgram/messenger/message/ui/types/messageChatSetTtl.tsx","dibgram/messenger/message/ui/types/messageCustomServiceAction.tsx","dibgram/messenger/message/ui/types/messageGameScore.tsx","dibgram/messenger/message/ui/types/messagePaymentSuccessful.tsx","dibgram/messenger/message/ui/types/messageContactRegistered.tsx","dibgram/messenger/message/ui/types/messageWebsiteConnected.tsx","dibgram/messenger/message/ui/types/messagePassportDataSent.tsx","dibgram/messenger/message/chat-history.ts","dibgram/messenger/message/message-is-service.ts","dibgram/ui/elements/outline-button.tsx","dibgram/messenger/message/ui/types/sponsored.tsx","dibgram/messenger/sections/chat/history/history.tsx","dibgram/messenger/message/processHistory.ts","dibgram/messenger/sections/chat/chat-section.tsx","dibgram/messenger/messengerWindow.tsx","dibgram/TdWeb/auth.ts","dibgram/ui/elements/highlighted-button.tsx","dibgram/ui/elements/underlined-input.tsx","dibgram/auth/auth-step/phone-number/country-select.tsx","dibgram/auth/auth-step/phone-number/phone-number.tsx","dibgram/auth/auth-step/verification-code/verification-code.js","dibgram/auth/auth-step/cloud-password/cloud-password.tsx","dibgram/auth/auth-step/register/signup-profile-photo.tsx","dibgram/auth/auth-step/register/register.tsx","dibgram/auth/auth-screen.tsx","dibgram/TdWeb/online-handler.ts","App.tsx","serviceWorkerRegistration.js","index.tsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","all","slice","t","keys","Object","module","exports","log","use_test_dc","log_updates","log_queries","lastUniqueId","getUseTestDc","urlPar","URL","window","location","href","searchParams","get","TdLib","op","useDatabase","instanceName","onUpdate","this","handleUpdate","TdClient","sendQuery","type","handler","undefined","push","handlerId","filter","h","query","console","reject","send","result","error","warn","update","forEach","chatFilerIcons","All","Bots","Channels","Custom","Groups","Private","Setup","Unread","Cat","Crown","Favorite","Flower","Game","Home","Love","Mask","Party","Sport","Study","Trade","Travel","Work","RippleEffect","props","small","X","Y","width","rX","rY","height","Math","hypot","abs","max","state","className","style","getMaxRadius","backgroundColor","color","React","Component","getRelativeCoordinates","event","rect","target","getBoundingClientRect","clientX","left","clientY","top","handleMyMouseEvents","This","ripple","setState","setTimeout","clientWidth","clientHeight","bind","mouseUp","handleMyMouseEventsFunction","setRipple","onMouseUp","nativeEvent","offsetX","offsetY","onMouseDown","onMouseLeave","IconButton","icon","rest","useState","rippleEvents","dangerouslySetInnerHTML","__html","archive_userpic","dialogs_sending","history_to_down","info_back","info_close","HamburgerMenuButton","WithFolders","mouseDown","mouseLeave","onClick","PureComponent","WithoutFolders","chatStore","createStore","currentChatList","archiveState","archiveButtonState","localStorage","getItem","chats","filters","selectedChat","unread","main","archive","action","chatList","chat_list","unread_messages_count","unread_count","unread_unmuted_messages_count","unread_unmuted_count","chat_filter_id","total_chats_count","total_count","unread_chats_count","unread_unmuted_chats_count","marked_as_unread_chats_count","marked_as_unread_count","marked_as_unread_unmuted_chats_count","marked_as_unread_unmuted_count","chat","chat_id","changed","newChat","positions","position","compareChatList","list","payload","property","value","__REDUX_DEVTOOLS_EXTENSION__","registerUpdateHandler","dispatch","action_bar","default_disable_notification","draft_message","chat_filters","has_scheduled_messages","is_blocked","is_marked_as_unread","last_message","message_ttl","notification_settings","permissions","photo","last_read_inbox_message_id","last_read_outbox_message_id","reply_markup_message_id","theme_name","title","unread_mention_count","pending_join_requests","video_chat","message_sender_id","has_protected_content","list1","list2","getChatNoCache","getState","ScrollView","scrollBarWidth","scrollRef","scrollAlwaysVisible","propsRest","mouseEntered","setMouseEntered","timeoutId","setTimeoutId","data-mouse-entered","renderTrackHorizontal","renderTrackVertical","renderThumbHorizontal","renderThumbVertical","onMouseEnter","clearTimeout","autoHide","data-auto-hide","autoHideTimeout","hideTracksWhenNotNeeded","ref","applyKeys","item","index","Fragment","getFormattedText","text","useFragments","formatted","applyFormatting","length","format","res","includes","indexOf","test","execed","exec","formatString","params","formatChunkedString","chunk","flat","getCountMode","count","getPluralString","mode","callback","currentLanguagePack","specialStrings","specialStringsEnglish","getCurrentLanguagePack","englishIsDefault","json","JSON","parse","base_language_pack_id","is_beta","is_installed","is_official","is_rtl","local_string_count","name","native_name","plural_code","total_string_count","translated_string_count","translation_url","getRtlMode","__","key","languagePackString","languagePack","englishLanguagePack","__fmt","string","__pl","pluralized","pluralizedString","__collection","isInvite","users","usesReact","getLPString","formatLast","i","user","accumulated","join","_s__","_s__fmt","chatListScrollToTopEvent","ChatFolder","folder","active","icon_name","iconName","setIconName","useEffect","ic","Number","data-muted","connect","folders","currentFolder","onHamburgerMenuOpened","LoadingSpinner","percentage","intervalNum","percent","caps","trackColor","spin","transitionDuration","setInterval","clearInterval","progressColor","size","lineWidth","usersStore","userId","status","user_id","LinkButton","children","click","open","supergroupStore","supergroup","isChatWithDeletedAccount","chatTitleOrDeletedAccount","ContextMenu","x","y","direction","setDirection","hide","setHide","useRef","handleMouseDown","contextMenusStore","current","document","documentElement","classList","contains","menu","ContextMenus","menus","createContextMenu","preventDefault","pageX","pageY","Menu","MenuContents","MenuItem","Toast","closed","setClosed","addToast","toastStore","toast","Toasts","options","getMessageStatus","message","is_outgoing","sending_state","downloadFile","file_id","priority","onReject","file","downloadCallbacks","local","is_downloading_completed","cachedFiles","getFileContent","enableCache","data","resolveFilePart","filePart","f","catch","is_downloading_active","blobToUrl","blob","webkitURL","createObjectURL","profileNameToInitials","words","replace","toUpperCase","split","ProfilePhoto","customIcon","setPhoto","photoObj","setPhotoObj","loaded","setLoaded","isServiceMessages","isSavedMessages","isReplies","mounted","disableSavedMessages","tgLogo","Initials","onLoad","src","getIdColorCode","getChatTypeId","supergroup_id","basic_group_id","smallDateTimeToString","date","TdLibDateToDate","now","Date","yesterday","getTime","lastWeek","timeToString","getDay","weekdayToString","day","getDate","month","getMonth","year","String","getFullYear","dateToString","hours","getHours","minutes","getMinutes","am_pm","futureDayToString","today","tomorrow","durationToString","duration","floor","lastSeenToString","lastSeen","was_online","diff","diffMinutes","diffHours","currentDate","lastSeenDate","time","toLocaleTimeString","toLocaleDateString","tdLibDate","currencyAmountToString","currency","total_amount","currencies","symbol","thousands_sep","decimal_sep","symbol_left","space_between","exp","formattedAmount","toFixed","getUserFullName","first_name","last_name","SmallButton","attention","data-attention","dialogStore","dialog","addDialog","element","removeDialog","Dialogs","dialogs","data-dialog","el","Dialog","closing","createRef","close","ConfirmDialog","dialogRef","handleOK","onOK","handleCancel","onCancel","handleButton","largeFont","thirdButton","thirdButtonClosesDialog","onThirdButtonClick","hideCancelButton","OKButtonText","dibgramMods","convertThemeToCSS","theme","css","obj","equals","themes","classic","tinted","night","getThemeFromStorage","matchMedia","matches","setItem","themeStore","rtl","ThemeProvider","dir","data-theme-is-dark","isDark","maybeDeleteNewLines","str","doIt","compileEntities","singleLine","last","entities","entity","offset","getEntityJsx","innerText","SpoilerEntity","TextEntityPreCode","language","url","viewed","setViewed","chat_enableSyntaxHighlighting","SyntaxHighLighting","lazy","Suspense","fallback","store","lang","SyntaxHighlight","dark","MessaagePinnedMessage","from","content","media","emoji","game","poll","question","sticker","ctext","MessageSummaryWithoutIcon","MayHaveCaption","caption","audio","file_name","performer","SenderFullName","discard_reason","is_video","MessageSummarySender","sender_id","member_user_ids","newMembers","is_channel_post","deletedMember","ServiceMessageIncludingYou","lpString","lpString_you","ttlTimeUnit","86400","604800","2678400","ttl","MayHaveCaptionThumbnail","thumbnails","minithumbnail","noGameTitleFallback","score","GameScoreWithTitle","message_id","game_message_id","default","passportDataTypeToString","passportDataTypes","types","toLowerCase","documents","noInvoiceTitleFallback","amount","PaymentInfoWithInvoiceTitle","invoice_chat_id","invoice_message_id","invoice","is_secret","PinnedMessageMessage","venue","isVideo","video","start_date","invitedMembers","user_ids","domain","domain_name","includeYou","sender","part1","menu_move_to_menu","ChatListItem","openChat","nextProps","nextState","getUser","is_pinned","selected","chatType","is_channel","isVerified","is_verified","isChatVerified","messageStatus","unreadBadge","unreadBadgeClass","mute_for","use_default_mute_for","isOnline","onContextMenu","ChatContextMenu","data-online","input_message_text","Chat","movableChatLists","setMovableChatLists","chat_lists","getChatsFromList","order","sort","a","b","order1","order2","ChatList","connectionState","scrollToTopVisible","chatListFinished","onScroll","visible","scrollTop","scrollToTop","view","scroll","behavior","array","EmptyChatList","ArchivedChatsItem","chatsInList","onArchiveOpen","setButtonState","moveToMainMenuToast","loadingFallBack","SearchBox","placeholder","onChange","data-visible","connectionStore","connection","NavAnimation","innerScreen","innerClass","closeNavAnimation","ChatListBar","useFolders","searchText","setSearchText","ArchiveScreen","closeArchive","ToolStripButton","hideIcon","ToolStrip","Button","Section","ToggleButton","isActive","checked","readOnly","Separator","Heading","ThreeDotsMenu","setVisible","BoxSearch","ChooseLanguageDialog","languages","setLanguages","search","setSearch","country","startsWith","response","language_packs","currentPack","pack","LanguagePack","specialStringsImport","cache","apply","stringify","reload","language_pack_id","strings","selectLanguage","SettingsAdvanced","onClose","onBack","enableRtl","setEnableRtl","mod_enableSyntaxHighlighting","setMod_enableSyntaxHighlighting","newValue","SettingsDialog","navState","setNavState","section","setSection","profile_photo","HamburgerMenu","me","setMe","phone_number","phone_number_prefix","info","country_calling_code","formatted_phone_number","nightMode","setNightMode","focus","showArchivedChats","onKeyDown","tabIndex","newState","isNight","version","tdlib","gpl_link","github_link","faq_link","defaultMessageStoreState","messages","messageStore","messageId","messageIds","reduce","MessageSummaryWithIcon","ServiceMessageBubble","ServiceMessage","MessageBubble","beforeBubble","showTail","BubbleMessage","senderId","usesPhoto","hide_tail","hide_sender_name","via_bot_user_id","inline_bot","username","reply_to_message_id","MessageReplyTo","MessageFooter","tick","replyMessage","setReplyMessage","rMessage","reply_in_chat_id","requestHandler","TitleHeader","singleColumnLayout","SubText","group_call_id","can_be_reported","basicGroup","member_count","is_support","basicGroupStore","basic_group","ComposeButton","ChatFooter","DownloadCircle","downloaded_size","expected_size","getBestPhotoSize","sizes","minWidth","sorted","find","s","Photo","getBestSize","setBlob","photoSize","setPhotoSize","fl","part","hid","unRegisterUpdateHandler","alt","Thumbnail","withUsers","WrappedComponent","MessageText","messageContent","BubbleMsg","can_be_saved","web_page","LinkPreview","preview","instant_view_version","site_name","description","MessageUnsupported","messageTypes","pinnedMessage","setPinnedMessage","handleMessageQuery","pmessage","gameMessage","setGameMessage","gmessage","invoiceMessage","setInvoiceMessage","imessage","Message","memo","MessageComponent","old_message_id","message_ids","new_content","edit_date","reply_markup","interaction_info","serviceMessages","messageIsService","OutlineButton","SponsoredMessage","viewport","sponsor_chat_id","observer","IntersectionObserver","entries","isIntersecting","disconnect","root","threshold","observe","ChatHistory","upperEndDetectorRef","lowerEndDetectorRef","prev","prevEl","processedType","processMessageHistory","sponsoredMessage","setSponsoredMessage","setObserver","currentlyLoading","setCurrentlyLoading","upperEndDetectorVisible","setUpperEndDetectorVisible","lowerEndDetectorVisible","setLowerEndDetectorVisible","reachedEndTop","setReachedEndTop","setReachedEndBottom","ob","entry","chatId","fromMessageId","limit","from_message_id","loadChatHistory","jumpToDownVisible","setJumpToDownVisible","Message2","ChatSection","c","ChatSectionContentWrapperPrivate","ChatSectionContentWrapper","ChatSectionContentWrapperBasicGroup","basicGroups","ChatSectionContentWrapperSupergroup","supergroups","MessengerWindow","isMenuOpen","setIsMenuOpen","useSingleLayout","setUseSingleLayout","check","wid","Infinity","addEventListener","defaultSize","handleClasses","right","enable","bottom","topRight","bottomRight","bottomLeft","topLeft","SingleLevel","credentials","api_id","api_hash","auth_state","Auth","number","pass","first","BigHighlightedButton","UnderlinedInput","args","handleFocus","inactive","titleClass","getTitleClass","handleBlur","mouseX","handleKeyDown","onEnterKeyPressed","preventNumberScrolling","autoFocus","invalid","iRef","onFocus","onBlur","maxLength","onCopy","disableCopy","CountrySelect","countries","is_hidden","CountrySelectItem","calling_codes","country_code","english_name","AuthWindowStepPhoneNumber","number_p","statusContent","statusVisible","dropDownText","changeStatus","Status","ref1","ref2","handlePNFieldChange","openCountryDropdown","cc","getCountryDropdownText","handlePNFieldChange_p","callingCodes","callingCode","value_new","submitNumber","givePhoneNumber","reason","manageStatusTextContent","countryName","AuthWindowStepCode","handleCodeFieldChange","handleContinueButton","checkAuthCode","AuthWindowStepPassword","password","handlePasswordFieldChange","check2FACode","password_hint","SignUpProfilePic","image","accept","AuthWindowStepRegister","firstName","lastName","textUnderField","handleFirstNameFieldChange","handleLastNameFieldChange","registerNewAccount","showTos","tos","files","link","authStore","thisClass","MainApp","step","authorization_state","code_info","terms_of_service","onfocus","onblur","initializeTdLib","hasFocus","languageInfo","specialStringsCache","initLanguagePack","App","rel","toString","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onSuccess","ReactDOM","render","StrictMode","getElementById","process","origin","fetch","headers","contentType","ready","unregister","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.288edfcb.chunk.js","sourcesContent":["var map = {\n\t\"./be.json\": [\n\t\t115,\n\t\t5\n\t],\n\t\"./ca.json\": [\n\t\t116,\n\t\t6\n\t],\n\t\"./de.json\": [\n\t\t117,\n\t\t7\n\t],\n\t\"./en.json\": [\n\t\t22\n\t],\n\t\"./es.json\": [\n\t\t118,\n\t\t8\n\t],\n\t\"./fr.json\": [\n\t\t119,\n\t\t9\n\t],\n\t\"./it.json\": [\n\t\t120,\n\t\t10\n\t],\n\t\"./ko.json\": [\n\t\t121,\n\t\t11\n\t],\n\t\"./ms.json\": [\n\t\t122,\n\t\t12\n\t],\n\t\"./nl.json\": [\n\t\t123,\n\t\t13\n\t],\n\t\"./pl.json\": [\n\t\t124,\n\t\t14\n\t],\n\t\"./pt-br.json\": [\n\t\t125,\n\t\t15\n\t],\n\t\"./ru.json\": [\n\t\t126,\n\t\t16\n\t],\n\t\"./tr.json\": [\n\t\t127,\n\t\t17\n\t],\n\t\"./uk.json\": [\n\t\t128,\n\t\t18\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 93;\nmodule.exports = webpackAsyncContext;","/* eslint-disable */\nimport { createTdClient } from './tdweb';\nimport {getConfig} from './config';\nimport TdApi from './td_api';\n\nconst {log}= getConfig();\n\nlet lastUniqueId = 0;\n\nexport function getUseTestDc() {\n    var urlPar=new URL(window.location.href).searchParams.get('test');\n    if(urlPar){\n        return urlPar==='1' || urlPar==='true';\n    }\n    return false;\n}\n\nexport function getCurrentSessionId() {\n    return new URL(window.location.href).searchParams.get('account') || '1';\n}\n\n/**\n * Provides options to communicate with the Tdweb library\n */\nexport default class TdLib {\n    static #tdClient: any;\n    /** @type {[string: Array<Function>]} */\n    static #updateHandlers: {[key: string]: ([(update: any) => void, number])[]}={};\n\n    /**\n     * Creates the instance of Tdweb\n     */\n    static initializeTdLib() {\n        TdLib.#tdClient= createTdClient({\n            useDatabase: true,\n            instanceName: ( getCurrentSessionId() ) + (getUseTestDc() ? 'test' : 'production'), // e.g. ?account=1&test=1 = '1test' or ?account=1&test=0 = '1production'\n            onUpdate: this.handleUpdate\n        });\n        return TdLib.sendQuery({'@type': 'getAuthorizationState'}); // It both starts TDLib and returns the authorization state\n    }\n\n    /**\n     * Listen for updates from TdLib\n     * @param type The type of the update to listen to. Look for TdLib API docs for types\n     * @param handler The function that gets called with the update object when the update is received\n     * @returns an ID that can be used to unregister the handler\n     */\n    static registerUpdateHandler<T extends TdApi.Update>(type: T['@type'], handler: (update: T) => void): number {\n        if(TdLib.#updateHandlers[type]===undefined){\n            TdLib.#updateHandlers[type]= [];\n        }\n        const id= ++lastUniqueId;\n        TdLib.#updateHandlers[type].push([handler, id]);\n        return id;\n    }\n\n    /**\n     * Remove an existing update handler\n     * @param type The type of the update to remove handler from. Look for TdLib API docs for types\n     * @param handler The ID of the handler to remove (returned by registerUpdateHandler)\n     */\n    static unRegisterUpdateHandler<T extends TdApi.Update>(type: T['@type'], handlerId: number): void {\n        if(TdLib.#updateHandlers[type]===undefined){\n            return;\n        }\n        TdLib.#updateHandlers[type]= TdLib.#updateHandlers[type].filter(h => h[1]!==handlerId);\n    }\n\n    /**\n     * Send a request to the TdLib instance\n     * If the query contains an `@extra` field, the same field will be added to the result\n     * @param query The request to send. Consult TdLib & JSON interface API for help.\n     * @returns The result of the request\n     */\n    static sendQuery<T extends TdApi.TdFunction>(query: T): Promise<TdApi.TdFunctionReturn<T>> {\n        if(log.log_queries && query['@type']!=='setTdlibParameters') {\n            console.log('Query: ',query);\n        }\n        return new Promise((resolve, reject) => {\n            TdLib.#tdClient.send(query).then((result: TdApi.TdFunctionReturn<T>)=> {\n                if(log.log_queries) {\n                    console.log('Query result: ', result);\n                }\n                resolve(result);\n            }, (error: TdApi.Error)=> {\n                if(log.log_queries) {\n                    console.warn('Query failed: ', error);\n                }\n                reject(error);\n            }\n            );\n        });\n    }\n\n    /**\n     * Handles a TDLib update\n     */\n    static handleUpdate(update: TdApi.Update) {\n        if(log.log_updates) {\n            console.log('Update: ',update);\n        }\n        if(TdLib.#updateHandlers[update['@type']]){\n            TdLib.#updateHandlers[update['@type']].forEach(h => h[0](update));\n        }\n    }\n}","export function getCredentials() {return {api_id: 3022678,api_hash: 'd7b7676a82906a6182f4a5e5e9555673'};}export function getConfig() {return {use_test_dc: false,log: {log_updates: true,log_queries: true}};}\n","import TdClient from '@dibgram/tdweb';\n\n// This file is created to workaround a TypeScript error.\n\nexport function createTdClient(op) {\n    return new TdClient(op);\n}","// All icons are from Telegram Desktop, converted to SVG using https://pngtosvg.com/\n\nimport raw from 'raw.macro';\n\nconst chatFilerIcons: {\n    [key: string]: [string, string] | [string];\n} = {\n    All     : [raw('./all.svg'     ), raw('./all_active.svg'     )],\n    Bots    : [raw('./bots.svg'    ), raw('./bots_active.svg'    )],\n    Channels: [raw('./channels.svg'), raw('./channels_active.svg')],\n    Custom  : [raw('./custom.svg'  ), raw('./custom_active.svg'  )],\n    Groups  : [raw('./groups.svg'  ), raw('./groups_active.svg'  )],\n    Private : [raw('./private.svg' ), raw('./private_active.svg' )],\n    Setup   : [raw('./setup.svg'   )                              ],\n    Unread  : [raw('./unread.svg'  ), raw('./unread_active.svg'  )],\n\n    Cat     : [raw('./cat.svg'     ), raw('./cat_active.svg'     )],\n    Crown   : [raw('./crown.svg'   ), raw('./crown_active.svg'   )],\n    Favorite: [raw('./favorite.svg'), raw('./favorite_active.svg')],\n    Flower  : [raw('./flower.svg'  ), raw('./flower_active.svg'  )],\n    Game    : [raw('./game.svg'    ), raw('./game_active.svg'    )],\n    Home    : [raw('./home.svg'    ), raw('./home_active.svg'    )],\n    Love    : [raw('./love.svg'    ), raw('./love_active.svg'    )],\n    Mask    : [raw('./mask.svg'    ), raw('./mask_active.svg'    )],\n    Party   : [raw('./party.svg'   ), raw('./party_active.svg'   )],\n    Sport   : [raw('./sport.svg'   ), raw('./sport_active.svg'   )],\n    Study   : [raw('./study.svg'   ), raw('./study_active.svg'   )],\n    Trade   : [raw('./trade.svg'   ),                             ],\n    Travel  : [raw('./travel.svg'  ), raw('./travel_active.svg'  )],\n    Work    : [raw('./work.svg'    ), raw('./work_active.svg'    )],\n};\nexport default chatFilerIcons;\n","import React from 'react';\n\nexport type RippleEffectProps_AutoSettable = {\n    /** \n     * - Change to `pressed` on `mouseDown`\n     * - Change to `released` on `mouseUp`\n     * - Change to `off` 1000ms after `mouseUp`\n     */\n    state: 'off' | 'pressed' | 'released';\n    X?: number;\n    Y?: number;\n    width?: number;\n    height?: number;\n}\n\ntype RippleEffectProps = RippleEffectProps_AutoSettable & {\n    /** The color to show in the ripple (same as `:active` if you used CSS) */\n    color: string;\n    /** Pass true if the button is small to make animation faster */\n    small?: boolean;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype RippleableComponent= React.Component<any, {ripple: RippleEffectProps_AutoSettable}>;\n\n/**\n * Adds a ripple effect to a button.\n * \n * Insert at the beginning of the button.\n * \n * **Note:** The button needs `position: relative;` and `overflow: hidden;`\n */\nexport default class RippleEffect extends React.Component<RippleEffectProps> {\n\n    /** Gets the smallest radius that a circle, centered at click location, needs to fill the button */\n    getMaxRadius(): number {\n        if(!this.props.small){\n        //  It's a bit hard to understand. Let me explain:\n        //  \n        //  1. It calculates the coordinates relative to the 4 edges of the button ────╮\n        //  2. The diagonal distance to the edges are calculated using the             │\n        //      pythagoras rule, from the results of step 1            │               │\n        //  3. The biggest distance is selected and then returned.     │               │\n        //          │                                                  │               │\n        //  ╭───────┴──────╮  ╭────────────────────────────────────────╯               │        \n        //  │           ╭──┼──┴───╮                                                    │                  \n            return Math.max(//    │╭───────────────────────────────────────────────────┴───────────────────────────────────────────────────────────────╮\n                /* ┏ */ Math.hypot(this.props.X as number                                   , this.props.Y as number),//                               │ \n                /* ┓ */ Math.hypot((this.props.width as number) - (this.props.X as number)  , this.props.Y as number),//                               │\n                /* ┗ */ Math.hypot(this.props.X as number                                   ,( this.props.height as number) - (this.props.Y as number)), \n                /* ┛ */ Math.hypot((this.props.width as number) - (this.props.X as number)  , (this.props.height as number) - (this.props.Y as number)), \n            );\n        } else {\n            const {X, Y, width, height} = this.props as {X: number, Y: number, width: number, height: number};\n            const [rX, rY] = [X - width / 2, Y - height / 2]; // Click position relative to center of circle.\n            const distanceToCenter= Math.hypot(Math.abs(rX), Math.abs(rY)); // Get distance from click position to the center of circle.\n            return distanceToCenter + (width / 2); // Add circle radius to result\n        }\n    }\n    render(): JSX.Element|null {\n        if(this.props.state=='off') return null;\n        return (\n            <div\n                className={'ripple '+this.props.state+ (this.props.small? ' small':'')}\n                style={{\n                    '--top': (this.props.Y || 0)+'px',\n                    '--left': (this.props.X || 0)+'px',\n                    '--radius': this.getMaxRadius()+'px',\n                    backgroundColor: this.props.color\n                } as {[key: string]: string}}/>\n        );\n    }\n}\n\nfunction getRelativeCoordinates(event: React.MouseEvent): {X: number, Y: number} {\n    const rect = (event.target as HTMLElement).getBoundingClientRect();\n    return {\n        X: event.clientX - rect.left,\n        Y: event.clientY - rect.top\n    };\n}\n\n/** \n * Assign your `mouseDown`, `mouseUp` and `mouseLeave` to the returned functions.\n * @param This The current component\n */\nexport function handleMyMouseEvents(This: RippleableComponent): ((e: React.MouseEvent) => void)[] {\n    return [\n        // mouseDown\n        (function(this: RippleableComponent, e: React.MouseEvent): void {\n            // Reset the ripple effect if it's not off\n            if(this.state.ripple.state!='off'){\n                this.setState({\n                    ripple: { state: 'off' }\n                });\n                setTimeout(() => {\n                    this.setState({\n                        ripple: {\n                            state: 'pressed',\n                            ...getRelativeCoordinates(e),\n                            width: (e.target as HTMLElement).clientWidth,\n                            height: (e.target as HTMLElement).clientHeight\n                        }\n                    });\n                }, 50);\n                return;\n            }\n            this.setState({\n                ripple: {\n                    state: 'pressed',\n                    ...getRelativeCoordinates(e),\n                    width:  (e.target as HTMLElement).clientWidth,\n                    height:  (e.target as HTMLElement).clientHeight\n                }\n            });\n        }).bind(This),\n        // mouseUp\n        (function(this: RippleableComponent, e: React.MouseEvent): void {\n            this.setState({\n                ripple: { \n                    state: 'released',\n                    ...getRelativeCoordinates(e),\n                    width:  (e.target as HTMLElement).clientWidth,\n                    height:  (e.target as HTMLElement).clientHeight \n                }\n            });\n        }).bind(This),\n        // mouseLeave\n        (function(this: RippleableComponent, e: React.MouseEvent): void {\n            if(this.state.ripple.state=='pressed') {\n                (this as any).mouseUp(e);\n            }\n        }).bind(This)\n    ];\n}\n\ntype RippleEffectEvents= {\n    onMouseDown:  (e: React.MouseEvent) => void,\n    onMouseUp:    (e: React.MouseEvent) => void,\n    onMouseLeave: (e: React.MouseEvent) => void\n}\n\n// Assign your `mouseDown`, `mouseUp` and `mouseLeave` to the returned functions.\nexport function handleMyMouseEventsFunction([ripple, setRipple]: [RippleEffectProps_AutoSettable, React.Dispatch<React.SetStateAction<RippleEffectProps_AutoSettable>>]): RippleEffectEvents {\n    function onMouseDown(e: React.MouseEvent): void {\n        // Reset the ripple effect if it's not off\n        if(ripple.state!='off'){\n            setRipple({ state: 'off' });\n            setTimeout(() => {\n                setRipple ({\n                    state: 'pressed',\n                    ...getRelativeCoordinates(e),\n                    width:  (e.target as HTMLElement).clientWidth,\n                    height:  (e.target as HTMLElement).clientHeight\n                });\n            }, 50);\n            return;\n        }\n        setRipple ({\n            state: 'pressed',\n            ...getRelativeCoordinates(e),\n            width:  (e.target as HTMLElement).clientWidth,\n            height:  (e.target as HTMLElement).clientHeight\n        });\n    }\n\n    function onMouseUp(e: React.MouseEvent): void {\n        setRipple ({\n            state: 'released',\n            X: e.nativeEvent.offsetX,\n            Y: e.nativeEvent.offsetY,\n            width:  (e.target as HTMLElement).clientWidth,\n            height:  (e.target as HTMLElement).clientHeight\n        });\n    }\n\n    function onMouseLeave(e: React.MouseEvent): void {\n        if(ripple.state=='pressed') {\n            onMouseUp(e);\n        }\n    }\n    \n    return { onMouseDown, onMouseUp, onMouseLeave };\n}","import React from 'react';\nimport RippleEffect, {handleMyMouseEventsFunction, RippleEffectProps_AutoSettable} from '../../ui/elements/ripple-effect';\nimport './icon-button.scss';\n\nexport type IconButtonProps = React.DetailedHTMLProps<React.ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement> & {\n    icon: string;\n}\n\n/**\n * Renders a round button with an icon in it, and a special ripple effect.\n */\nexport default function IconButton({icon, ...rest}: IconButtonProps): JSX.Element {\n    const ripple= React.useState<RippleEffectProps_AutoSettable>({state: 'off'});\n    const rippleEvents= handleMyMouseEventsFunction(ripple);\n    return (\n        <button className=\"icon-button\" {...rest} {...rippleEvents}>\n            <span dangerouslySetInnerHTML={{__html: icon}} />\n            <RippleEffect {...ripple[0]} color=\"var(--theme-color-windowBgOver)\" small={true}/>\n        </button>\n    );\n}","// All icons are from Telegram Desktop, converted to SVG using https://pngtosvg.com/\n\nimport raw from 'raw.macro';\n\nexport const archive_userpic = raw('./archive_userpic.svg');\nexport const bubble_tail = raw('./bubble_tail.svg');\nexport const dialogs_bot = raw('./dialogs_bot.svg');\nexport const dialogs_channel = raw('./dialogs_channel.svg');\nexport const dialogs_chat = raw('./dialogs_chat.svg');\nexport const dialogs_menu = raw('./dialogs_menu.svg');\nexport const dialogs_pinned = raw('./dialogs_pinned.svg');\nexport const dialogs_received = raw('./dialogs_received.svg');\n//export const dialogs_search_cancel = raw('./dialogs_search_cancel.svg');\nexport const dialogs_sending = raw('./dialogs_sending.svg');\nexport const dialogs_sent = raw('./dialogs_sent.svg');\nexport const dialogs_verified_check = raw('./dialogs_verified_check.svg');\nexport const dialogs_verified_star = raw('./dialogs_verified_star.svg');\nexport const history_file_cancel = raw('./history_file_cancel.svg');\nexport const history_file_download = raw('./history_file_download.svg');\nexport const history_received = raw('./history_received.svg');\nexport const history_sent = raw('./history_sent.svg');\nexport const history_to_down = raw('./history_to_down.svg');\nexport const info_back = raw('./info_back.svg');\nexport const info_close = raw('./info_close.svg');\nexport const intro_country_dropdown = raw('./intro_country_dropdown.svg');\nexport const menu_new_channel = raw('./menu_new_channel.svg');\nexport const menu_new_group = raw('./menu_new_group.svg');\nexport const menu_night_mode = raw('./menu_night_mode.svg');\nexport const menu_settings = raw('./menu_settings.svg');\nexport const new_chat_photo = raw('./new_chat_photo.svg');\nexport const replies_userpic = raw('./replies_userpic.svg');\nexport const saved_messages = raw('./saved_messages.svg');\nexport const settings_name = raw('./settings_name.svg');\nexport const settings_phone_number = raw('./settings_phone_number.svg');\nexport const settings_info = raw('./settings/info.svg');\nexport const settings_privacy_security = raw('./settings/privacy_security.svg');\nexport const settings_notifications = raw('./settings/notifications.svg');\nexport const settings_chat = raw('./settings/chat.svg');\nexport const settings_folders = raw('./settings/folders.svg');\nexport const settings_advanced = raw('./settings/advanced.svg');\nexport const settings_language = raw('./settings/language.svg');\nexport const settings_faq = raw('./settings/faq.svg');\nexport const three_dots = raw('./three_dots.svg');\nexport const title_search = raw('./title_search.svg');\nexport const top_bar_call = raw('./top_bar/call.svg');\nexport const top_bar_group_call = raw('./top_bar/group_call.svg');\nexport const top_bar_profile = raw('./top_bar/profile.svg');\nexport const top_bar_search = raw('./top_bar/search.svg');\n\nexport const filters_edit = raw('./chat_filters/edit.svg');\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport IconButton, { IconButtonProps } from '../../../../ui/elements/icon-button';\nimport RippleEffect, {handleMyMouseEvents, RippleEffectProps_AutoSettable} from '../../../../ui/elements/ripple-effect';\nimport { dialogs_menu } from '../../../../ui/icon/icons';\nimport './menu-button.scss';\n\ntype WithFoldersProps = {\n    /** Fires when the button is clicked */\n    onClick?: (e: React.MouseEvent<HTMLButtonElement>) => void;\n}\n\ntype WithFoldersState = {\n    ripple: RippleEffectProps_AutoSettable;\n}\n\n/**\n * Renders the button which opens the hamburger menu (when there are folders)\n */\nclass WithFolders extends React.PureComponent<WithFoldersProps, WithFoldersState> {\n    static propTypes= {\n        onClick: PropTypes.func,\n    };\n    state= {\n        ripple: {\n            state: 'off'\n        }\n    } as const;\n    mouseDown: (e: React.MouseEvent<HTMLButtonElement>) => void;\n    mouseUp: (e: React.MouseEvent<HTMLButtonElement>) => void;\n    mouseLeave: (e: React.MouseEvent<HTMLButtonElement>) => void;\n    constructor(props: WithFoldersProps | Readonly<WithFoldersProps>) {\n        super(props);\n        [this.mouseDown, this.mouseUp, this.mouseLeave]= handleMyMouseEvents(this);\n    }\n    render(): JSX.Element {\n        return (\n            <button id=\"hamburger-menu-button\" className=\"uses-folders\"\n                onMouseDown={this.mouseDown}\n                onMouseUp={this.mouseUp}\n                onMouseLeave={this.mouseLeave}\n                onClick={this.props.onClick}>\n                <div id=\"bars\"><span></span><span></span><span></span></div>\n                <RippleEffect {...this.state.ripple} color=\"var(--theme-color-sideBarBgRipple)\"/>\n            </button>\n        );\n    }\n}\n\ntype WithoutFoldersProps= Pick<IconButtonProps, 'onClick'> & Partial<IconButtonProps>;\n\n/**\n * Renders the button which opens the hamburger menu (when there are no folders)\n */\nfunction WithoutFolders (props: WithoutFoldersProps): JSX.Element {\n    return (\n        <IconButton \n            icon={dialogs_menu}\n            id=\"hamburger-menu-button\"\n            className=\"icon-button no-folders\"\n            {...props}/>\n    );\n}\n\nconst HamburgerMenuButton = {\n    WithFolders,\n    WithoutFolders\n};\n\nexport default HamburgerMenuButton;","import { createStore, Store } from 'redux';\nimport TdLib from '../TdWeb/tdlib';\nimport TdApi from '../TdWeb/td_api';\n\n/**\n * It is recommended to use the outline view or find tool to navigate this file.\n */\n\nexport type ChatStoreState = {\n    currentChatList: TdApi.ChatList,\n    archiveState: 'open' | 'closing' | 'closed',\n    archiveButtonState: 'expanded' | 'collapsed' | 'hidden-expanded' | 'hidden-collapsed',\n    chats: TdApi.chat[],\n    filters: TdApi.chatFilterInfo[],\n    selectedChat: number,\n    unread: ChatStoreUnreadData\n}\n\nexport type ChatStoreUnreadData = {\n    main: ChatListUnreadData,\n    archive: ChatListUnreadData,\n    filters: {\n        [filterId: number]: ChatListUnreadData,\n    }\n}\n\nexport type ChatListUnreadData = {\n    unread_messages_count?: number,\n    unread_unmuted_messages_count?: number,\n    total_chats_count?: number,\n    unread_chats_count?: number,\n    unread_unmuted_chats_count?: number,\n    marked_as_unread_chats_count?: number,\n    marked_as_unread_unmuted_chats_count?: number,\n}\n\nexport type ChatStoreAction = {\n    type: 'SET_CURRENT_CHAT_LIST',\n    chatList: TdApi.ChatList,\n} | {\n    type: 'SET_ARCHIVE_STATE',\n    archiveState: 'open' | 'closing' | 'closed',\n} | {\n    type: 'UPDATE_UNREAD_MESSAGE_COUNT',\n    chat_list: TdApi.ChatList,\n    unread_count: number,\n    unread_unmuted_count: number,\n} | {\n    type: 'UPDATE_UNREAD_CHAT_COUNT',\n    chat_list: TdApi.ChatList,\n    total_count: number,\n    unread_count: number,\n    unread_unmuted_count: number,\n    marked_as_unread_count: number,\n    marked_as_unread_unmuted_count: number,\n} | {\n    type: 'SET_ARCHIVE_BUTTON_STATE',\n    archiveButtonState: 'expanded' | 'collapsed' | 'hidden-expanded' | 'hidden-collapsed',\n} | {\n    type: 'ADD_CHAT',\n    chat: TdApi.chat,\n} | {\n    type: 'UPDATE_CHAT_POSITION',\n    chat_id: number,\n    position: TdApi.chatPosition,\n} | {\n    type: 'REPLACE_CHAT_FILTERS',\n    payload: TdApi.chatFilterInfo[],\n} | (\n    Exclude<{ [K in keyof TdApi.chat]: {\n        type: 'UPDATE_CHAT_PROPERTY',\n        chat_id: number,\n        property: K\n        value: TdApi.chat[K],\n    } }[keyof TdApi.chat], undefined>\n) | {\n    type: 'SELECT_CHAT',\n    chat_id: number,\n}\n\nconst chatStore= (createStore<ChatStoreState, ChatStoreAction, any, any>(reducer, \n    (window as any).__REDUX_DEVTOOLS_EXTENSION__?.())) as Store<ChatStoreState, ChatStoreAction>;\n    \nfunction reducer(state: ChatStoreState= {\n    currentChatList: {'@type': 'chatListMain'},\n    archiveState: 'closed',\n    archiveButtonState: localStorage.getItem('dibgram-archived-chats-button-mode') as 'expanded' | 'collapsed' | 'hidden-expanded' | 'hidden-collapsed',\n    chats: [],\n    filters: [],\n    selectedChat: -1,\n    unread: {\n        main: {},\n        archive: {},\n        filters: {}\n    }\n}, action: ChatStoreAction) {\n    switch (action.type) {\n        case 'SET_CURRENT_CHAT_LIST':\n            return {\n                ...state,\n                currentChatList: action.chatList\n            };\n        case 'SET_ARCHIVE_STATE':\n            return {\n                ...state,\n                archiveState: action.archiveState\n            };\n        case 'UPDATE_UNREAD_MESSAGE_COUNT':\n            if(action.chat_list['@type'] === 'chatListMain') {\n                return {\n                    ...state,\n                    unread: {\n                        ...state.unread,\n                        main: {\n                            ...state.unread.main,\n                            unread_messages_count: action.unread_count,\n                            unread_unmuted_messages_count: action.unread_unmuted_count\n                        }\n                    }\n                };\n            } else if(action.chat_list['@type'] === 'chatListArchive') {\n                return {\n                    ...state,\n                    unread: {\n                        ...state.unread,\n                        archive: {\n                            ...state.unread.archive,\n                            unread_messages_count: action.unread_count,\n                            unread_unmuted_messages_count: action.unread_unmuted_count\n                        }\n                    }\n                };\n            } else if(action.chat_list['@type'] === 'chatListFilter') {\n                return {\n                    ...state,\n                    unread: {\n                        ...state.unread,\n                        filters: {\n                            ...state.unread.filters,\n                            [action.chat_list.chat_filter_id]: {\n                                ...state.unread.filters[action.chat_list.chat_filter_id],\n                                unread_messages_count: action.unread_count,\n                                unread_unmuted_messages_count: action.unread_unmuted_count\n                            }\n                        }\n                    }\n                };\n            }\n            return state;\n        case 'UPDATE_UNREAD_CHAT_COUNT':\n            if(action.chat_list['@type'] === 'chatListMain') {\n                return {\n                    ...state,\n                    unread: {\n                        ...state.unread,\n                        main: {\n                            ...state.unread.main,\n                            total_chats_count: action.total_count,\n                            unread_chats_count: action.unread_count,\n                            unread_unmuted_chats_count: action.unread_unmuted_count,\n                            marked_as_unread_chats_count: action.marked_as_unread_count,\n                            marked_as_unread_unmuted_chats_count: action.marked_as_unread_unmuted_count\n                        }\n                    }\n                };\n            } else if(action.chat_list['@type'] === 'chatListArchive') {\n                return {\n                    ...state,\n                    unread: {\n                        ...state.unread,\n                        archive: {\n                            ...state.unread.archive,\n                            total_chats_count: action.total_count,\n                            unread_chats_count: action.unread_count,\n                            unread_unmuted_chats_count: action.unread_unmuted_count,\n                            marked_as_unread_chats_count: action.marked_as_unread_count,\n                            marked_as_unread_unmuted_chats_count: action.marked_as_unread_unmuted_count\n                        }\n                    }\n                };\n            } else if(action.chat_list['@type'] === 'chatListFilter') {\n                return {\n                    ...state,\n                    unread: {\n                        ...state.unread,\n                        filters: {\n                            ...state.unread.filters,\n                            [action.chat_list.chat_filter_id]: {\n                                ...state.unread.filters[action.chat_list.chat_filter_id],\n                                total_chats_count: action.total_count,\n                                unread_chats_count: action.unread_count,\n                                unread_unmuted_chats_count: action.unread_unmuted_count,\n                                marked_as_unread_chats_count: action.marked_as_unread_count,\n                                marked_as_unread_unmuted_chats_count: action.marked_as_unread_unmuted_count\n                            }\n                        }\n                    }\n                };\n            }\n            return state;\n\n        case 'SET_ARCHIVE_BUTTON_STATE':\n            return {\n                ...state,\n                archiveButtonState: action.archiveButtonState\n            };\n        case 'ADD_CHAT':\n            return {\n                ...state,\n                chats: [\n                    ...state.chats,\n                    action.chat\n                ]\n            };\n        case 'UPDATE_CHAT_POSITION': // Replace the position property of a chat\n            return {\n                ...state,\n                chats: state.chats.map((chat) => {\n                    if (chat.id === action.chat_id) {\n                        let changed=false;\n                        const newChat = {\n                            ...chat,\n                            positions: chat.positions.map((position) => {\n                                if (compareChatList(position.list, action.position.list)) {\n                                    changed=true;\n                                    return action.position;\n                                }\n                                return position;\n                            })\n                        };\n                        if(!changed) {\n                            return {\n                                ...chat,\n                                positions: [\n                                    ...chat.positions,\n                                    action.position\n                                ]\n                            };\n                        }\n                        return newChat;\n                    }\n                    return chat;\n                })\n            };\n        case 'REPLACE_CHAT_FILTERS':\n            return {\n                ...state,\n                filters: action.payload\n            };\n        case 'UPDATE_CHAT_PROPERTY':\n            return {\n                ...state,\n                chats: state.chats.map((chat) => {\n                    if (chat.id === action.chat_id) {\n                        return {\n                            ...chat,\n                            [action.property]: action.value\n                        };\n                    }\n                    return chat;\n                })\n            };\n        case 'SELECT_CHAT':\n            return {\n                ...state,\n                selectedChat: action.chat_id\n            };\n        default:\n            return state;\n    }\n}\n\nTdLib.registerUpdateHandler<TdApi.updateUnreadChatCount>('updateUnreadChatCount', (update) => {\n    chatStore.dispatch({\n        type: 'UPDATE_UNREAD_CHAT_COUNT',\n        ...update\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateUnreadMessageCount>('updateUnreadMessageCount', (update) => {\n    chatStore.dispatch({\n        type: 'UPDATE_UNREAD_MESSAGE_COUNT',\n        ...update\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateNewChat>('updateNewChat', update => {\n    chatStore.dispatch({\n        type: 'ADD_CHAT',\n        chat: update.chat\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatActionBar>('updateChatActionBar', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'action_bar',\n        chat_id: update.chat_id,\n        value: update.action_bar\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatDefaultDisableNotification>('updateChatDefaultDisableNotification', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'default_disable_notification',\n        chat_id: update.chat_id,\n        value: update.default_disable_notification\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatDraftMessage>('updateChatDraftMessage', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'draft_message',\n        chat_id: update.chat_id,\n        value: update.draft_message\n    });\n    for (const position of update.positions) {\n        chatStore.dispatch({\n            type: 'UPDATE_CHAT_POSITION',\n            chat_id: update.chat_id,\n            position: position\n        });\n    }\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatFilters>('updateChatFilters', update=> {\n    if(update.chat_filters) {\n        chatStore.dispatch({\n            type: 'REPLACE_CHAT_FILTERS',\n            payload: update.chat_filters\n        });\n    }\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatHasScheduledMessages>('updateChatHasScheduledMessages', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'has_scheduled_messages',\n        chat_id: update.chat_id,\n        value: update.has_scheduled_messages\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatIsBlocked>('updateChatIsBlocked', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'is_blocked',\n        chat_id: update.chat_id,\n        value: update.is_blocked\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatIsMarkedAsUnread>('updateChatIsMarkedAsUnread', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'is_marked_as_unread',\n        chat_id: update.chat_id,\n        value: update.is_marked_as_unread\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatLastMessage>('updateChatLastMessage', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'last_message',\n        chat_id: update.chat_id,\n        value: update.last_message\n    });\n    for (const position of update.positions) {\n        chatStore.dispatch({\n            type: 'UPDATE_CHAT_POSITION',\n            chat_id: update.chat_id,\n            position: position\n        });\n    }\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatMessageTtl>('updateChatMessageTtl', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'message_ttl',\n        chat_id: update.chat_id,\n        value: update.message_ttl\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatNotificationSettings>('updateChatNotificationSettings', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'notification_settings',\n        chat_id: update.chat_id,\n        value: update.notification_settings\n    });\n});\n\n// Temporarily disabled because `online_member_count` is not a field in `chat`\n// TdLib.registerUpdateHandler<TdApi.updateChatOnlineMemberCount>('updateChatOnlineMemberCount', update=> {\n//     chatStore.dispatch({\n//         type: 'UPDATE_CHAT_PROPERTY',\n//         property: 'online_member_count',\n//         chat_id: update.chat_id,\n//         value: update.online_member_count\n//     });\n// });\n\nTdLib.registerUpdateHandler<TdApi.updateChatPermissions>('updateChatPermissions', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'permissions',\n        chat_id: update.chat_id,\n        value: update.permissions\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatPhoto>('updateChatPhoto', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'photo',\n        chat_id: update.chat_id,\n        value: update.photo\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatPosition>('updateChatPosition', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_POSITION',\n        chat_id: update.chat_id,\n        position: update.position\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatReadInbox>('updateChatReadInbox', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'unread_count',\n        chat_id: update.chat_id,\n        value: update.unread_count\n    });\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'last_read_inbox_message_id',\n        chat_id: update.chat_id,\n        value: update.last_read_inbox_message_id\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatReadOutbox>('updateChatReadOutbox', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'last_read_outbox_message_id',\n        chat_id: update.chat_id,\n        value: update.last_read_outbox_message_id\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatReplyMarkup>('updateChatReplyMarkup', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'reply_markup_message_id',\n        chat_id: update.chat_id,\n        value: update.reply_markup_message_id\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatTheme>('updateChatTheme', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'theme_name',\n        chat_id: update.chat_id,\n        value: update.theme_name\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatTitle>('updateChatTitle', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'title',\n        chat_id: update.chat_id,\n        value: update.title\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatUnreadMentionCount>('updateChatUnreadMentionCount', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'unread_mention_count',\n        chat_id: update.chat_id,\n        value: update.unread_mention_count\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatPendingJoinRequests>('updateChatPendingJoinRequests', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'pending_join_requests',\n        chat_id: update.chat_id,\n        value: update.pending_join_requests\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatVideoChat>('updateChatVideoChat', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'video_chat',\n        chat_id: update.chat_id,\n        value: update.video_chat\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateMessageMentionRead>('updateMessageMentionRead', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'unread_mention_count',\n        chat_id: update.chat_id,\n        value: update.unread_mention_count\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatMessageSender>('updateChatMessageSender', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'message_sender_id',\n        chat_id: update.chat_id,\n        value: update.message_sender_id\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateChatHasProtectedContent>('updateChatHasProtectedContent', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'has_protected_content',\n        chat_id: update.chat_id,\n        value: update.has_protected_content\n    });\n});\n\nexport default chatStore;\n\n/**\n * Check if two chat lists are equal\n * @param list1 \n * @param list2 \n * @returns True if the provided objects refer to the same list. Otherwise false\n */\nexport function compareChatList(list1: TdApi.ChatList, list2: TdApi.ChatList): boolean {\n    if (list1['@type'] != list2['@type']) { // First compare type\n        return false;\n    }\n    if (list1['@type'] == 'chatListFilter' ) { // Then Compare folder ID\n        return list1.chat_filter_id == (list2 as TdApi.chatListFilter).chat_filter_id;\n    }\n    return true;\n}\n\n/**\n * Gets a chat from a chat ID. Supports caching.\n */\nexport function getChat(id: number): Promise<TdApi.chat> {\n    let res;\n    for(const chat of chatStore.getState()?.chats) {\n        if(chat.id==id) res = Promise.resolve(chat);\n    }\n    if(!res){\n        res = TdLib.sendQuery({\n            '@type': 'getChat',\n            'chat_id': id\n        });\n    }\n    return res;\n}\n\n/**\n * Gets a chat from a chat ID. Does not support caching to prevent promises complexity.\n * @param id\n */\nexport function getChatNoCache(id: number): TdApi.chat|undefined {\n    for(const chat of chatStore.getState()?.chats) {\n        if(chat.id==id) return chat;\n    }\n}\n","import React from 'react';\nimport { ScrollbarProps, Scrollbars } from 'react-custom-scrollbars-2';\nimport './scrollbar.scss';\n\ntype ScrollViewProps = ScrollbarProps & {\n    /** Scroll-bar thickness, in pixels (default: 4) */\n    scrollBarWidth?: number|string;\n    /** A React ref that is passed down to the scrollbars component */\n    scrollRef?: React.RefObject<Scrollbars>;\n    /** Whether to always show the scrollbars (default: false) */\n    scrollAlwaysVisible?: boolean;\n}\n\n\n/**\n * A scrollable container. Sizing might need to be tweaked by CSS.\n */\nexport default function ScrollView({scrollBarWidth, scrollRef, scrollAlwaysVisible, ...propsRest}: ScrollViewProps): JSX.Element {\n    const [mouseEntered, setMouseEntered] = React.useState(false);\n    const [timeoutId, setTimeoutId] = React.useState(0);\n    return (\n        <Scrollbars\n            className=\"scrollbar\"\n            style= {{ '--bar-width': (scrollBarWidth || 4)+'px' } as {[key: string]: string}}\n            data-mouse-entered={mouseEntered}\n            renderTrackHorizontal={props => <div {...props} className=\"track-horizontal\" />}\n            renderTrackVertical={props => <div {...props} className=\"track-vertical\" />}\n            renderThumbHorizontal={props => <div {...props} className=\"thumb-horizontal\" />}\n            renderThumbVertical={props => <div {...props} className=\"thumb-vertical\" />}\n            onMouseEnter={() => {\n                setMouseEntered(true);\n                setTimeoutId(window.setTimeout(() => {\n                    setMouseEntered(false);\n                }, 1000));\n            }}\n            onMouseLeave={() => {\n                setMouseEntered(false);\n                clearTimeout(timeoutId);\n            }}\n            autoHide={!scrollAlwaysVisible}\n            data-auto-hide={scrollAlwaysVisible? 'false' : 'true'}\n            autoHideTimeout={1000}\n            hideTracksWhenNotNeeded={true}\n            ref={scrollRef}\n            {...propsRest}\n        />\n    );\n}\n","import React from 'react';\n\nexport type FormatParams = {\n    [key: string]: string | number | React.ReactNode | React.ReactNode[];\n}\n\nexport const applyKeys= (item: React.ReactNode|React.ReactNode[], index: number): JSX.Element => (\n    <React.Fragment key={index}>{item}</React.Fragment>\n);\n\nexport function getFormattedText(text: string, useFragments=true): React.ReactNode[]|string {\n    const formatted= applyFormatting(text);\n    if(formatted.length === 1) return formatted[0] as string;\n    return formatted.map(useFragments? applyKeys : e=>e);\n}\n\nexport function applyFormatting(format: string): React.ReactNode[] {\n    const res: React.ReactNode[]= [];\n    /* eslint-disable-next-line no-constant-condition */\n    while(true) {\n        if(format.includes('\\n')){ // New line\n            const index= format.indexOf('\\n');\n            applyFormatting(format.slice(0, index)).forEach(e=>res.push(e));\n            res.push(<br/>);\n            format= format.slice(index + 1);\n        } \n        else if(/\\*\\*(.+)\\*\\*/.test(format)){ // Bold\n            const execed= /\\*\\*(.+)\\*\\*/.exec(format) as RegExpExecArray;\n            applyFormatting(format.slice(0, execed.index)).forEach(e=>res.push(e));\n            res.push(<strong>{execed[1]}</strong>);\n            format= format.slice(execed.index + execed[1].length+4);\n        }\n        else break;\n    }\n    res.push(format);\n    return res;\n}\n\nexport function formatString(format: string, params: FormatParams= {}): React.ReactNode[] {\n    const res: React.ReactNode[]= [];\n    while(format.includes('{') && format.includes('}')) {\n        const execed= /{(\\w+)}/.exec(format) as RegExpExecArray;\n        applyFormatting(format.slice(0, execed.index)).forEach(e=>res.push(e));\n        res.push(params[execed[1]]);\n        format= format.slice(execed.index + execed[1].length+2);\n    }\n    return [...res, ...applyFormatting(format)];\n}\n\n// Same as formatString, but for strings which are split in array elements.\nexport function formatChunkedString<O=React.ReactNode>(format: (string|O)[], params: FormatParams= {}): (O|React.ReactNode)[] {\n    const result: (O|React.ReactNode)[]= [];\n    for(const chunk of format) {\n        if(typeof chunk == 'string') {\n            result.push(formatString(chunk, params));\n        } else {\n            result.push(chunk);\n        }\n    }\n    return result.flat() as (O|React.ReactNode)[];\n}\n\nexport type PluralMode= 'zero'|'one'|'two'|'few'|'many'|'other';\n\n// Returns 'zero', 'one', 'two', 'few', 'many' or 'other' depending on the number\nexport function getCountMode(count: number): PluralMode {\n    if(count === 0) return 'zero';\n    if(count === 1) return 'one';\n    if(count === 2) return 'two';\n    if(count > 2 && count < 10) return 'few';\n    if(count >= 10) return 'many';\n    return 'other';\n}\n\nexport function getPluralString(mode: PluralMode, callback: (mode: PluralMode)=>string): string {\n    switch(mode) {\n        case 'zero': return callback('zero') || callback('few') || callback('many') || callback('other');\n        case 'one': return callback('one') || callback('other');\n        case 'two': return callback('two') || callback('few') || callback('many') || callback('other');\n        case 'few': return callback('few') || callback('many') || callback('other');\n        case 'many': return callback('many') || callback('other');\n        case 'other': return callback('other');\n    }\n}\n","import { authStore } from '../auth/auth-screen';\nimport TdLib from '../TdWeb/tdlib';\nimport englishLanguagePack from './english.json';\nimport { applyKeys, formatChunkedString, FormatParams, formatString, getCountMode, getFormattedText, getPluralString, PluralMode } from './string-format';\nimport specialStringsEnglish from './special-strings/en.json';\nimport TdApi from '../TdWeb/td_api';\nimport React from 'react';\nimport { LanguagePackKey, LanguagePackSpecialStringName, LanguagePackStringName, LanguagePackStringNamePluralized } from './language-pack-types';\n\nlet currentLanguagePack: { [key: string]: TdApi.languagePackString }|null = null;\nlet specialStrings= specialStringsEnglish;\n\nexport function initLanguagePack(): void{\n    const languageInfo= getCurrentLanguagePack(true);\n\n    const specialStringsCache= localStorage.getItem('dibgram-special-language-strings-cache');\n    if(specialStringsCache){\n        specialStrings= JSON.parse(specialStringsCache)[languageInfo.id] || specialStringsEnglish;\n    }\n    console.log('initLanguagePack');\n    TdLib.sendQuery({\n        '@type': 'setOption', \n        'name': 'localization_target', \n        'value': {\n            '@type': 'optionValueString', \n            value: 'tdesktop'\n        }\n    }).then(()=>{\n        TdLib.sendQuery({\n            '@type': 'getLanguagePackStrings',\n            language_pack_id: languageInfo.id || 'en'\n        }).then(result=>{\n            result= result as TdApi.languagePackStrings;\n            currentLanguagePack = {};\n            for (const string of result.strings) {\n                currentLanguagePack[string.key] = string;\n            }\n\n            authStore.dispatch({ // Force re-render\n                type: 'SET_STATE',\n                state: authStore.getState().state\n            });\n        });\n    });\n}\n\n/**\n * Gets the language pack info for the selected language\n * @param englishIsDefault If true, returns english if the user didn't set a language\n * @returns Language pack object\n */\nexport function getCurrentLanguagePack<T extends boolean=true>(englishIsDefault: T): T extends true ? TdApi.LanguagePackInfo : TdApi.LanguagePackInfo | null {\n    const json= localStorage.getItem('dibgram-active-language');\n    if(json) {\n        return JSON.parse(json);\n    } else {\n        if(englishIsDefault) {\n            return {\n                '@type': 'languagePackInfo',\n                base_language_pack_id: '',\n                id: 'en',\n                is_beta: false,\n                is_installed: false,\n                is_official: true,\n                is_rtl: false,\n                local_string_count: 2784,\n                name: 'English',\n                native_name: 'English',\n                plural_code: 'en',\n                total_string_count: 2784,\n                translated_string_count: 2784,\n                translation_url: 'https://translations.telegram.org/en/'\n            };\n        }\n        else {\n            return null as T extends true ? TdApi.LanguagePackInfo : TdApi.LanguagePackInfo | null;\n        }\n    }\n}\n\nexport function getRtlMode(): boolean {\n    return (localStorage.getItem('dibgram-allow-rtl-layout') == 'true') && (getCurrentLanguagePack(false)?.is_rtl || false);\n}\n\n/**\n * Returns the localized string for the given language pack string.  \n * Use `__fmt` for formatted strings, or `__pl` for pluralized strings.\n * @example ```js\n * __('lng_menu_settings') // 'Settings'\n * __('lng_error_phone_flood') // 'Sorry, you have deleted and re-created your account too many times recently. Please wait for a few days before signing up again.'\n * ```\n * @param key Language pack string name\n * @returns Localized version of the string\n */\nexport default function __(key: LanguagePackKey, useFragments= true): string | React.ReactNode[] {\n    if(currentLanguagePack) {\n        const languagePackString= currentLanguagePack[key].value;\n        if(languagePackString['@type'] === 'languagePackStringValueOrdinary') {\n            return getFormattedText(languagePackString.value, useFragments);\n        }\n    }\n\n    const languagePack = englishLanguagePack;\n    return getFormattedText(languagePack[key], useFragments);\n}\n\n/**\n * Returns the localized string for the given language pack string, formatted with the given parameters.\n * @example \n * ```js\n * __fmt('lng_menu_settings', {name: 'John'}) // 'John'\n * ```\n * @param name Language pack string name\n * @param params An object containing formatting parameters\n * @returns Localized version of the string, with formatting applied\n */\nexport function __fmt(name: Exclude<LanguagePackStringName, LanguagePackStringNamePluralized>, params: FormatParams, useFragments= true): React.ReactNode[] {\n    let string= __(name, false);\n    string= typeof string == 'string' ? formatString(string, params) : formatChunkedString(string, params);\n    return string.map(useFragments? applyKeys : e=>e);\n}\n\nexport function __pl(key: string, count: number, params: FormatParams={}): React.ReactNode[] {\n    let callback: (mode: PluralMode) => string = null!;\n    if(currentLanguagePack) {\n        if(currentLanguagePack[key].value['@type'] === 'languagePackStringValuePluralized') {\n            const pluralized= currentLanguagePack[key].value;\n            callback= (mode) => pluralized[(mode+'_value') as keyof typeof pluralized];\n        }\n    }\n    else callback=  (mode) => englishLanguagePack[(key+'#'+mode) as keyof typeof englishLanguagePack];\n\n    const pluralizedString= getPluralString(getCountMode(count), callback);\n    const formatted= formatString(pluralizedString, {count, ...params});\n    return formatted.map(applyKeys);\n}\n\n/**\n * Formats an array of objects in the format `A, B, C and D`\n * Uses the format strings given as the parameters to do the formatting.\n * The default values for the strings are `{accumulated}, {user}` and `{accumulated} and {user}`\n * \n * @param {boolean} isInvite If true, the value of the strings `lng_action_invite_users_and_one` and `lng_action_invite_users_and_last` will be used. Otherwise, `lng_action_add_users_and_one` and `lng_action_add_users_and_last` will be used.\n * @param {React.ReactNode[]} users An array of objects to format\n * @param {boolean} usesReact If true, the result will be returned as an array of objects, each wrapped in a React Fragment. If false, the result will be returned as a string.\n */\nexport function __collection<B extends boolean=true, U extends ( B extends true ? React.ReactNode|React.ReactNode[] : string)= string>(isInvite: boolean, users: U[], usesReact: B, getLPString= __): U | (B extends true ? React.ReactNode[] : string) {\n    if(users.length == 1) return users[0];\n\n    const format= getLPString(isInvite? 'lng_action_invite_users_and_one' : 'lng_action_add_users_and_one') as string;\n    const formatLast= getLPString(isInvite? 'lng_action_invite_users_and_last' : 'lng_action_add_users_and_last') as string;\n\n    let result: (React.ReactNode|React.ReactNode[]|string)[]= [users[0]];\n    for(let i= 1; i < users.length - 1; i++) {\n        const user= users[i];\n        result= formatString(format, {accumulated: result, user}).flat();\n    }\n    result= formatString(formatLast, {accumulated: result, user: users[users.length - 1]}).flat();\n    return (usesReact? result.map(applyKeys) : result.join('')) as B extends true ? React.ReactNode[] : string;\n}\n\nexport function _s__(key: LanguagePackSpecialStringName): string {\n    return specialStrings[key];\n}\n\nexport function _s__fmt(key: LanguagePackSpecialStringName, params: FormatParams, useFragments= true): React.ReactNode[] {\n    return formatString(_s__(key), params).map(useFragments? applyKeys : e=>e);\n}\n\n// export function _s__pl(key, count, params={}) {\n// }\n\n// export function _s__collection(isInvite, users, usesReact) {\n//     return __collection(isInvite, users, usesReact, _s__);\n// }\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport filters from '../../../ui/icon/chat_filters/chat-filters';\nimport RippleEffect, {handleMyMouseEventsFunction, RippleEffectProps_AutoSettable} from '../../../ui/elements/ripple-effect';\nimport HamburgerMenuButton from './hamburger-menu/menu-button';\nimport { ChatListUnreadData, ChatStoreAction, ChatStoreState, ChatStoreUnreadData, compareChatList } from '../../chat-store';\nimport TdLib from '../../../TdWeb/tdlib';\nimport ScrollView from '../../../ui/scroll/scrollbar';\nimport './chat-folders.scss';\nimport __ from '../../../language-pack/language-pack';\nimport TdApi from '../../../TdWeb/td_api';\nimport { Dispatch } from 'redux';\n\n//eslint-disable-next-line @typescript-eslint/no-empty-function\nexport const chatListScrollToTopEvent = [function():void{}];\n\ntype ChatFolderProps = {\n    folder: TdApi.chatFilterInfo,\n    active: boolean,\n    onClick: (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void,\n    unread: ChatListUnreadData\n}\n\n/**\n * Renders a chat folder button\n */\nexport function ChatFolder({folder, active, onClick, unread}: ChatFolderProps): JSX.Element {\n    // Ripple effect\n    const ripple= React.useState<RippleEffectProps_AutoSettable>({state: 'off'});\n    const rippleEvents= handleMyMouseEventsFunction(ripple);\n\n    const [iconName, setIconName]= React.useState(folder.icon_name);\n\n    React.useEffect(()=> { // Get folder chats, TDLib won't show them if this request isn't sent\n        TdLib.sendQuery({\n            '@type': 'loadChats',\n            'chat_list': {\n                '@type': 'chatListFilter',\n                'chat_filter_id': folder.id,\n            },\n            'limit': 50 // Only get 50 chats //TODO: Implement loading more chats\n        });\n    }, []);\n\n    React.useEffect(()=> {\n        if(!folder.icon_name) {\n            // Default icon is used and we don't know what it is.\n            TdLib.sendQuery({ // Get chat filter info so we can get an idea what it is\n                '@type': 'getChatFilter',\n                'chat_filter_id': folder.id\n            }).then(folder=> {\n                TdLib.sendQuery({ // Ask TDLib what the icon should be\n                    '@type': 'getChatFilterDefaultIconName',\n                    'filter': folder as TdApi.chatFilter\n                }).then(result=> setIconName((result as TdApi.text).text));\n            });\n        }\n    }, [folder]);\n\n    function handleClick(e: React.MouseEvent<HTMLButtonElement, MouseEvent>): void {\n        onClick(e);\n        chatListScrollToTopEvent[0]?.();\n    }\n\n    const ic= (filters[iconName] || filters['Custom']); // If the icon was empty, show a generic icon instead.\n    const icon= ic[Number(active)] || ic[0]; // Some icons dont have active variant\n    return (\n        <div className={active ? 'item active' : 'item'}>\n            <RippleEffect {...ripple[0]} color=\"var(--theme-color-sideBarBgRipple)\"/>\n            <button {...rippleEvents}\n                onClick={handleClick}>\n\n                <div className=\"icon\" dangerouslySetInnerHTML={{__html: icon}}></div>\n                <div className=\"title\">{folder.title}</div>\n                {unread?.unread_chats_count? (\n                    <div className=\"unread-badge\" \n                        data-muted={(unread?.unread_unmuted_chats_count==0) ? 'true' : 'false'}>\n                        <span>{unread?.unread_chats_count}</span>\n                    </div>\n                ): null}\n            </button>\n        </div>\n    );\n}\n\nChatFolder.propTypes= {\n    /** The folder object provided by TdLib */\n    folder: PropTypes.object.isRequired,\n    /** A boolean indicating if the folder is currently selected */\n    active: PropTypes.bool.isRequired,\n    /** A function to call when the folder is clicked */\n    onClick: PropTypes.func.isRequired,\n    /** An object containing unread messages and chats count, from `chatStore` */\n    unread: PropTypes.object\n};\n\ntype ChatFolderListSelfProps= {\n    /** Fires when main menu is triggered */\n    onHamburgerMenuOpened: ()=>void\n}\n\ntype ChatFolderListStoreProps= {\n    folders: TdApi.chatFilterInfo[],\n    currentFolder: TdApi.ChatList,\n    unread: ChatStoreUnreadData\n}\n\ntype ChatFolderListProps= ChatFolderListSelfProps & ChatFolderListStoreProps & {dispatch: Dispatch<ChatStoreAction>};\n\n/**\n * Renders the chat folders list\n */\nfunction ChatFolderList({folders, currentFolder, unread, dispatch, onHamburgerMenuOpened}: ChatFolderListProps): JSX.Element|null {\n    if(!folders || folders.length==0) return null;\n\n    return (\n        <div id=\"chat-folders-list\">\n            <HamburgerMenuButton.WithFolders onClick={onHamburgerMenuOpened}/>\n\n            <ScrollView scrollBarWidth=\"4\" className=\"list scrollbar full-size\">\n                <ChatFolder \n                    active={compareChatList(currentFolder, {'@type': 'chatListMain'})} \n                    folder={{ \n                        '@type': 'chatFilterInfo',\n                        id: -1,\n                        title: (__('lng_filters_all') as string), \n                        icon_name: 'All' \n                    }}\n                    unread={unread.main}\n                    onClick={()=> dispatch({\n                        type: 'SET_CURRENT_CHAT_LIST',\n                        chatList: { '@type': 'chatListMain' }\n                    })}/>\n                \n                {folders.map(folder=> (\n                    <ChatFolder folder={folder} key={folder.id}\n                        unread={unread.filters[folder.id]}\n                        active={compareChatList(currentFolder, \n                            {'@type': 'chatListFilter', 'chat_filter_id': folder.id})}\n                        onClick={()=> dispatch({\n                            type: 'SET_CURRENT_CHAT_LIST',\n                            chatList: { \n                                '@type': 'chatListFilter',\n                                chat_filter_id: folder.id\n                            }\n                        })}/>\n                ))}\n            </ScrollView>\n        </div>\n    );\n}\nexport default connect<ChatFolderListStoreProps, unknown, ChatFolderListSelfProps, ChatStoreState>(state=>({\n    folders:state.filters, \n    currentFolder: state.currentChatList,\n    unread: state.unread\n}))(ChatFolderList);","import { ProgressRing } from 'progress-ring';\nimport 'progress-ring/src/styles.css';\nimport React from 'react';\n\ntype LoadingSpinnerProps = {\n    /** Spinner circle size */\n    size: number;\n    /** Spinner thickness */\n    lineWidth: number;\n    /** Spinner color */\n    progressColor: string;\n}\n\ntype LoadingSpinnerState = {\n    percentage: number;\n}\n\n/**\n * Renders a spinner which in addition to spinning, also changes size.\n */\nexport default class LoadingSpinner extends React.Component<LoadingSpinnerProps, LoadingSpinnerState> {\n    state= {\n        percentage: 10 // From 10 to 90, this specifies how much the spinner grows and shrinks while spinning (reversed)\n    }\n    intervalNum= 0;\n    render (): JSX.Element {\n        return (\n            <div className=\"loading-spinner\">\n                <ProgressRing\n                    percent={this.state.percentage}\n                    caps='round'\n                    trackColor=\"transparent\"\n                    spin={true}\n                    {...this.props}\n                    transitionDuration={2000}/>\n            </div>\n        );\n    }\n\n    componentDidMount (): void {\n        this.intervalNum= window.setInterval(() => { // Spinner grows and shrinks while spinning\n            this.setState({\n                percentage: (90 - this.state.percentage)\n            });\n        }, 2000);\n    }\n\n    componentWillUnmount (): void {\n        clearInterval(this.intervalNum);\n    }\n}","import React from 'react';\nimport LoadingSpinner from '../elements/loading-spinner';\nimport { connect } from 'react-redux';\nimport { ConnectionStoreState } from '../../TdWeb/connectionStore';\n\n/**\n * Renders the connecting spinner at the bottom left corner, which is hidden when connected\n */\nexport default (connect<{state: ConnectionStoreState}, unknown, Record<string, never>, ConnectionStoreState>((state:ConnectionStoreState)=> ({state: state})) (function ConnectionState({state}) {\n    return (\n        <div className={'connectionState'+(([\n            'connectionStateConnecting',\n            'connectionStateConnectingToProxy',\n            'connectionStateWaitingForNetwork'\n        ].includes(state))? '' : ' connected')}>\n            <LoadingSpinner\n                progressColor=\"var(--theme-color-menuIconFg)\"\n                size={20}\n                lineWidth={2}/>\n        </div>\n    );\n}) as unknown as ()=> JSX.Element);\n","import { createStore, Store } from 'redux';\nimport TdLib from '../TdWeb/tdlib';\nimport TdApi from '../TdWeb/td_api';\n\nexport type UsersStoreState = {\n    [id: number]: TdApi.user;\n}\n\nexport type UsersStoreAction = {\n    type: 'UPD_USER',\n    user: TdApi.user;\n} | {\n    type: 'UPD_USER_STATUS',\n    userId: number;\n    status: TdApi.UserStatus;\n}\n\nconst usersStore: Store<UsersStoreState, UsersStoreAction> = createStore<UsersStoreState, UsersStoreAction, any, any>((state = {}, action) => {\n    switch (action.type) {\n        case 'UPD_USER':\n            return {\n                ...state,\n                [action.user.id]: action.user\n            };\n        case 'UPD_USER_STATUS':\n            return {\n                ...state,\n                [action.userId]: {\n                    ...state[action.userId],\n                    status: action.status\n                }\n            };\n        default:\n            return state;\n    }\n    //eslint-disable-next-line @typescript-eslint/no-explicit-any\n}, (window as any).__REDUX_DEVTOOLS_EXTENSION__?.());\n\nTdLib.registerUpdateHandler<TdApi.updateUser>('updateUser', (update) => {\n    usersStore.dispatch({\n        type: 'UPD_USER',\n        user: update.user\n    });\n});\n\nTdLib.registerUpdateHandler<TdApi.updateUserStatus>('updateUserStatus', (update) => {\n    usersStore.dispatch({\n        type: 'UPD_USER_STATUS',\n        userId: update.user_id,\n        status: update.status\n    });\n});\n\nexport default usersStore;\n","import React from 'react';\nimport './link-button.scss';\n\ntype LinkButtonProps= {\n    href?: string;\n    children: React.ReactNode;\n    onClick?: (e: React.SyntheticEvent) => void;\n    //eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [key: string]: any;\n}\n\n/**\n * Renders a button looking like a link.\n */\nexport default function LinkButton({href, children, onClick, ...rest}: LinkButtonProps): JSX.Element {\n    const click= href ? ()=> window.open(href) : onClick;\n    return (\n        <a className=\"link-button\" onClick={click} {...rest}>{children}</a>\n    );\n}\n","import {createStore} from 'redux';\nimport TdLib from '../TdWeb/tdlib';\nimport TdApi from '../TdWeb/td_api';\n\nexport type SupergroupStoreState= {\n    [id: number]: TdApi.supergroup;\n}\n\nexport type SupergroupStoreAction= {\n    type: 'UPD_SUPERGROUP',\n    supergroup: TdApi.supergroup;\n}\n\nfunction reducer(state: SupergroupStoreState= {}, action: SupergroupStoreAction): SupergroupStoreState {\n    switch (action.type) {\n        case 'UPD_SUPERGROUP':\n            return {\n                ...state,\n                [action.supergroup.id]: action.supergroup\n            };\n        default:\n            return state;\n    }\n}\n\nconst supergroupStore= createStore<SupergroupStoreState, SupergroupStoreAction, any, any>(reducer);\nexport default supergroupStore;\n\nTdLib.registerUpdateHandler<TdApi.updateSupergroup>('updateSupergroup', (update) => {\n    supergroupStore.dispatch({\n        type: 'UPD_SUPERGROUP',\n        supergroup: update.supergroup\n    });\n});","import __ from '../language-pack/language-pack';\nimport TdApi from '../TdWeb/td_api';\nimport supergroupStore from './supergroup-store';\nimport usersStore, { UsersStoreState } from './users-store';\n\n/**\n * Check if the chat is with a deleted user\n * @param chat The chat to check\n * @param users A dictionary of all users (e.g. usersStore state)\n * @returns True if the chat is private and the other party's account is deleted\n */\nexport function isChatWithDeletedAccount(chat: TdApi.chat, users: UsersStoreState|undefined= undefined): boolean {\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': // Groups are not applicable\n        case 'chatTypeSupergroup':\n            return false;\n        \n        case 'chatTypeSecret':\n        case 'chatTypePrivate': {\n            const user= (users || usersStore.getState())?.[chat.type.user_id];\n            return user && user.type['@type'] === 'userTypeDeleted';\n        }\n    }\n    return false;\n}\n\n/**\n * Returns the chat's title and handles deleted account\n * @param chat The chat to get the name of\n * @param users A list of all users (e.g. usersStore state). If not provided, usersStore will be used\n * @returns Chat title, or 'Deleted Account'\n */\nexport function chatTitleOrDeletedAccount(chat: TdApi.chat, users: UsersStoreState|undefined= undefined): string {\n    if(isChatWithDeletedAccount(chat, users))\n        return __('lng_deleted') as string;\n    return chat.title;\n}\n\n/**\n * Checks if a user, bot or channel is verified\n * @param {import('tdweb').TdObject} chat The chat to be checked\n * @returns {boolean} True if the chat is verified, false if not\n */\nexport function isChatVerified(chat: TdApi.chat): boolean {\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup':\n            return false;\n\n        case 'chatTypeSupergroup': {\n            return (supergroupStore.getState()?.[chat.type.supergroup_id]).is_verified;\n        }\n        case 'chatTypeSecret':\n        case 'chatTypePrivate': \n            return (usersStore.getState()?.[chat.type.user_id]).is_verified;\n    }\n    return false;\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { createStore } from 'redux';\nimport { connect } from 'react-redux';\nimport './context-menu.scss';\n\ntype ContextMenuProps = {\n    x: number;\n    y: number;\n    children: React.ReactNode | React.ReactNode[];\n}\n\n/**\n * A context menu (right click menu)\n */\nexport function ContextMenu({x, y, children}: ContextMenuProps): JSX.Element {\n    const [direction, setDirection] = React.useState('br');\n    const [hide, setHide] = React.useState(false);\n    const ref = React.useRef<HTMLDivElement>() as React.RefObject<HTMLDivElement>;\n    React.useEffect(() => {\n        setTimeout(() => {\n            if(!ref?.current) return;\n            const rect = ref.current.children[0].getBoundingClientRect();\n            const {width, height} = rect;\n            const {clientWidth, clientHeight} = document.documentElement;\n            let X = 'r', Y = 'b';\n            if (x + width > clientWidth) {\n                X = 'l';\n            }\n            if (y + height > clientHeight) {\n                Y = 't';\n            }\n            setDirection(Y + X);\n        }, 0);\n    }, []);\n\n    function handleMouseDown() {\n        setHide(true);\n        setTimeout(() => {\n            contextMenusStore.dispatch({\n                type: 'REMOVE_CONTEXT_MENUS'\n            });\n        }, 500);\n    }\n\n    return (\n        <div className={'context-menu' + (hide? ' hidden' : '')} \n            style={{'--x': x+'px', '--y': y+'px'} as {[key: string]: string}}\n            onMouseDown={e=> (!(e.target as HTMLElement).classList.contains('menu-item') && handleMouseDown())}\n            onMouseUp={e=> (((e.target as HTMLElement).classList.contains('menu-item')) && handleMouseDown())}>\n\n            <div className={'menu ' + direction} ref={ref}>\n                {children}\n            </div>\n        </div>\n    );\n}\nContextMenu.propTypes = {\n    /** Position relative to viewport */\n    x: PropTypes.number.isRequired,\n    /** Position relative to viewport */\n    y: PropTypes.number.isRequired,\n    children: PropTypes.node.isRequired\n};\n\ntype ContextMenusStoreState = React.ReactElement|null;\n\ntype ContextMenusStoreAction_AddContextMenu = {\n    type: 'ADD_CONTEXT_MENU';\n    menu: React.ReactElement;\n}\ntype ContextMenusStoreAction_RemoveContextMenus = {\n    type: 'REMOVE_CONTEXT_MENUS';\n}\n\ntype ContextMenusStoreAction = ContextMenusStoreAction_AddContextMenu | ContextMenusStoreAction_RemoveContextMenus;\n\nexport const contextMenusStore = createStore<ContextMenusStoreState, ContextMenusStoreAction, any, any>(function (state = null, action) {\n    if (action.type === 'ADD_CONTEXT_MENU') {\n        return action.menu;\n    }\n    else if (action.type === 'REMOVE_CONTEXT_MENUS') {\n        return null;\n    }\n    return state;\n});\n\nexport const ContextMenus= (connect(state=>({menus:state}))(({menus}) => menus)) as unknown as ()=> JSX.Element;\n\n/**\n * Create a context menu\n * @param e Pass down `e` from the event handler\n * @param menu Context menu contents\n */\nexport function createContextMenu(e: React.MouseEvent, menu: React.ReactElement): void {\n    e.preventDefault();\n    setTimeout(() => { // This is to fix ripple effect glitch\n        contextMenusStore.dispatch({\n            type: 'ADD_CONTEXT_MENU',\n            menu: <ContextMenu x={e.nativeEvent.pageX} y={e.nativeEvent.pageY}>{menu}</ContextMenu>\n        });\n    }, 50); // Human brain cannot notice 50ms delay\n}\n","import React from 'react';\nimport './menu.scss';\nimport RippleEffect, { handleMyMouseEventsFunction, RippleEffectProps_AutoSettable } from '../elements/ripple-effect';\n\n/**\n * A dropdown menu (not to be confused with `<select>`).\n */\nexport default function Menu(props: React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>): JSX.Element {\n    return (\n        <div className=\"menu\" {...props}/>\n    );\n}\n\n/**\n * Dropdown menu contents (created as a separate component so that it can be wrapped by other components).\n */\nMenu.MenuContents= function MenuContents(props: React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>): JSX.Element {\n    return (\n        <div className=\"menu-contents\" {...props}/>\n    );\n};\n\nexport type Menu_MenuitemProps = {\n    icon?: string,\n}\n\n/**\n * A menu item.\n */\nMenu.MenuItem= function MenuItem({children, icon, ...rest}: Menu_MenuitemProps & React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>): JSX.Element {\n    const ripple= React.useState<RippleEffectProps_AutoSettable>({state: 'off'});\n    const rippleEvents = handleMyMouseEventsFunction(ripple);\n    return (\n        <div className=\"menu-item\" {...rest} {...rippleEvents}>\n            <RippleEffect {...ripple[0]} color=\"var(--theme-color-windowBgRipple)\"/>\n            {icon ? \n                <div className=\"content has-icon\">\n                    <div className=\"icon\" dangerouslySetInnerHTML={{__html: icon}}/>\n                    <span>{children}</span>\n                </div>\n                :\n                <div className=\"content\">\n                    {children}\n                </div>\n            }   \n        </div>\n    );\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './toast.scss';\nimport { createStore } from 'redux';\nimport { connect } from 'react-redux';\n\n/**\n * Renders a toast (a small text which is temporarily shown in the middle of the screen)\n */\nexport default function Toast({children}: {children: React.ReactNode}): JSX.Element {\n    const [closed, setClosed] = React.useState(false);\n    React.useEffect(() => {\n        setTimeout(() => { // Automatically close after 6 seconds\n            setClosed(true); // When an element has a closing dialog, a CSS class should be added to trigger the animation\n            setTimeout(() => { // Then we wait until the animation is finished\n                addToast(null); // And we can safely remove the element\n            }, 2000);\n        }, 6000);\n    }, []);\n    return (\n        <div className={'toast' + (closed? ' closed':'')}>\n            <div className=\"toast-content\">\n                {children}\n            </div>\n        </div>\n    );\n}\nToast.propTypes = {\n    children: PropTypes.node.isRequired,\n};\n\ntype ToastStoreAction_SetToast = {\n    type: 'SET_TOAST';\n    toast: React.ReactNode;\n}\n\nexport const toastStore= createStore<React.ReactNode, ToastStoreAction_SetToast, any, any> (\n    (state=null, action) => {\n        if(action.type=='SET_TOAST') return action.toast;\n        return state;\n    })\n;\n\nexport const Toasts= (connect(state=>({toast: state}))(function Toasts({toast}){\n    return toast;\n})) as unknown as ()=> JSX.Element;\n\nexport function addToast(toast: React.ReactNode): void {\n    toastStore.dispatch({\n        type: 'SET_TOAST',\n        toast\n    });\n}\n","import TdLib from './tdlib';\nimport TdApi from './td_api';\n\ntype OptionInt64ToInt53<T> = \n    T extends TdApi.optionValueInteger ? number :\n    T extends TdApi.optionValueBoolean ? boolean :\n    T extends TdApi.optionValueString ? string :\n    T extends TdApi.optionValueEmpty ? undefined :\n    never;\ntype OptionsInt64ToInt53<T> = { [K in keyof T]: OptionInt64ToInt53<T[K]> };\n\n/**\n * Contains all options received from TdLib `updateOption`s\n */\nconst options: OptionsInt64ToInt53<TdApi.TdOptions>={};\n\nTdLib.registerUpdateHandler<TdApi.updateOption>('updateOption', function (update) {\n    switch (update.value['@type']) {\n        case 'optionValueInteger':\n            options[update.name] = Number(update.value.value);\n            break;\n        case 'optionValueBoolean':\n            options[update.name] = update.value.value;\n            break;\n        case 'optionValueString':\n            options[update.name] = update.value.value;\n            break;\n        case 'optionValueEmpty':\n            options[update.name] = undefined;\n            break;\n    }\n});\n\nexport default options;\n","import TdApi from '../TdWeb/td_api';\n\n/**\n * Gets message sending status. Can return 3 values:\n * - `\"sending\"`: the message is outgoing and is being sent.\n * - `\"sent\"`: the message is outgoing and was sent.\n * - `\"seen\"`: the message is outgoing and was seen by the other party.\n * - `\"unread\"`: the message is incoming and was not seen by this party.\n * - `\"read\"`: the message is incoming and was seen by this party.\n * @param chat The chat in which the message was sent.\n * @param message The message to check.\n */\nexport function getMessageStatus(chat: TdApi.chat|undefined, message: TdApi.message|undefined): 'sending' | 'sent' | 'seen' | 'unread' | 'read' | undefined {\n    if (!chat || !message) return undefined;\n    if(message.is_outgoing) {\n        if(message.sending_state) {\n            return 'sending';\n        }\n        if(chat.last_read_outbox_message_id >= message.id) {\n            return 'seen';\n        }\n        return 'sent';\n    }\n    if(chat.last_read_inbox_message_id >= message.id) {\n        return 'read';\n    }\n    return 'unread';\n}","import TdLib from './tdlib';\nimport TdApi from './td_api';\n\n/**\n * Downloads a file. Promise is resolved when the file is downloaded.\n * @param file_id ID of file to be downloaded\n * @param priority From 1 to 32, higher number results in earlier download\n * @returns File object\n */\nexport function downloadFile(file_id: number, priority: number): Promise<TdApi.file> {\n    let onReject;\n    TdLib.sendQuery({\n        '@type': 'downloadFile',\n        'file_id': file_id,\n        'priority': priority,\n        'offset': 0,\n        'limit': 0,\n        'synchronous': false\n    }).then((res)=> {\n        const file = res as TdApi.file;\n        TdLib.handleUpdate({ // TDLib will not sent an update when file.local.is_downloading_active changes. We can inject one here.\n            '@type': 'updateFile',\n            file\n        });\n    }, onReject);\n\n    return new Promise((resolve, reject) => {\n        downloadCallbacks[file_id]= (result: TdApi.file) => {\n            resolve(result);\n            delete downloadCallbacks[file_id];\n        };\n        onReject=reject;\n    });\n}\n\nexport function cancelDownloadFile(file_id: number): void {\n    TdLib.sendQuery({\n        '@type': 'cancelDownloadFile',\n        file_id\n    }).then(() => {\n        delete downloadCallbacks[file_id];\n    });\n}\n\nconst downloadCallbacks: {[key: number]: (result: TdApi.file) => void} = {};\n\nTdLib.registerUpdateHandler<TdApi.updateFile>('updateFile', function (update) {\n    if(update.file.local.is_downloading_completed){\n        downloadCallbacks[update.file.id]?.(update.file);\n    }\n});\n\nconst cachedFiles: {[key: number]: Blob} = {};\n\n/**\n * Gets file content (downloads if necessary). Promise is resolved with a `filePart` object when file content is ready\n * @param file File object\n * @param priority Download priority from 1 to 32. Higher value = earlier download\n * @param enableCache If true, files smaller than 500KiB will be stored in a cache in the RAM.\n * @returns A `filePart` object\n * \n */\nexport function getFileContent(file: TdApi.file, priority: number, enableCache= true): Promise<TdApi.filePart> {\n    if(file.id in cachedFiles){ // If we have it in cache, we can use that\n        return Promise.resolve({\n            '@type': 'filePart',\n            data: cachedFiles[file.id]\n        });\n    }\n\n    function resolveFilePart(filePart: TdApi.filePart): TdApi.filePart {\n        if(enableCache && file.size <= 500*1024) {\n            cachedFiles[file.id]=filePart.data;\n        }\n        return filePart;\n    }\n\n    if(file.local.is_downloading_completed){ // File is already downloaded - only read file\n        return new Promise((resolve, reject) => {\n            TdLib.sendQuery({\n                '@type': 'readFilePart',\n                'file_id': file.id,\n                'offset': 0,\n                'count': 0\n            }).then((f)=>resolve(resolveFilePart(f as TdApi.filePart))).catch(reject);\n        });\n    } \n    else if(file.local.is_downloading_active){ // File is already being downloaded - gets quite complex here.\n        return new Promise((resolve, reject) => {\n            const callback = downloadCallbacks[file.id];\n            downloadCallbacks[file.id] = (result) => { // Replace old callback with a new callback that calls the old one and also does its own stuff\n                callback(result); // Call the old callback\n                TdLib.sendQuery({ // Read the file\n                    '@type': 'readFilePart',\n                    'file_id': file.id,\n                    'offset': 0,\n                    'count': 0\n                }).then((f)=>resolve(resolveFilePart(f as TdApi.filePart))).catch(reject);\n            };\n        });\n    } else {\n        return new Promise((resolve, reject) => { // File is not downloaded.\n            downloadFile(file.id, priority).then(()=> { // Download it...\n                TdLib.sendQuery({ // ...then read it\n                    '@type': 'readFilePart',\n                    'file_id': file.id,\n                    'offset': 0,\n                    'count': 0\n                }).then((f)=>resolve(resolveFilePart(f as TdApi.filePart))).catch(reject);\n            }).catch(reject);\n        });\n    }\n}\n\n/**\n * Converts a blob to a URL\n * @param blob Blob to convert\n * @returns Created URL\n */\nexport function blobToUrl (blob: Blob): string {\n    return (window.URL || window.webkitURL).createObjectURL(blob);\n}\n","export default __webpack_public_path__ + \"static/media/TgLogo.d1ff1195.png\";","import React from 'react';\nimport { blobToUrl, getFileContent } from '../../TdWeb/file';\nimport options from '../../TdWeb/options';\nimport './profile-photo.scss';\nimport tgLogo from '../../ui/img/TgLogo.png';\nimport { saved_messages, replies_userpic } from '../icon/icons';\nimport TdApi from '../../TdWeb/td_api';\n\n/**\n * Converts a name to initials.\n * @param name Input name\n * @returns One or two uppercase letters\n */\nexport function profileNameToInitials(name: string): string {\n    const words=name.replace(/[\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007F]/g,'') // Remove non-word characters\n        .toUpperCase().split(' ');\n    if(words[0].length==0){\n        return '';\n    } else if(words.length===1) {\n        return words[0][0];\n    } else {\n        return words[0][0] + words[words.length-1][0];\n    }\n}\n\ntype ProfilePhotoProps = {\n    /** Chat type id (supergroup id, user id, etc.), used for initials background */\n    id: number|string;\n    /** Chat / user photo (e.g. `chat.photo?.small`) */\n    photo?: TdApi.file;\n    /** If false, saved messages icon will be used when user_id = my_id */\n    disableSavedMessages?: boolean;\n    /** Chat/user name, used for initials */\n    name: string;\n}\n\n/**\n * Renders a chat / profile photo.\n */\nexport default function ProfilePhoto (props: ProfilePhotoProps): JSX.Element {\n    const [photo, setPhoto] = React.useState<string|null>(null);\n    const [photoObj, setPhotoObj] = React.useState<TdApi.file|undefined>(undefined);\n    const [loaded, setLoaded] = React.useState(false);\n    const isServiceMessages= props.id==options['telegram_service_notifications_chat_id'];\n    const isSavedMessages= props.id==options['my_id'];\n    const isReplies= props.id==options['replies_bot_chat_id'];\n    \n    React.useEffect(() => { // Fetch image data\n        let mounted=true;\n        if(props.photo){\n            if(photoObj!=props.photo){ // No need for any fetch if the same photo is already loaded\n                getFileContent(props.photo, 8).then((file: TdApi.FilePart)=> {\n                    if(!mounted) return;\n                    setPhoto(blobToUrl(file.data));\n                    setPhotoObj(props.photo);\n                });\n            }\n        } else { // No photo\n            if(photo && photoObj){\n                setPhoto(null);\n                setPhotoObj(undefined);\n            }\n        }\n        return ()=> {mounted=false;};\n    }, [props.photo]);\n\n    let customIcon: [0|1, string]|undefined; \n    if(isSavedMessages && (!props?.disableSavedMessages)){ // Use saved messages icon instead of user pic (if not disabled)\n        customIcon= [0, saved_messages];\n    }\n    if(isReplies){ // Replies chat has no icons and we supply one ourselves\n        customIcon= [0, replies_userpic];\n    }\n    if((!props.photo) && isServiceMessages) { // Service messages may have no photo (e.g. on test DC)\n        customIcon = [1, tgLogo];\n    }\n    return (\n        <div className=\"profile-photo\">\n            {(!loaded || !(props.photo && photo)) && <Initials id={props.id} name={props.name}/>}\n            {\n                customIcon? (\n                    customIcon[0]?\n                        <React.Fragment>\n                            {(!loaded) && <Initials id={props.id} name={props.name}/>}\n                            <img onLoad={()=> setLoaded(true)} src={customIcon[1]}/>\n                        </React.Fragment>\n                        :\n                        <div className=\"svg\" dangerouslySetInnerHTML={{__html: customIcon[1]}}/>\n                ) : (\n                    (props.photo && photo) && <img onLoad={()=> setLoaded(true)} src={photo}/> \n                )\n            }\n        </div>\n    );\n}\n\ntype InitialsProps= {\n    /** Chat type ID, used to generate background color */\n    id: number|string;\n    /** Chat/user name, used to generate initials */\n    name: string;\n}\n\n/** Renders photo initials fallback */\nfunction Initials({id, name}: InitialsProps): JSX.Element {\n    return (\n        <span className={'initials color_'+ getIdColorCode(id)}>\n            {profileNameToInitials(name)}\n        </span>\n    );\n}\n\nexport function getIdColorCode(id: string|number): number {\n    const map = [1, 8, 5, 2, 4, 4, 6];\n    return map[Math.abs((id || 0) as number) % 7];\n}\n\n/**\n * Returns a chat's type ID. (supergroup Id / basic group ID / user ID)\n * @param chat Input chat\n * @returns Chat type ID\n */\nexport function getChatTypeId(chat: TdApi.chat): number {\n    switch (chat?.type?.['@type']) {\n        case 'chatTypeSupergroup': {\n            return chat?.type?.supergroup_id;\n        }\n        case 'chatTypeBasicGroup': {\n            return chat?.type?.basic_group_id;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return chat?.type?.user_id;\n        }\n    }\n    return 0;\n}\n","import React from 'react';\nimport __, { __fmt, __pl } from './language-pack/language-pack';\nimport TdApi from './TdWeb/td_api';\n\n/**\n * Converts a date and time to a short string.\n * - If the date is in the last 20 hours, the time is displayed in the format HH:MM.\n * - If the date is in the last 7 days, the weekday is displayed.\n * - If the date is older, the date is displayed in the format DD.MM.YY.\n * @param date Input date\n */\nexport function smallDateTimeToString(date: Date|number): string {\n    if(typeof date == 'number') date= TdLibDateToDate(date);\n    const now = new Date();\n    const yesterday = new Date(now.getTime() - 20 * 60 * 60 * 1000);\n    const lastWeek = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n\n    if (date.getTime() >= yesterday.getTime()) {\n        return timeToString(date);\n    } else if (date.getTime() >= lastWeek.getTime()) {\n        return weekdayToString(date);\n    } else {\n        return dateToString(date);\n    }\n}\n\n/**\n * Formats time in 12-hour format\n * @param date input date\n */\nexport function timeToString(date: Date|number): string {\n    if(typeof date == 'number') date= TdLibDateToDate(date);\n    let hours = date.getHours();\n    let minutes: string|number = date.getMinutes();\n    const am_pm = hours >= 12 ? 'PM' : 'AM';\n    hours = hours % 12;\n    hours = hours ? hours : 12; // the hour '0' should be '12'\n    minutes = minutes < 10 ? `0${minutes}` : minutes;\n    return `${hours}:${minutes} ${am_pm}`;\n}\n\n/**\n * Formats weekday in WWW format\n * @param date input date\n */\nexport function weekdayToString(date: Date|number): string {\n    if(typeof date == 'number') date= TdLibDateToDate(date);\n    const weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    return weekdays[date.getDay()];\n}\n\n/**\n * Formats date in DD.MM.YY format\n * @param date input date\n */\nexport function dateToString(date: Date|number): string {\n    if(typeof date == 'number') date= TdLibDateToDate(date);\n    let day: string|number = date.getDate();\n    let month: string|number = date.getMonth() + 1;\n    const year = String(date.getFullYear()).slice(2);\n    if (day < 10) {\n        day = `0${day}`;\n    }\n    if (month < 10) {\n        month = `0${month}`;\n    }\n    return `${day}.${month}.${year}`;\n}\n\n/**\n * Converts a future day to a string.  \n * If the day is today, returns 'today'.  \n * If the day is tomorrow, returns 'tomorrow'.  \n * If the day is neither today or tomorrow, returns the month and day. (eg. 'February 12')\n * @param date Input date\n * @returns `today`, `tomorrow` or month+day\n */\nexport function futureDayToString(date: Date|number): string {\n    if(typeof date == 'number') date= TdLibDateToDate(date);\n    const today = new Date();\n    const tomorrow = new Date(today.getTime() + 24 * 60 * 60 * 1000);\n\n    if (date.getDate() == today.getDate() && date.getMonth() == today.getMonth()) {\n        return 'today';\n    } else if (date.getDate() == tomorrow.getDate() && date.getMonth() == tomorrow.getMonth()) {\n        return 'tomorrow';\n    } else {\n        const months= ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n        return `${months[date.getMonth()]} ${date.getDate()}`;\n    }\n}\n\n/**\n * Converts a duration to string.\n * If the duration is less than 2 minutes, the string is in the format 'X seconds'.\n * If the duration is less than 2 hours, the string is in the format 'X minutes'.\n * If the duration is less than 1 day, the string is in the format 'X hours'.\n * If the duration is longer, the string is in the format 'X days'.\n * @param duration Duration in seconds\n */\nexport function durationToString(duration: number): string {\n    if (duration < 2 * 60) {\n        return `${duration} seconds`;\n    } else if (duration < 2 * 60 * 60) {\n        return `${Math.floor(duration / 60)} minutes`;\n    } else if (duration < 24 * 60 * 60) {\n        return `${Math.floor(duration / 60 / 60)} hours`;\n    } else {\n        return `${Math.floor(duration / 24 / 60 / 60)} days`;\n    }\n}\n\nexport function lastSeenToString(status: TdApi.UserStatus): React.ReactNode {\n    switch (status['@type']) {\n        case 'userStatusLastMonth':\n            return __('lng_status_last_month');\n        \n        case 'userStatusLastWeek':\n            return __('lng_status_last_week');\n\n        case 'userStatusOffline': {\n            const current = Math.floor((new Date().getTime()) / 1000);\n            const lastSeen = status.was_online;\n            const diff = current - lastSeen; // Difference in seconds\n            const diffMinutes = Math.floor(diff / 60);\n            const diffHours = Math.floor(diff / 3600);\n            \n            if (diffMinutes < 1)\n            {\n                return __('lng_status_lastseen_now');\n            }\n            if (diffMinutes < 60)\n            {\n                return __pl('lng_status_lastseen_minutes', diffMinutes);\n            }\n            if (diffHours < 12)\n            {\n                return __pl('lng_status_lastseen_hours', diffHours);\n            }\n            \n            const currentDate = TdLibDateToDate(current);\n            const lastSeenDate = TdLibDateToDate(lastSeen);\n\n            if (currentDate.getHours() - diffHours >= 0)\n            {\n                return __fmt('lng_status_lastseen_today', {time: lastSeenDate.toLocaleTimeString('en-US')});\n            }\n            if (currentDate.getHours() - diffHours < 0 && currentDate.getHours() - diffHours > -24)\n            {\n                return __fmt('lng_status_lastseen_yesterday', {time: lastSeenDate.toLocaleTimeString('en-US')});\n            }\n            return __fmt('lng_status_lastseen_date', {date: lastSeenDate.toLocaleDateString('en-US')});\n        }\n\n        case 'userStatusRecently':\n            return __('lng_status_recently');\n\n        case 'userStatusOnline':\n            return __('lng_status_online');\n\n        case 'userStatusEmpty':\n        default:\n            return __('lng_status_offline');\n    }\n}\n\n/**\n * Converts a TDLIb unix time to a `Date` object.\n */\nexport function TdLibDateToDate(tdLibDate: number): Date {\n    return new Date(tdLibDate * 1000);\n}","import currencies from './currencies.json';\n\n/**\n * Converts currency to string\n * @param currency Three-letter currency code\n * @param total_amount The total amount\n * @returns Formatted currency string\n */\nexport default function currencyAmountToString (currency: keyof typeof currencies, total_amount: number): string {\n    const {symbol, thousands_sep, decimal_sep, symbol_left, space_between, exp}= currencies[currency];\n    const calculatedAmount= total_amount / 10.0**exp;\n    const formattedAmount= calculatedAmount.toFixed(exp).replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g, thousands_sep).replace(/\\./, decimal_sep);\n    const withSymbol= symbol_left ? `${symbol}${space_between ? ' ' : ''}${formattedAmount}` : `${formattedAmount}${space_between ? ' ' : ''}${symbol}`;\n    return withSymbol;\n    \n    // var formatter = new Intl.NumberFormat('en-US', {\n    //     style: 'currency',\n    //     currency: currency,\n        \n    //     minimumFractionDigits: 2,\n    //     maximumFractionDigits: 2,\n    // });\n    // return formatter.format(total_amount / 10**currencyObject.exp); // Move two last digits to the right of the decimal point\n}","import { __fmt } from '../language-pack/language-pack';\nimport TdApi from '../TdWeb/td_api';\n\nexport function getUserFullName({first_name, last_name}: TdApi.user): string {\n    return last_name ? __fmt('lng_full_name', {first_name, last_name}, false).join('') : first_name;\n}","import React from 'react';\nimport RippleEffect, {handleMyMouseEventsFunction, RippleEffectProps_AutoSettable} from './ripple-effect';\n\ntype SmallButtonProps= {\n    /** The button's content */\n    children: React.ReactNode;\n    /** Fires when the button is clicked */\n    onClick?: () => void;\n    /** Setting to true causes the button to become red */\n    attention?: boolean;\n    //eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [x: string]: any;\n}\n\n/**\n * Renders a small button with accent color\n */\nexport default function SmallButton ({children, attention, ...rest}: SmallButtonProps): JSX.Element {\n    const ripple= React.useState<RippleEffectProps_AutoSettable>({state: 'off'});\n    const rippleEvents= handleMyMouseEventsFunction(ripple);\n    return (\n        <button \n            className=\"small-button\" \n            data-attention={attention? 'true': 'false'}\n            {...rippleEvents}\n            {...rest}>\n\n            <RippleEffect {...ripple[0]} color=\"var(--theme-color-lightButtonBgRipple)\"/>\n\n            {/* Because we use absolute positioning on the actual content, we need a copy of it without absolute position to get the correct parent size. */}\n            <div className=\"invisibleText\">\n                {children}\n            </div>\n\n            <div className=\"content\">\n                {children}\n            </div>\n            \n        </button>\n    );\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { createStore } from 'redux';\n\ntype CanBeDialog= any;\ntype DialogStoreState= CanBeDialog[];\n\ntype DialogStoreAction_AddDialog= {\n    type: 'ADD_DIALOG';\n    dialog: CanBeDialog;\n}\ntype DialogStoreAction_RemoveDialog= {\n    type: 'REMOVE_DIALOG';\n    id: string;\n}\ntype DialogStoreAction= DialogStoreAction_AddDialog | DialogStoreAction_RemoveDialog;\n\n/**\n * A redux store which state is an array of objects with {id: unique ID of dialog, element: react element of the dialog}\n */\nexport const dialogStore= createStore<DialogStoreState, DialogStoreAction, any, any> (\n    function (state: DialogStoreState= [], action: DialogStoreAction): DialogStoreState {\n        switch (action.type) {\n            case 'ADD_DIALOG':\n                return [\n                    ...state,\n                    action.dialog\n                ];\n            \n            case 'REMOVE_DIALOG':\n                return state.filter(value =>value.id!=action.id);\n            \n            default:\n                return state;\n        }\n    },\n    (window as any).__REDUX_DEVTOOLS_EXTENSION__?.());\n\n/**\n * Opens a dialog\n * @param id A unique ID for the dialog\n * @param dialog The dialog React element\n */\nexport function addDialog(id: string, dialog: CanBeDialog): void {\n    dialogStore.dispatch({\n        type: 'ADD_DIALOG',\n        dialog: {\n            element: dialog,\n            id: id\n        }\n    });\n}\n\n/**\n * Closes an existing dialog\n * @param id The dialog unique ID\n */\nexport function removeDialog(id: string): void {\n    dialogStore.dispatch({\n        type: 'REMOVE_DIALOG',\n        id: id\n    });\n}\ntype DialogsProps= {\n    // dialogs: DialogStoreState;\n    // dispatch: (action: DialogStoreAction) => void;\n    [key: string]: any;\n}\n\n/**\n * Renders all dialogs.\n */\nconst Dialogs= (connect<{dialogs: DialogStoreState}, unknown, DialogsProps, DialogStoreState>(\n    function (state) {\n        return {dialogs: state || []};\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    })(function Dialogs({dialogs, dispatch, ...rest}: DialogsProps): JSX.Element {\n    return (\n        <div data-dialog={!!dialogs.length} {...rest}>\n            {dialogs.map((el: CanBeDialog) => <React.Fragment key={el.id}>{(el as any).element}</React.Fragment>) || null}\n        </div>\n    );\n}\n));\n\nexport default Dialogs;","import React from 'react';\nimport { removeDialog } from './dialogs';\n\ntype DialogProps= {\n    children: React.ReactNode;\n    /** Dialog width in CSS format */\n    width?: string;\n    /** Unique ID of this dialog, used to close it. */\n    id: string;\n    className?: string;\n}\ntype DialogState= {\n    closing: boolean;\n}\n\n/**\n * Renders a modal dialog\n * Use React ref to access the `close()` method.\n */\nexport default class Dialog extends React.Component<DialogProps, DialogState> {\n    state= {\n        closing: false\n    }\n\n    ref = React.createRef<HTMLDivElement>();\n\n    /** @param {React.SyntheticEvent} e */\n    onClick= (e: React.SyntheticEvent): void => {\n        if (e.target === this.ref.current) {\n            this.close();\n        }\n    }\n\n    render(): JSX.Element {\n        return (\n            <div ref={this.ref} onClick={this.onClick} id={this.props.id} className={'modal-dialog' + ((this.state.closing) ? ' closing ' : ' ') + this.props.className}>\n                <div style={{\n                    'width': this.props.width || 'auto'\n                }}>\n                    {this.props.children}\n                </div>\n            </div>\n        );\n    }\n    \n    close= (): void=> {\n        this.setState({\n            closing: true\n        });\n        setTimeout(() => {\n            removeDialog(this.props.id);\n        }, 1000);\n    }\n}\n","import React from 'react';\nimport SmallButton from '../elements/small-button';\nimport Dialog from './dialog';\nimport __ from '../../language-pack/language-pack';\n\ntype ConfirmDialogProps = {\n    children: React.ReactNode;\n    /** Dialog width in CSS format */\n    width?: string;\n    /** Dialog header */\n    title?: React.ReactNode;\n    /** Text content of the OK button*/\n    OKButtonText?: React.ReactNode;\n    /** Pass true to only show the OK button */\n    hideCancelButton?: boolean;\n    /** Unique ID of this dialog, used to close it. */\n    id: string;\n    /** Called when the OK button is pressed */\n    onOK?: () => void;\n    /** Called when the cancel button is pressed */\n    onCancel?: () => void;\n    /** Third button text (optional) */\n    thirdButton?: React.ReactNode;\n    /** Pass true if third button click closes dialog */\n    thirdButtonClosesDialog?: boolean;\n    /** Called when third button is pressed */\n    onThirdButtonClick?: () => void;\n    /** If true, the OK button will become red, meaning the user should pay attention */\n    attention?: boolean;\n    /** If true, the dialog text will be larger */\n    largeFont?: boolean;\n};\n\n/**\n * Renders a modal dialog with a title and cancel and OK button. OK button text can be changed.\n */\nexport default class ConfirmDialog extends React.Component<ConfirmDialogProps> {\n    dialogRef = React.createRef<Dialog>();\n    handleOK= (): void=> {\n        this.dialogRef.current?.close();\n        this.props.onOK && this.props.onOK();\n    }\n    handleCancel= (): void=> {\n        this.dialogRef.current?.close();\n        this.props.onCancel && this.props.onCancel();\n    }\n    handleButton= (handler: (()=> void) | undefined): void=> {\n        this.dialogRef.current?.close();\n        handler && handler();\n    }\n    render(): JSX.Element {\n        return (\n            <Dialog className=\"confirm-dialog\" id={this.props.id} ref={this.dialogRef} width={this.props.width || '320px'}>\n                <h1>{this.props.title || ''}</h1>\n                <div className={'content' + (this.props.largeFont? ' large-font' : '')}>\n                    {this.props.children}\n                </div>\n                <div className=\"options\">\n                    {this.props.thirdButton ?  (\n                        <SmallButton \n                            className=\"small-button left\"\n                            style={{'float': 'left'}}\n                            onClick={ this.props.thirdButtonClosesDialog ?\n                                ()=>this.handleButton(this.props.onThirdButtonClick)\n                                : this.props.onThirdButtonClick}>\n                            {this.props.thirdButton}\n                        </SmallButton>\n                    ) : null}\n                    {this.props.hideCancelButton ? null : (\n                        <SmallButton onClick={()=>this.handleButton(this.props.onCancel)}>\n                            {__('lng_cancel')}\n                        </SmallButton>\n                    )}\n                    <SmallButton onClick={()=>this.handleButton(this.props.onOK)} attention={this.props.attention}>\n                        {this.props.OKButtonText || __('lng_box_ok')}\n                    </SmallButton>\n                </div>\n            </Dialog>\n        );\n    }\n}\n","export type DibgramMods = {\n    chat_enableSyntaxHighlighting: boolean\n};\n\nconst dibgramMods: DibgramMods = JSON.parse(localStorage.getItem('dibgramMods') || '{}');\nexport default dibgramMods;\n\nexport function saveDibgramMod<T extends keyof DibgramMods>(name: T, value: DibgramMods[T]): void {\n    dibgramMods[name]= value;\n    localStorage.setItem('dibgramMods', JSON.stringify(dibgramMods));\n}\n","// DIBgram themes are converted to CSS in runtime here.\n\nimport { ThemeObject } from './theme';\n\nexport function convertThemeToCSS(theme: ThemeObject): {[property: string]: string} { // Convert theme colors to CSS vars\n    const css: {[property: string]: string} = {};\n    for(const name in theme){\n        const obj= theme[name];\n        if(typeof obj.value == 'string') {\n            css['--theme-color-' + name]= obj.value;\n        } else if(typeof obj.value == 'object') { // A color is equal to another color\n            css['--theme-color-' + name]= `var(--theme-color-${obj.value.equals})`;\n        }\n    }\n    return css;\n}","import React from 'react';\nimport classic from './classic.json';\nimport day from './day.json';\nimport tinted from './tinted.json';\nimport night from './night.json';\nimport { convertThemeToCSS } from './dibgram-theme-to-css';\nimport { createStore, Store } from 'redux';\nimport { connect } from 'react-redux';\nimport { getRtlMode } from '../../language-pack/language-pack';\n\nexport const themes = { day, classic, tinted, night };\n\nexport type ThemeObject= {\n    [colorName: string]: {\n        value: string | {equals: string},\n        comment?: string|null,\n    }\n}\n\nexport type ThemeName= 'classic' | 'day' | 'tinted' | 'night';\n\nfunction getThemeFromStorage(): ThemeName {\n    let theme = localStorage.getItem('dibgram-theme');\n    if (!theme) { // if theme is not set in localStorage, use OS theme\n        theme= window.matchMedia?.('(prefers-color-scheme: dark)').matches ? 'night' : 'day';\n        localStorage.setItem('dibgram-theme', theme);\n    }\n    return theme as ThemeName;\n}\n\nexport type ThemeStoreState= {\n    theme: ThemeName,\n    rtl: boolean,\n}\n\nexport type ThemeStoreAction= {\n    type: 'SET_THEME',\n    theme: ThemeName,\n} | {\n    type: 'SET_RTL',\n    rtl: boolean,\n}\n\nexport const themeStore = (createStore<ThemeStoreState, ThemeStoreAction, any, any>(\n    (state = { \n        theme: getThemeFromStorage(),\n        rtl: getRtlMode()\n    }, action) => {\n        switch (action.type) {\n            case 'SET_THEME':\n                return { ...state, theme: action.theme };\n            case 'SET_RTL':\n                return { ...state, rtl: action.rtl };\n            default:\n                return state;\n        }\n    }\n)) as Store<ThemeStoreState, ThemeStoreAction>;\n\n/**\n * All children of this component will be rendered with the theme. Can be treated as a div.\n */\n//eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const ThemeProvider= connect<ThemeStoreState, unknown, React.PropsWithChildren<{[key:string]:any}>, ThemeStoreState>(state=> state) (\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-explicit-any\n    function ThemeProvider({ theme, rtl, dispatch, ...rest}: ThemeStoreState & {dispatch: React.Dispatch<ThemeStoreAction>, [key:string]:any}): JSX.Element {\n        return (\n            <div dir={rtl ? 'rtl' : 'ltr'}\n                data-theme-is-dark={themes[theme].isDark.value}\n                {...rest} \n                style={convertThemeToCSS({...classic, ...themes[theme]})}\n            />\n        );\n    });\n\nexport function setTheme(theme: ThemeName): void {\n    localStorage.setItem('dibgram-theme', theme);\n    themeStore.dispatch({ type: 'SET_THEME', theme });\n}\n\nexport function getThemeIsDark(): boolean {\n    return themes[themeStore.getState().theme].isDark.value == 'true';\n}\n","import React from 'react';\nimport __ from '../../../language-pack/language-pack';\nimport TdApi from '../../../TdWeb/td_api';\nimport ConfirmDialog from '../../../ui/dialog/confirm-dialog';\nimport { addDialog } from '../../../ui/dialog/dialogs';\nimport LinkButton from '../../../ui/elements/link-button';\nimport dibgramMods from \"../../../dibgram-mods\";\nimport './entities.scss';\nimport { getThemeIsDark, themes, themeStore, ThemeStoreState } from '../../../ui/themes/theme';\nimport { connect, Provider } from 'react-redux';\n\nfunction maybeDeleteNewLines(str: string, doIt: boolean) {\n    return doIt? str.replace(/(\\n|\\r|\\r\\n|\\n\\r)/g, ' ') : str;\n}\n\nexport default function compileEntities(text: TdApi.formattedText, singleLine= false): React.ReactNode {\n    let last= 0;\n    const res: React.ReactNode[]= [];\n    /* eslint-disable-next-line no-constant-condition */\n    for(const entity of text.entities) {\n        res.push(maybeDeleteNewLines(text.text.slice(last, entity.offset), singleLine));\n        res.push(getEntityJsx(text.text, entity, singleLine));\n        last= entity.offset + entity.length;\n    }\n    res.push(maybeDeleteNewLines(text.text.slice(last), singleLine));\n    return res;\n}\n\nfunction getEntityJsx(text: string, entity: TdApi.textEntity, singleLine=false) {\n    const innerText= maybeDeleteNewLines(text.slice(entity.offset, entity.offset + entity.length), singleLine);\n\n    if(singleLine) {\n        switch(entity.type['@type']) {\n            case 'textEntityTypeEmailAddress':\n                return <span className='part-1'>{innerText}</span>;\n            case 'textEntityTypeSpoiler':\n                return <SpoilerEntity>{innerText}</SpoilerEntity>;\n            default:\n                return innerText;\n        }\n    } else {\n        switch(entity.type['@type']) {\n            // case 'textEntityTypeBankCardNumber':\n            case 'textEntityTypeBold':\n                return <strong>{innerText}</strong>;\n            case 'textEntityTypeBotCommand':\n                return <LinkButton>{innerText}</LinkButton>; //TODO: Send bot command when clicked\n            case 'textEntityTypeCashtag':\n                return <LinkButton>{innerText}</LinkButton>; //TODO: Search for cashtag when clicked\n            case 'textEntityTypeCode':\n                return <code>{innerText}</code>;\n            case 'textEntityTypeEmailAddress':\n                return <LinkButton href={'mailto:'+innerText}>{innerText}</LinkButton>;\n            case 'textEntityTypeHashtag':\n                return <LinkButton>{innerText}</LinkButton>; //TODO: Search for hashtag when clicked\n            case 'textEntityTypeItalic':\n                return <em>{innerText}</em>;\n            // case 'textEntityTypeMediaTimestamp':\n            //     return <LinkButton>{innerText}</LinkButton>; //TODO: Open media when clicked\n            case 'textEntityTypeMention':\n                return <LinkButton>{innerText}</LinkButton>; //TODO: Open user when clicked\n            case 'textEntityTypeMentionName':\n                return <LinkButton>{innerText}</LinkButton>; //TODO: Open user when clicked\n            // case 'textEntityTypePhoneNumber'\n            case 'textEntityTypePre':\n                return <pre>{innerText}</pre>;\n            case 'textEntityTypePreCode':\n                return <TextEntityPreCode language={entity.type.language}>{innerText}</TextEntityPreCode>;\n            case 'textEntityTypeSpoiler':\n                return <SpoilerEntity>{innerText}</SpoilerEntity>;\n            case 'textEntityTypeStrikethrough':\n                return <del>{innerText}</del>;\n            case 'textEntityTypeTextUrl': {\n                const url= entity.type.url;\n                return (\n                    <LinkButton title={url} onClick={()=> {\n                        addDialog('textEntityTypeTextUrl_confirm_dialog',\n                            <ConfirmDialog id=\"textEntityTypeTextUrl_confirm_dialog\"\n                                OKButtonText={__('lng_open_link')}\n                                onOK={()=> window.open(url)}\n                                largeFont={true}>\n\n                                {__('lng_open_this_link')} <br/>\n                                <br/>\n                                {url}\n                            </ConfirmDialog>\n                        );\n                    }}>\n                        {innerText}\n                    </LinkButton>\n                );\n            }\n            case 'textEntityTypeUnderline':\n                return <u>{innerText}</u>;\n            case 'textEntityTypeUrl':\n                if (!/^https?:\\/\\//i.test(innerText))\n                    return <LinkButton href={'https://'+innerText}>{innerText}</LinkButton>;\n                return <LinkButton href={innerText}>{innerText}</LinkButton>;\n            default:\n                return innerText;\n        }\n    }\n}\n\n//eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction SpoilerEntity(props: {[key:string]:any}): JSX.Element {\n    const [viewed, setViewed]= React.useState(false);\n\n    return (\n        <span className={'spoiler' + (viewed?' viewed' : '')} onClick={()=>setViewed(true)} {...props}/>\n    );\n}\n\ntype TextEntityPreCodeProps= {\n    children: string;\n    language: string;\n}\n\nfunction TextEntityPreCode({children, language}: TextEntityPreCodeProps): JSX.Element {\n    if(dibgramMods.chat_enableSyntaxHighlighting) {\n        // Lazy-load syntax-highlighting.js\n        \n        const SyntaxHighLighting= React.lazy(()=> import('./syntax-highlighting'));\n        return (\n            <React.Suspense fallback={<pre>{children}</pre>}>\n                <Provider store={themeStore}>\n                    <SyntaxHighlight lang={language} SyntaxHighLighting={SyntaxHighLighting}>\n                        {children}\n                    </SyntaxHighlight>\n                </Provider>\n            </React.Suspense>\n        );\n    } else {\n        return <pre>{children}</pre>;\n    }\n}\n\ntype SyntaxHighlightProps= {\n    lang: string;\n    children: string;\n    SyntaxHighLighting: React.ComponentType<{\n        children: string,\n        lang: string,\n        dark: boolean\n    }>\n};\n\nconst SyntaxHighlight= (connect<{dark:boolean}, unknown, SyntaxHighlightProps, ThemeStoreState>(\n    (state: ThemeStoreState)=> ({dark: themes[state.theme].isDark.value=='true'}),\n)(function SyntaxHighlight({lang, children, dark, SyntaxHighLighting}: SyntaxHighlightProps & {dark:boolean}): JSX.Element {\n    return (\n        <SyntaxHighLighting lang={lang} dark={dark}>\n            {children}\n        </SyntaxHighLighting>\n    );\n}) as React.ComponentType<SyntaxHighlightProps>);\n    ","import __, { _s__, __fmt } from '../../language-pack/language-pack';\nimport TdApi from '../../TdWeb/td_api';\nimport compileEntities from './ui/entities';\nimport React from 'react';\n\ntype MessagePinnedMessageProps = {\n    /** The message which was pinned */\n    message: TdApi.message,\n    /** The string representation of the user/chat who pinned the message */\n    from: React.ReactNode|React.ReactNode[],\n}\n\nexport default function MessaagePinnedMessage({message, from}: MessagePinnedMessageProps): JSX.Element {\n    switch (message.content['@type']) {\n        case 'messageAnimation':\n            return <>{__fmt('lng_action_pinned_media', {media: __('lng_action_pinned_media_gif'), from: from})}</>;\n\n        case 'messageAudio':\n            return <>{__fmt('lng_action_pinned_media', {media: __('lng_action_pinned_media_audio'), from: from})}</>;\n\n        case 'messageContact':\n            return <>{__fmt('lng_action_pinned_media', {media: __('lng_action_pinned_media_contact'), from: from})}</>;\n\n        case 'messageAnimatedEmoji':\n        case 'messageDice':\n            return <>{__fmt('lng_action_pinned_message', {text: message.content.emoji, from: from})}</>;\n\n        case 'messageDocument':\n            return <>{__fmt('lng_action_pinned_media', {media: __('lng_action_pinned_media_file'), from: from})}</>;\n\n        case 'messageGame':\n            return <>{__fmt('lng_action_pinned_media', {media: __fmt('lng_action_pinned_media_game', {game: message.content.game.title}), from: from})}</>;\n\n        case 'messagePhoto':\n            return <>{__fmt('lng_action_pinned_media', {media: __('lng_action_pinned_media_photo'), from: from})}</>;\n\n        case 'messagePoll':\n            return <>{__fmt('lng_action_pinned_message', {text: message.content.poll.question, from: from})}</>;\n\n        case 'messageSticker':\n            return <>{__fmt('lng_action_pinned_media', {media: __fmt('lng_action_pinned_media_emoji_sticker', {emoji: message.content.sticker.emoji}), from: from})}</>;\n        \n        case 'messageText': {\n            let text= message.content.text.text;\n            if( text.length > 21 ) {\n                text = `${text.slice(0, 16)}...`;\n            }\n            const ctext= compileEntities({\n                '@type': 'formattedText',\n                entities: message.content.text.entities,\n                text\n            });\n            return <>{__fmt('lng_action_pinned_message', {text: ctext, from})}</>;\n        }\n        case 'messageUnsupported':\n            return <>{__fmt('lng_action_pinned_message', {text: (_s__('lngd_message_unsupported') as string).slice(0, 16)+'...', from: from})}</>;\n\n        case 'messageLocation':\n        case 'messageVenue':\n            return <>{__fmt('lng_action_pinned_media', {media: __('lng_action_pinned_media_location'), from: from})}</>;\n\n        case 'messageVideo':\n            return <>{__fmt('lng_action_pinned_media', {media: __('lng_action_pinned_media_video'), from: from})}</>;\n\n        case 'messageVideoNote':\n            return <>{__fmt('lng_action_pinned_media', {media: __('lng_action_pinned_media_video_message'), from: from})}</>;\n\n        case 'messageVoiceNote':\n            return <>{__fmt('lng_action_pinned_media', {media: __('lng_action_pinned_media_voice'), from: from})}</>;\n\n        default:\n            return <>{__fmt('lng_action_pinned_message', {text: '', from: from})}</>;\n    }\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TdLib from '../../TdWeb/tdlib';\nimport currencyAmountToString from '../sections/payments/currency-tostring';\nimport {getUserFullName} from '../user-misc';\nimport { getChatNoCache } from '../chat-store';\nimport MessagePinnedMessage from './message-pinned-message';\nimport { durationToString, futureDayToString, timeToString } from '../../time-tostring';\nimport __, { _s__, __collection, __fmt, __pl } from '../../language-pack/language-pack';\nimport compileEntities from './ui/entities';\nimport TdApi from '../../TdWeb/td_api';\nimport { UsersStoreState } from '../users-store';\nimport { LanguagePackKey, LanguagePackStringName, LanguagePackStringNamePluralized } from '../../language-pack/language-pack-types';\nimport currencies from '../sections/payments/currencies.json';\n\ntype MessageSummaryWithoutIconProps = {\n    message?: TdApi.message,\n    className: string,\n    users: UsersStoreState,\n    chat: TdApi.chat,\n}\n\n/**\n * Gets a textual representation of the message without a thumbnail.\n * Usage examples: \n * - Last message in chat list\n * - Search results \n * TODO: add possibility to hide sender name (for search results)\n * @returns A span element containing a textual representation of the message. Contains span.part-1 and span.part-2\n */\nexport default function MessageSummaryWithoutIcon({message, className, users, chat}: MessageSummaryWithoutIconProps): JSX.Element|null {\n    if(!message) return null;\n\n    switch(message.content['@type']) {\n        case 'messageAnimation': // GIF\n            return (\n                <MayHaveCaption\n                    type=\"GIF\" //TODO: Find the localized string\n                    caption={message.content.caption} \n                    className={className} \n                    message={message} \n                    chat={chat}\n                    users={users}/>\n            );\n        \n        case 'messageAudio': { // Audio/music file\n            let title= message.content.audio.title || message.content.audio.file_name; // If there is no title, use file name instead\n            if(message.content.audio.performer) // Prepend performer name\n                title= message.content.audio.performer+ ' ­­– ' + title;\n            return (\n                <MayHaveCaption \n                    type={title} \n                    caption={message.content.caption} \n                    className={className} \n                    message={message} \n                    chat={chat}\n                    users={users}/>\n            );\n        }\n\n        case 'messageBasicGroupChatCreate': // X created the group «xxxx»\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{__fmt('lng_action_created_chat', {from: <SenderFullName chat={chat} message={message} users={users}/>, title: message.content.title})}</span>\n                </span>\n            );\n\n        case 'messageCall': { // Call\n            let text: React.ReactNode|React.ReactNode[] ='';\n            if(message.is_outgoing) { // You made the call\n                switch(message.content.discard_reason?.['@type']) {\n                    case 'callDiscardReasonMissed':\n                        text= __(message.content.is_video? 'lng_call_video_cancelled' : 'lng_call_cancelled');\n                        break;\n                    default:\n                        text= __(message.content.is_video? 'lng_call_video_outgoing' : 'lng_call_outgoing');\n                }\n            } else { // The other user called you\n                switch(message.content.discard_reason?.['@type']) {\n                    case 'callDiscardReasonDeclined':\n                        text= __(message.content.is_video? 'lng_call_video_declined' : 'lng_call_declined');\n                        break;\n                    case 'callDiscardReasonMissed':\n                        text= __(message.content.is_video? 'lng_call_video_missed' : 'lng_call_missed');\n                        break;\n                    default: \n                        text= __(message.content.is_video? 'lng_call_video_incoming' : 'lng_call_incoming');\n                }\n            } \n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">{text}</span>\n                </span>\n            );\n        }\n\n        case 'messageChatAddMembers': { // X added Y\n            // If the user joined the group by themselves, it appears as 'X added X' and that is not accurate.\n            if(message.sender_id['@type']=='messageSenderUser' && message.content.member_user_ids[0] == message.sender_id?.user_id) {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\">{__fmt('lng_action_user_joined', {from: <SenderFullName message={message} chat={chat} users={users}/>})}</span>\n                    </span>\n                );\n            }\n\n            const newMembers= __collection(false, message.content.member_user_ids.map(id=> getUserFullName(users[id])), false);\n            \n            return (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt(newMembers.length> 1 ? 'lng_action_add_users_many' : 'lng_action_add_user', {\n                        from: <SenderFullName message={message} chat={chat} users={users}/>,\n                        users: newMembers,\n                        user: newMembers\n                    })}\n                </span></span>\n            );\n        }\n\n        case 'messageChatChangePhoto': // Chat photo changed\n            // Telegram Desktop shows chat photo change events as 'Photo' instead of 'X changed group photo' or 'Channel photo changed'\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{__('lng_attach_photo')}</span> \n                </span>\n            );\n\n        case 'messageChatChangeTitle': // Chat was renamed\n            if(message.is_channel_post) {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\">{__fmt('lng_action_changed_title_channel', {title: message.content.title})}</span>\n                    </span>\n                );\n            } else {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\">{__fmt('lng_action_changed_title', {\n                            from: <SenderFullName message={message} chat={chat} users={users}/>,\n                            title: message.content.title\n                        })}</span>\n                    </span>\n                );\n            }\n\n        case 'messageChatDeleteMember': { // X removed Y\n            const deletedMember= users[message.content.user_id];\n            if( message.sender_id['@type']=='messageSenderUser' && deletedMember.id == message.sender_id.user_id ) { // Left the group\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_user_left', {\n                            from: <SenderFullName message={message} chat={chat} users={users}/>\n                        })}\n                    </span></span>\n                );\n            }\n            return (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt('lng_action_kick_user', {\n                        from: <SenderFullName message={message} chat={chat} users={users}/>,\n                        user: getUserFullName(deletedMember)\n                    })}\n                </span></span>\n            );\n        }\n\n        case 'messageChatDeletePhoto': // Chat photo was deleted\n            if(message.is_channel_post) {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\">{__('lng_action_removed_photo_channel')}</span>\n                    </span>\n                );\n            } else {\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_removed_photo', {\n                            from:  <SenderFullName message={message} chat={chat} users={users}/>\n                        })}\n                    </span></span>\n                );\n            }\n\n        case 'messageChatJoinByLink': // X joined the group via invite link\n            return (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt('lng_action_user_joined_by_link', {\n                        from: <SenderFullName message={message} chat={chat} users={users}/>\n                    })}\n                </span></span>\n            );\n\n        case 'messageChatJoinByRequest': // X was accepted to the group\n            return (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt('lng_action_user_joined_by_request', {\n                        from: <SenderFullName message={message} chat={chat} users={users}/>\n                    })}\n                </span></span>\n            );\n\n        case 'messageChatSetTheme':\n            if(message.content.theme_name){\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        <ServiceMessageIncludingYou \n                            message={message} chat={chat} users={users}\n                            lpString=\"lng_action_theme_changed\"\n                            lpString_you=\"lng_action_you_theme_changed\"\n                            params={{emoji: message.content.theme_name}}/>\n                    </span></span>\n                );\n            } else {\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        <ServiceMessageIncludingYou \n                            message={message} chat={chat} users={users}\n                            lpString=\"lng_action_theme_disabled\"\n                            lpString_you=\"lng_action_you_theme_disabled\"/>\n                    </span></span>\n                );\n            }\n\n        case 'messageChatSetTtl': { // Auto-delete / self-destruct timer changed\n            const ttlTimeUnit= {\n                86400: __('lng_ttl_about_duration1'), \n                604800: __('lng_ttl_about_duration2'),\n                2678400: __('lng_ttl_about_duration3'),\n            }[message.content.ttl];\n\n            if(message.is_channel_post) {\n                if(message.content.ttl) { // If TTL is disabled, it will be set to 0\n                    return (\n                        <span className={className}><span className=\"part-1\">\n                            {__fmt('lng_action_ttl_changed_channel', {\n                                duration: ttlTimeUnit\n                            })}\n                        </span></span>\n                    );\n                } else {\n                    return (\n                        <span className={className}><span className=\"part-1\">\n                            {__('lng_action_ttl_removed_channel')}\n                        </span></span>\n                    );\n                }\n            } else {\n                if(message.content.ttl) { // If TTL is disabled, it will be set to 0\n                    return (\n                        <span className={className}><span className=\"part-1\">\n                            <ServiceMessageIncludingYou \n                                message={message} chat={chat} users={users}\n                                lpString=\"lng_action_ttl_changed\"\n                                lpString_you=\"lng_action_ttl_changed_you\"\n                                params={{duration: ttlTimeUnit}}/>\n                        </span></span>\n                    );\n                } else {\n                    return (\n                        <span className={className}><span className=\"part-1\">\n                            <ServiceMessageIncludingYou \n                                message={message} chat={chat} users={users}\n                                lpString=\"lng_action_ttl_removed\"\n                                lpString_you=\"lng_action_ttl_removed_you\"/>\n                        </span></span>\n                    );\n                }\n            }\n        }\n\n        case 'messageChatUpgradeFrom': // It is too complicated to get basic group last message.\n        case 'messageChatUpgradeTo': // TODO: It's complicated, but it should be done.\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{_s__('lngd_action_upgrade_to_supergroup')}</span>\n                </span>\n            );\n\n        case 'messageContact': // Shared contact\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">{__('lng_in_dlg_contact')}</span>\n                </span>\n            );\n\n        case 'messageContactRegistered': // X joined Telegram\n            return (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt('lng_action_user_registered', {\n                        from: <SenderFullName message={message} chat={chat} users={users}/>\n                    })}\n                </span></span>\n            );\n\n        case 'messageCustomServiceAction': // ¯\\_(ツ)_/¯\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{message.content.text}</span>\n                </span>\n            );\n\n        case 'messageAnimatedEmoji':\n        case 'messageDice': // Dice (🎲🎯🎳⚽🏀)\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">{message.content.emoji}</span>\n                </span>\n            );\n\n        case 'messageDocument': // File/document\n            return (\n                <MayHaveCaptionThumbnail\n                    type={message.content.document.file_name} \n                    caption={message.content.caption} \n                    className={className} \n                    message={message} \n                    chat={chat}\n                    users={users}\n                    thumbnails={[message.content?.document?.minithumbnail?.data]}/>\n            );\n        \n        case 'messageExpiredPhoto': \n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{__('lng_ttl_photo_expired')}</span>\n                </span>\n            );\n        \n        case 'messageExpiredVideo':\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{__('lng_ttl_video_expired')}</span>\n                </span>\n            );\n        \n        case 'messageGame': // Game\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">🎮 {message.content.game.title}</span>\n                </span>\n            );\n\n        case 'messageGameScore': { // X scored {score} in {game}\n            // Text to use if game message is not available\n            const noGameTitleFallback= (\n                <span className={className}><span className=\"part-1\">\n                    <ServiceMessageIncludingYou \n                        message={message} chat={chat} users={users}\n                        lpString=\"lng_action_game_score_no_game\"\n                        lpString_you=\"lng_action_game_you_scored_no_game\"\n                        count={message.content.score}/>\n                </span></span>\n            );\n\n            // Get game message\n            const GameScoreWithTitle= React.lazy(()=> new Promise<{default: React.ComponentType}>(resolve=> {\n                message.content = message.content as TdApi.messageGameScore;\n                TdLib.sendQuery({\n                    '@type': 'getMessage',\n                    chat_id: chat.id,\n                    message_id: message.content.game_message_id\n                }).then(\n                    result=> { \n                        //eslint-disable-next-line react/display-name\n                        resolve({ default: ()=> {\n                            message.content = message.content as TdApi.messageGameScore;\n                            result = result as TdApi.message;\n                            result.content = result.content as TdApi.messageGame;\n\n                            return (\n                                <span className={className}><span className=\"part-1\">\n                                    <ServiceMessageIncludingYou \n                                        message={message} chat={chat} users={users}\n                                        lpString=\"lng_action_game_score\"\n                                        lpString_you=\"lng_action_game_you_scored\"\n                                        count={message.content.score}\n                                        params={{game: result.content.game.title}}/>\n                                </span></span>\n                            );\n                        }});\n                    },\n                    ()=> { // Failed\n                        //eslint-disable-next-line react/display-name\n                        resolve({ default: ()=> noGameTitleFallback});\n                    }\n                );\n            }));\n\n            return (\n                <React.Suspense fallback={noGameTitleFallback}>\n                    <GameScoreWithTitle/>\n                </React.Suspense>\n            );\n        }\n\n        case 'messageInvoice': // Invoice (a buyable product)\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">{message.content.title}</span>\n                </span>\n            );\n\n        case 'messageLocation': // Location\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">{__('lng_maps_point')}</span>\n                </span>\n            );\n\n        case 'messagePassportDataSent': { // You sent some Telegram passport data\n            const passportDataTypeToString= {\n                'passportElementTypeAddress':               'lng_passport_address',\n                'passportElementTypeBankStatement':         'lng_passport_address_statement',\n                'passportElementTypeDriverLicense':         'lng_passport_identity_license',\n                'passportElementTypeEmailAddress':          'lng_passport_email_title',\n                'passportElementTypeIdentityCard':          'lng_passport_identity_card',\n                'passportElementTypeInternalPassport':      'lng_passport_identity_internal',\n                'passportElementTypePassport':              'lng_passport_identity_passport',\n                'passportElementTypePassportRegistration':  'lng_passport_address_registration',\n                'passportElementTypePersonalDetails':       'lng_passport_personal_details',\n                'passportElementTypePhoneNumber':           'lng_passport_phone_title',\n                'passportElementTypeRentalAgreement':       'lng_passport_address_agreement',\n                'passportElementTypeTemporaryRegistration': 'lng_passport_address_temporary',\n                'passportElementTypeUtilityBill':           'lng_passport_address_bill',\n            };\n            const passportDataTypes= message.content.types.map(type=> (__(passportDataTypeToString[type['@type']] as LanguagePackKey) as string).toLowerCase());\n            return (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt('lng_action_secure_values_sent', {\n                        user: chat.title,\n                        documents: passportDataTypes.join(', ')\n                    })}\n                </span></span>\n            );\n        }\n\n        case 'messagePaymentSuccessful': { // You paid [real] money\n            // To be shown if invoice is not available\n            const noInvoiceTitleFallback= (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt('lng_action_payment_done', {\n                        amount: currencyAmountToString(message.content.currency as keyof typeof currencies, message.content.total_amount),\n                        user: chat.title\n                    })}\n                </span></span>\n            );\n\n            // Get invoice message\n            const PaymentInfoWithInvoiceTitle= React.lazy(()=>new Promise<{default:React.ComponentType}>(resolve=> {\n                message.content= message.content as TdApi.messagePaymentSuccessful;\n                TdLib.sendQuery({\n                    '@type': 'getMessage',\n                    chat_id: message.content.invoice_chat_id,\n                    message_id: message.content.invoice_message_id\n                }).then(\n                    result=> { \n                        //eslint-disable-next-line react/display-name\n                        resolve({ default: ()=> {\n                            message.content= message.content as TdApi.messagePaymentSuccessful;\n                            result= result as TdApi.message;\n                            result.content= result.content as TdApi.messageInvoice;\n                            return (\n                                <span className={className}><span className=\"part-1\">\n                                    {__fmt('lng_action_payment_done_for', {\n                                        amount: currencyAmountToString(message.content.currency as keyof typeof currencies, message.content.total_amount),\n                                        user: chat.title,\n                                        invoice: result.content.title\n                                    })}\n                                </span></span>\n                            );\n                        }});\n                    },\n                    ()=> { // Failed\n                        resolve({ default: ()=> noInvoiceTitleFallback});\n                    }\n                );\n            }));\n\n            return (\n                <React.Suspense fallback={noInvoiceTitleFallback}>\n                    <PaymentInfoWithInvoiceTitle/>\n                </React.Suspense>\n            );\n        }\n\n        case 'messagePhoto': // A photo\n            if(message.content.is_secret) { // Self-destructing photo, not implemented\n                if(message.is_outgoing) { // You sent it\n                    return (\n                        <span className={className}>\n                            <span className=\"part-1\">{__('lng_ttl_photo_sent')}</span>\n                        </span>\n                    );\n                } else { // You received it\n                    return (\n                        <span className={className}><span className=\"part-1\">\n                            {__fmt('lng_ttl_photo_received', {\n                                from: <SenderFullName message={message} chat={chat} users={users}/>\n                            })}\n                        </span></span>\n                    );\n                }\n            } else { // Normal photo\n                return (\n                    <MayHaveCaptionThumbnail \n                        type={__('lng_in_dlg_photo') as string}\n                        caption={message.content.caption} \n                        className={className} \n                        message={message} \n                        chat={chat}\n                        users={users}\n                        thumbnails={[message.content?.photo?.minithumbnail?.data]}/>\n                );\n            }\n        \n        case 'messagePinMessage': { // Pinned message\n\n            // Get pinned message message\n            const PinnedMessageMessage= React.lazy(()=>new Promise<{default:React.ComponentType}>(resolve=> {\n                message.content= message.content as TdApi.messagePinMessage;\n                TdLib.sendQuery({\n                    '@type': 'getMessage',\n                    chat_id: chat.id,\n                    message_id: message.content.message_id\n                }).then(\n                    result=> { \n                        //eslint-disable-next-line react/display-name\n                        resolve({ default: ()=> {\n                            message.content= message.content as TdApi.messagePinMessage;\n                            result= result as TdApi.message;\n                            return (\n                                <span className={className}><span className=\"part-1\">\n                                    <MessagePinnedMessage message={result} from={<SenderFullName message={message} chat={chat} users={users}/>}/>\n                                </span></span>\n                            );\n                        }});\n                    },\n                    ()=> { // Failed\n                        //eslint-disable-next-line react/display-name\n                        resolve({ default: ()=> (\n                            <span className={className}><span className=\"part-1\">\n                                {__fmt('lng_action_pinned_media', {\n                                    from: <SenderFullName message={message} chat={chat} users={users}/>,\n                                    media: __('lng_deleted_message')\n                                })}\n                            </span></span>\n                        )});\n                    }\n                );\n            }));\n\n            return (\n                <React.Suspense fallback={\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_pinned_media', {\n                            from: <SenderFullName message={message} chat={chat} users={users}/>,\n                            media: __('lng_contacts_loading')\n                        })}\n                    </span></span>\n                }>\n                    <PinnedMessageMessage/>\n                </React.Suspense>\n            );\n        }\n        \n        case 'messagePoll':\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{message.content.poll.question}</span>\n                </span>\n            );\n        \n        // case 'messageProximityAlertTriggered': // TODO: Reproduce this message and implement it\n        // case 'messageScreenshotTaken':\n        case 'messageSticker': // Sticker\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">\n                        {__fmt('lng_in_dlg_sticker_emoji', {\n                            emoji: message.content.sticker.emoji\n                        })}\n                    </span>\n                </span>\n            );\n\n        case 'messageSupergroupChatCreate': // Supergroup created\n            if(message.is_channel_post) {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\">{__('lng_action_created_channel')}</span>\n                    </span>\n                );\n            } else {\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_created_chat', {\n                            from: <SenderFullName message={message} chat={chat} users={users}/>,\n                            title: message.content.title\n                        })}\n                    </span></span>\n                );\n            }\n\n        case 'messageText':\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-2\">{compileEntities(message.content.text, true)}</span>\n                </span>\n            );\n\n        case 'messageUnsupported': // Is not supported :(\n            return ( //TODO localize\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-2\">{_s__('lngd_message_unsupported')}</span>\n                </span>\n            );\n        \n        case 'messageVenue': // Venue/location\n            return ( //TODO find the translation string\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">Location, </span>\n                    <span className=\"part-2\">{message.content.venue.title}</span>\n                </span>\n            );\n\n        case 'messageVideo': // Video\n            if(message.content.is_secret) { // Self-destructing photo, not implemented\n                if(message.is_outgoing) { // You sent it\n                    return (\n                        <span className={className}>\n                            <span className=\"part-1\">{__('lng_ttl_video_sent')}</span>\n                        </span>\n                    );\n                } else { // You received it\n                    return (\n                        <span className={className}><span className=\"part-1\">\n                            {__fmt('lng_ttl_video_received', {\n                                from: <SenderFullName message={message} chat={chat} users={users}/>\n                            })}\n                        </span></span>\n                    );\n                }\n            } else { // Normal photo\n                return (\n                    <MayHaveCaptionThumbnail\n                        type={__('lng_in_dlg_video') as string}\n                        caption={message.content.caption} \n                        className={className} \n                        message={message} \n                        chat={chat}\n                        users={users}\n                        isVideo={true}\n                        thumbnails={[message.content?.video?.minithumbnail?.data]}/>\n                );\n            }\n\n        case 'messageVideoNote':\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">{__('lng_in_dlg_video_message')}</span>\n                </span>\n            );\n\n        case 'messageVideoChatScheduled':\n            if(message.is_channel_post) {\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_group_call_scheduled_channel', {\n                            date: __fmt('lng_mediaview_date_time', {\n                                date: futureDayToString(message.content.start_date),\n                                time: timeToString(message.content.start_date)\n                            })\n                        })}\n                    </span></span>\n                );\n            } else {\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_group_call_scheduled_group', {\n                            from: <SenderFullName message={message} chat={chat} users={users}/>,\n                            date: __fmt('lng_mediaview_date_time', {\n                                date: futureDayToString(message.content.start_date),\n                                time: timeToString(message.content.start_date)\n                            })\n                        })}\n                    </span></span>\n                );\n            }\n\n        case 'messageVideoChatStarted':\n            if(message.is_channel_post) {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\">{__('lng_action_group_call_started_channel')}</span>\n                    </span>\n                );\n            } else {\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_group_call_started_group', {\n                            from: <SenderFullName message={message} chat={chat} users={users}/>\n                        })}\n                    </span></span>\n                );\n            }\n\n        case 'messageVideoChatEnded':\n            if(message.is_channel_post) {\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_group_call_finished', {\n                            duration: durationToString(message.content.duration)\n                        })}\n                    </span></span>\n                );\n            } else {\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_group_call_finished_group', {\n                            from: <SenderFullName message={message} chat={chat} users={users}/>,\n                            duration: durationToString(message.content.duration)\n                        })}\n                    </span></span>\n                );\n            }\n\n        case 'messageInviteVideoChatParticipants': {\n            const invitedMembers= __collection(true, message.content.user_ids.map(id=> // convert user IDs to names\n                getUserFullName(users[id])), false); // A, B, and C\n            return (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt((invitedMembers.length==1 ? 'lng_action_invite_user' : 'lng_action_invite_users_many'), {\n                        from: <SenderFullName message={message} chat={chat} users={users}/>,\n                        user: invitedMembers,\n                        users: invitedMembers,\n                        chat: __('lng_action_invite_user_chat')\n                    })}\n                </span></span>\n            );\n        }\n\n        case 'messageVoiceNote':\n            return (\n                <MayHaveCaption \n                    type={__('lng_in_dlg_audio') as string}\n                    caption={message.content.caption} \n                    className={className} \n                    message={message} \n                    chat={chat}\n                    users={users}/>\n            );\n\n        case 'messageWebsiteConnected':\n            return (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt('lng_action_bot_allowed_from_domain', {\n                        domain: message.content.domain_name\n                    })}\n                </span></span>\n            );\n\n        default:\n            return null;\n    }\n}\n\ntype MayHaveCaptionProps= {\n    /** Message type, e.g. 'GIF', 'Video' */\n    type: string,\n    /** Message caption, can be empty */\n    caption: TdApi.formattedText,\n\n    className: string,\n    /** Message object */\n    message: TdApi.message,\n    /** The chat in which the message was sent */\n    chat: TdApi.chat,\n    /** A dictionary of all users */\n    users: UsersStoreState,\n}\n\n/** If caption has a value, adds a comma to type and returns type */ \nfunction MayHaveCaption({type, caption, className, message, chat, users}: MayHaveCaptionProps): JSX.Element {\n    if(caption?.text) type+=',';\n    return (\n        <span className={className}>\n            <MessageSummarySender message={message} chat={chat} users={users}/>\n            <span className=\"part-1\">{type}</span> <span className=\"part-2\">{compileEntities(caption, true)}</span>\n        </span>\n    );\n}\n\ntype MayHaveCaptionThumbnailsProps= {\n    /** An array of one or more base64-encoded image data */\n    thumbnails?: (string|undefined)[],\n    /** If true, a tiny play icon will be shown on the image */\n    isVideo?: boolean,\n    /** Message type, e.g. 'GIF', 'Video' */\n    type: string,\n    /** Message caption, can be empty */\n    caption: TdApi.formattedText,\n\n    className: string,\n    /** Message object */\n    message: TdApi.message,\n    /** The chat in which the message was sent */\n    chat: TdApi.chat,\n    /** A dictionary of all users */\n    users: UsersStoreState,\n}\n\n/** If caption has a value, adds a comma to type and returns type */ \nfunction MayHaveCaptionThumbnail({thumbnails, isVideo, type, caption, className, message, chat, users}: MayHaveCaptionThumbnailsProps): JSX.Element {\n    if(!thumbnails?.length) return <MayHaveCaption type={type} caption={caption} className={className} message={message} chat={chat} users={users}/>;\n    return (\n        <span className={className}>\n            <MessageSummarySender message={message} chat={chat} users={users}/>\n            {thumbnails.map((data, i) => data && <span className={'thumbnail'+ (isVideo? ' video': '')} key={i}><img src={'data:image/jpeg;base64,'+data}/></span>)} \n            {caption?.text? \n                <span className=\"part-2\">{compileEntities(caption, true)}</span>\n                :<span className=\"part-1\">{type}</span> \n            }\n        </span>\n    );\n}\n\ntype SenderFullNameProps= {\n    message: TdApi.message,\n    chat: TdApi.chat,\n    users: UsersStoreState,\n    includeYou?: boolean,\n}\n\n/** Sender's first name + last name */\nexport function SenderFullName({message, chat, users, includeYou}: SenderFullNameProps): JSX.Element {\n    if(includeYou) { // Use 'You' if the message is outgoing?\n        return message.is_outgoing ? <>{__('lng_from_you')}</> : <SenderFullName message={message} chat={chat} users={users}/>;\n    }\n    const sender=message.sender_id;\n    if(sender['@type']=='messageSenderUser') {\n        const user=users[sender.user_id];\n        return <>{getUserFullName(user)}</>; \n    } else if(sender['@type']=='messageSenderChat') { // Anonymous admin\n        return <>{chat.title}</>;\n    } else {\n        throw new Error('sender was neither user nor chat');\n    }\n}\n\ntype ServiceMessageIncludingYouProps= {\n    /** The message object */\n    message: TdApi.message,\n    /** The chat in which the message was sent */\n    chat: TdApi.chat,\n    /** A dictionary of all users */\n    users: UsersStoreState,\n    /** Language pack string key for the service message */\n    lpString: LanguagePackStringName,\n    /** Language pack string key for the service message if the service message is outgoing */\n    lpString_you: LanguagePackStringName,\n    /** Parameters for the language pack string */\n    params?: {[key: string]: React.ReactNode|React.ReactNode[]},\n    /** If provided, the language pack strings will be treated as pluralized */\n    count?: number,\n}\n\n/**\n * Formats a service message which 'from' can be 'You' or a user's full name\n */\nexport function ServiceMessageIncludingYou({message, chat, users, lpString, lpString_you, params={}, count=undefined}: ServiceMessageIncludingYouProps): JSX.Element {\n    let string= lpString_you;\n    let sender;\n    if(!message.is_outgoing){\n        string= lpString;\n\n        if(message.sender_id['@type']=='messageSenderUser') {\n            const user=users[message.sender_id.user_id];\n            sender= getUserFullName(user); \n        } else if(message.sender_id['@type']=='messageSenderChat') { // Anonymous admin\n            sender= chat.title;\n        }\n    }\n\n    if(count==undefined) {\n        return <>{__fmt(string as Exclude<LanguagePackStringName, LanguagePackStringNamePluralized>, {\n            from: sender,\n            ...params\n        })}</>;\n    } else {\n        return <>{__pl(string, count, {\n            from: sender,\n            ...params\n        })}</>;\n    }\n}\n\ntype MessageSummarySenderProps= {\n    /** Message to check the sender */\n    message: TdApi.message,\n    /** Chat in which the message was sent */\n    chat: TdApi.chat,\n    /** A dictionary of all users */\n    users: UsersStoreState,\n}\n\n/** Short sender names in the beginning of message previews */\nexport function MessageSummarySender({message, chat, users}: MessageSummarySenderProps): JSX.Element|null {\n    if(!message) return null;\n\n    let part1;\n    if(chat && (!message.is_channel_post)) { // Channel posts dont have sender names\n        if(message.is_outgoing) {\n            part1= __('lng_from_you');\n        } else if(['chatTypeBasicGroup', 'chatTypeSupergroup'].includes(chat.type['@type'])) { // Message is sent in a group\n            if(message.sender_id['@type']=='messageSenderUser') {\n                part1= users[message.sender_id.user_id].first_name;\n            }\n        }\n        if(message.sender_id['@type']=='messageSenderChat') {\n            part1= getChatNoCache(message.sender_id.chat_id)?.title;\n        }\n    }\n    return part1? <span className=\"sender\">{__fmt('lng_dialogs_text_from_wrapped', {from: part1})} </span> : null;\n}","import raw from 'raw.macro';\n\nexport const menu_add_account = raw('./add_account.svg');\nexport const menu_archive = raw('./archive.svg');\nexport const menu_collapse = raw('./collapse.svg');\nexport const menu_expand = raw('./expand.svg');\nexport const menu_info = raw('./info.svg');\nexport const menu_leave = raw('./leave.svg');\nexport const menu_move_from_menu = raw('./move_from_menu.svg');\nexport const menu_move_to_menu = raw('./move_to_menu.svg');\nexport const menu_pin = raw('./pin.svg');\nexport const menu_report = raw('./report.svg');\nexport const menu_unarchive = raw('./unarchive.svg');\nexport const menu_unpin = raw('./unpin.svg');","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport TdLib from '../../../TdWeb/tdlib';\nimport RippleEffect, { handleMyMouseEvents, RippleEffectProps_AutoSettable } from '../../../ui/elements/ripple-effect';\nimport { dialogs_bot, dialogs_channel, dialogs_chat, dialogs_pinned, dialogs_received, dialogs_sending, dialogs_sent, dialogs_verified_check, dialogs_verified_star } from '../../../ui/icon/icons';\nimport { isChatVerified, isChatWithDeletedAccount } from '../../chat-misc';\nimport options from '../../../TdWeb/options';\nimport { getMessageStatus } from '../../message-misc';\nimport __, { __pl } from '../../../language-pack/language-pack';\nimport { createContextMenu } from '../../../ui/menu/context-menu';\nimport ProfilePhoto, { getChatTypeId } from '../../../ui/components/profile-photo';\nimport { smallDateTimeToString } from '../../../time-tostring';\nimport MessageSummaryWithoutIcon from '../../message/message-summary-noicon';\nimport Menu from '../../../ui/menu/menu';\nimport Toast, { addToast } from '../../../ui/dialog/toast';\nimport { addDialog } from '../../../ui/dialog/dialogs';\nimport ConfirmDialog from '../../../ui/dialog/confirm-dialog';\nimport chatStore from '../../chat-store';\nimport { ChatWPosition } from './chat-list';\nimport { UsersStoreState } from '../../users-store';\nimport TdApi from '../../../TdWeb/td_api';\nimport { menu_archive, menu_pin, menu_unarchive, menu_unpin } from '../../../ui/icon/menu/menu';\n\ntype ChatListItemSelfProps = {\n    /** The chat (TdApi.td_chat) */\n    chat: ChatWPosition;\n    /** A boolean value which should be `true` if the chat is currently open */\n    selected: boolean;\n}\n\ntype ChatListItemStoreProps = {\n    users: UsersStoreState;\n}\n\ntype ChatListItemProps = ChatListItemSelfProps & ChatListItemStoreProps;\n\ntype ChatListItemState = {\n    ripple: RippleEffectProps_AutoSettable\n}\n\n/**\n * Renders a single chat\n */\nclass ChatListItem extends React.Component<ChatListItemProps, ChatListItemState> {\n    constructor(props: ChatListItemProps | Readonly<ChatListItemProps>) {\n        super(props);\n        [this.mouseDown, this.mouseUp, this.mouseLeave]= handleMyMouseEvents(this);\n    }\n    state= {\n        ripple: {\n            state: 'off'\n        }\n    } as const;\n    \n    mouseDown: (e: React.MouseEvent<HTMLDivElement>) => void;\n    mouseUp: (e: React.MouseEvent<HTMLDivElement>) => void;\n    mouseLeave: (e: React.MouseEvent<HTMLDivElement>) => void;\n\n    shouldComponentUpdate(nextProps: ChatListItemProps, nextState: ChatListItemState): boolean {\n        function getUser(props: ChatListItemProps): TdApi.user|null { // Gets the user which is the other party of the chat. Used to see if the needed user has changed\n            if(props.chat.type['@type']=='chatTypePrivate') {\n                return props.users[props.chat.type.user_id];\n            }\n            return null;\n        }\n        return nextProps.chat.id !== this.props.chat.id\n            || nextProps.chat.last_message !== this.props.chat.last_message\n            || nextProps.chat.draft_message !== this.props.chat.draft_message\n            || nextProps.chat.unread_count !== this.props.chat.unread_count\n            || nextProps.chat.unread_mention_count !== this.props.chat.unread_mention_count\n            || nextProps.chat.is_marked_as_unread !== this.props.chat.is_marked_as_unread\n            || nextProps.chat.position.is_pinned !== this.props.chat.position.is_pinned\n            || nextProps.chat.photo?.small?.id !== this.props.chat.photo?.small?.id\n            || nextProps.chat.title !== this.props.chat.title\n            || nextProps.chat.last_read_outbox_message_id !== this.props.chat.last_read_outbox_message_id\n            || nextProps.selected !== this.props.selected\n            || nextState.ripple !== this.state.ripple\n            || getUser(nextProps) !== getUser(this.props);\n    }\n    openChat = () => {\n        chatStore.dispatch({\n            type: 'SELECT_CHAT',\n            chat_id: this.props.chat.id\n        });\n    }\n    render(): JSX.Element {\n        const chat= {...this.props.chat}; // Clone chat object to avoid mutating it. Mutating it causes Saved messages and Deleted account chats to get past shouldComponentUpdate.\n        let chatType= '';\n        if (chat.type?.['@type'] == 'chatTypeBasicGroup' ||      // Groups are basic groups and non-channel supergroups\n                (chat.type?.['@type'] == 'chatTypeSupergroup' &&\n                chat.type?.is_channel == false)\n        ){\n            chatType= dialogs_chat;\n        } \n        else if (chat.type?.['@type'] == 'chatTypeSupergroup' && // Channels are supergroups with is_channel set to true\n                chat.type?.is_channel == true){\n            chatType= dialogs_channel;\n        } \n        else if ((chat.type?.['@type'] == 'chatTypePrivate') &&  // Bots are private chats with bot user type\n                (this.props.users[chat.type?.user_id]?.type?.['@type'] == 'userTypeBot')){\n            chatType= dialogs_bot;\n        }\n        if (chat.id==options['replies_bot_chat_id']) { // Replies bot does not have a type icon\n            chatType= '';\n        }\n\n        if(isChatWithDeletedAccount(chat, this.props.users)) {\n            chat.title= __('lng_deleted') as string; // Chat object is a copy, so there is no problem with mutating it.\n        }\n\n        const isVerified= isChatVerified(chat);\n\n        if (chat.id==options['my_id']) {\n            chat.title= __('lng_saved_messages') as string;\n        }\n\n        let messageStatus = null;\n        switch(getMessageStatus(chat, chat.last_message)) { // Is the message sending, sent or seen?\n            case 'sending': \n                messageStatus = <span className=\"message-status-icon sending\" dangerouslySetInnerHTML={{__html: dialogs_sending}}/>;\n                break;\n            case 'sent': \n                messageStatus = <span className=\"message-status-icon sent\" dangerouslySetInnerHTML={{__html: dialogs_sent}}/>;\n                break;\n            case 'seen': \n                messageStatus = <span className=\"message-status-icon seen\" dangerouslySetInnerHTML={{__html: dialogs_received}}/>;\n                break;\n        }\n\n        let unreadBadge = null;\n        const unreadBadgeClass= (chat.notification_settings.mute_for||chat.notification_settings.use_default_mute_for) ? 'unread-badge muted' : 'unread-badge';\n        // Show the mention badge alone if there is exactly one mention and no other unread messages\n        if (chat.unread_mention_count == 1 && chat.unread_count == chat.unread_mention_count) {\n            unreadBadge = <span className=\"unread-badge mention\">@</span>;\n        } \n        // Show the mention badge with unread badge together if there are more than one unread messages and there are mentions\n        else if (chat.unread_mention_count > 0 && chat.unread_count > 1 ) {\n            unreadBadge = <React.Fragment>\n                <span className=\"unread-badge mention\">@</span>\n                <span className={unreadBadgeClass}>{chat.unread_count}</span>\n            </React.Fragment>;\n        }\n        // Show the unread badge alone if there are no mentions and there are unread messages\n        else if (chat.unread_count > 0 && chat.unread_mention_count == 0) {\n            unreadBadge = <span className={unreadBadgeClass}>{chat.unread_count}</span>;\n        }\n        // Show an empty badge if chat is manually marked as unread\n        else if (chat.is_marked_as_unread) {\n            unreadBadge = <span className={unreadBadgeClass}></span>;\n        }\n\n        let isOnline= false; // User online status\n        if((chat.type['@type']== 'chatTypePrivate') && // Only private chats (except saved messages and service notifications)\n            (chat.id!=options['my_id']) && (chat.id!=options['telegram_service_notifications_chat_id']) ){ \n            const user= this.props.users[chat.type.user_id];\n            if(user) {\n                isOnline= user.type['@type'] == 'userTypeRegular' && user.status['@type'] == 'userStatusOnline'; // Shouldn't be a bot\n            }\n        }\n\n        return(\n            <div className={'chat' + (this.props.selected? ' active' : '')} onClick={this.openChat}\n                onContextMenu={e=> createContextMenu(e, <ChatContextMenu chat={chat}/>)}\n                onMouseDown={this.mouseDown} onMouseUp={this.mouseUp} onMouseLeave={this.mouseLeave}>\n                \n                <RippleEffect {...this.state.ripple} color=\"var(--theme-color-dialogsRippleBg)\"/>\n                <div className=\"content\" data-online={isOnline ? 'true' : 'false'}>\n                    <ProfilePhoto name={chat.title} photo={chat.photo?.small} id={getChatTypeId(chat)}/>\n                    <div className=\"details\">\n                        <div className=\"top\">\n                            <div className=\"left\">\n                                <div className=\"type-icon\" dangerouslySetInnerHTML={{__html: chatType}}></div>\n                                <div className=\"title\">{chat.title}</div>\n                                {isVerified && <span className=\"verified-icon\">\n                                    <span className=\"verified-icon-star\" dangerouslySetInnerHTML={{__html: dialogs_verified_star}}></span>\n                                    <span className=\"verified-icon-check\" dangerouslySetInnerHTML={{__html: dialogs_verified_check}}></span>\n                                </span>}\n                            </div>\n                            <div className=\"right\">\n                                {messageStatus}\n                                {chat.last_message?.date && <span className=\"date\">{smallDateTimeToString(chat.last_message.date)}</span>}\n                            </div>\n                        </div>\n                        <div className=\"bottom\">\n                            <div className=\"left\">\n                                {(chat.draft_message && !unreadBadge) ?  // I don't know why, but Telegram Desktop does not show the draft message if the chat is unread.\n                                    <span className=\"last-message\">\n                                        <span className=\"draft\">{__('lng_from_draft')}:</span> <span className=\"part-2\">{(chat.draft_message.input_message_text as TdApi.inputMessageText).text.text}</span>\n                                    </span> \n                                    :\n                                    <MessageSummaryWithoutIcon message={chat.last_message} users={this.props.users} chat={chat} className=\"last-message\"/>\n                                }\n                            </div>\n                            <div className=\"right\">\n                                {unreadBadge || ( // Unread badge overrides pinned icon\n                                    chat.position?.is_pinned && <span className=\"pinned_icon\" dangerouslySetInnerHTML={{__html: dialogs_pinned}}></span>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\nexport const Chat = (connect<ChatListItemStoreProps, unknown, ChatListItemSelfProps, UsersStoreState>(state=> ({users: state}))(ChatListItem)) as unknown as React.ComponentType<ChatListItemSelfProps>;\n\ntype ChatContextMenuProps = {\n    chat: ChatWPosition\n}\n\n/** Renders the context menu of a chat */\nfunction ChatContextMenu({chat}: ChatContextMenuProps): JSX.Element {\n    const [movableChatLists, setMovableChatLists] = React.useState<React.ReactNode>([]);\n\n    // Archive/unarchive chats\n    React.useEffect(() => {\n        TdLib.sendQuery({ // Only TDLib can know what lists we can add the chat to\n            '@type': 'getChatListsToAddChat',\n            chat_id: chat.id\n        }).then((result: TdApi.chatLists | TdApi.error) => {\n            result= result as TdApi.chatLists;\n            setMovableChatLists(result.chat_lists.map(chatList=> {\n                const text= { // Only archive / unarchive\n                    'chatListMain': __('lng_archived_remove'), \n                    'chatListArchive': __('lng_archived_add'),\n                    'chatListFilter': undefined\n                }[chatList['@type']];\n                if(!text) return;\n                const icon= { // Only archive / unarchive\n                    'chatListMain': menu_unarchive, \n                    'chatListArchive': menu_archive,\n                    'chatListFilter': undefined\n                }[chatList['@type']];\n                return (\n                    <Menu.MenuItem key={'chat_filter_id' in chatList ? chatList.chat_filter_id : chatList['@type']} onClick={() => {\n                        TdLib.sendQuery({\n                            '@type': 'addChatToList',\n                            chat_id: chat.id,\n                            chat_list: chatList\n                        }).then(() => {\n                            if(chatList['@type'] == 'chatListMain') {\n                                addToast(<Toast>{__('lng_archived_removed')}</Toast>);\n                            } \n                            else if(chatList['@type'] == 'chatListArchive') {\n                                addToast(<Toast>{__('lng_archived_added')}</Toast>);\n                            }\n                        });\n                    }} icon={icon}>\n                        {text}\n                    </Menu.MenuItem>\n                );\n            }));\n        });\n    }, []);\n\n    return (\n        <Menu.MenuContents>\n            {movableChatLists /* Archive/unarchive */}\n            <Menu.MenuItem onClick={()=> { // Pin/unpin\n                TdLib.sendQuery({\n                    '@type': 'toggleChatIsPinned',\n                    chat_list: chat.position.list,\n                    chat_id: chat.id,\n                    is_pinned: !chat.position.is_pinned\n                }).catch(error=> {\n                    // Maximum pinned messages\n                    if(error.code == 400) {\n                        const max= (chat.position.list['@type'] == 'chatListMain'? options['pinned_chat_count_max'] : options['pinned_archived_chat_count_max']) as number;\n                        addDialog('maximum-pinned-chats-reached', (\n                            <ConfirmDialog id=\"maximum-pinned-chats-reached\" largeFont={true} hideCancelButton={true}>\n                                {__pl('lng_error_pinned_max', max)}\n                            </ConfirmDialog>\n                        ));\n                    }\n                });\n            }} icon={chat.position.is_pinned? menu_unpin : menu_pin}>\n                {chat.position.is_pinned? __('lng_context_unpin_from_top') : __('lng_context_pin_to_top')}\n            </Menu.MenuItem>\n        </Menu.MenuContents>\n    );\n}\nChatContextMenu.propTypes = {\n    chat: PropTypes.object.isRequired\n};","import React from 'react';\nimport { connect, Provider } from 'react-redux';\nimport TdLib from '../../../TdWeb/tdlib';\nimport chatStore, { ChatListUnreadData, ChatStoreState, ChatStoreUnreadData, compareChatList } from '../../chat-store';\nimport './chat-list.scss';\nimport { archive_userpic, history_to_down } from '../../../ui/icon/icons';\nimport usersStore from '../../users-store';\nimport ScrollView from '../../../ui/scroll/scrollbar';\nimport LinkButton from '../../../ui/elements/link-button';\nimport { chatTitleOrDeletedAccount } from '../../chat-misc';\nimport RippleEffect, { handleMyMouseEventsFunction, RippleEffectProps_AutoSettable } from '../../../ui/elements/ripple-effect';\nimport { createContextMenu } from '../../../ui/menu/context-menu';\nimport Menu from '../../../ui/menu/menu';\nimport Toast, { addToast } from '../../../ui/dialog/toast';\nimport IconButton from '../../../ui/elements/icon-button';\nimport { chatListScrollToTopEvent } from './chat-folders';\nimport __ from '../../../language-pack/language-pack';\nimport { Chat } from './chat-list-item';\nimport TdApi from '../../../TdWeb/td_api';\nimport { ConnectionStoreState } from '../../../TdWeb/connectionStore';\nimport Scrollbars from 'react-custom-scrollbars-2';\nimport { menu_collapse, menu_expand, menu_move_to_menu } from '../../../ui/icon/menu/menu';\n\nexport type ChatWPosition = TdApi.chat & {position: TdApi.chatPosition};\n\n/**\n * Returns a sorted list of all chats in the given chat list\n * \n * Also for every chat, sets `chat.position` to the matching position (creates copy instead of modifying original object)\n * @param chats\n * @param list\n */\nexport function getChatsFromList(chats: TdApi.chat[], list: TdApi.ChatList): ChatWPosition[] {\n    return ((chats.map<any>((chat: TdApi.chat): (TdApi.chat|ChatWPosition|false) => { // Step 1 - get the chat positions which refer to the current list\n        for( const position of chat.positions ) {\n            if (compareChatList(list, position.list)) {\n                if( position.order=='0' ) return false; // Replace a chat without a suitable position with `false`\n                return {\n                    ...chat,\n                    position: position // Store the position in chat object\n                };\n            }\n        }\n        return chat;\n    }) as (TdApi.chat|ChatWPosition|false)[])\n        .filter(chat => chat!=false && 'position' in chat) as ChatWPosition[]) // Step 2 - Remove `false` values (chats outside the list)\n        .sort((a, b) => { // Step 3 - Sort it by position.order\n            const order1= a.position.order, order2= b.position.order;\n\n            if (order1 == order2) {\n                return 0;\n            }\n            if (order1 < order2) {\n                return 1;\n            }\n            return -1;\n        });\n}\n\ntype ChatListProps= {\n    chats: TdApi.chat[],\n    list: TdApi.ChatList,\n    unread: ChatStoreUnreadData,\n    selectedChat: number,\n}\n\ntype ChatListStoreProps= {connectionState: ConnectionStoreState}\n\ntype ChatListState= {\n    scrollToTopVisible: boolean,\n    chatListFinished: boolean,\n}\n\n/**\n * Renders the chats within a chat list\n */\nconst ChatList= (connect<ChatListStoreProps, unknown, ChatListProps, ConnectionStoreState>(state=> ({connectionState: state}))(\n    class ChatList extends React.Component<ChatListProps & ChatListStoreProps, ChatListState> {\n        state= {\n            scrollToTopVisible: false,\n            chatListFinished: false\n        }\n        scrollRef= React.createRef<Scrollbars>();\n\n        onScroll= (e: React.UIEvent) => {\n            const visible= (e.target as any).scrollTop > 480;\n            if (visible != this.state.scrollToTopVisible) {\n                this.setState({scrollToTopVisible: visible});\n            }\n        }\n\n        // When updating, TDLib sends updates of type updateChatLastMessage, where only the last one is needed.\n        // This greatly hurts performance.\n        // However, we can workaround it by not re-rendering until all updates have arrived.\n        shouldComponentUpdate(nextProps: ChatListProps & ChatListStoreProps, nextState: ChatListState): boolean {\n            return (nextProps.chats !== this.props.chats \n                || nextProps.list !== this.props.list \n                || nextProps.unread !== this.props.unread\n                || nextProps.connectionState !== this.props.connectionState\n                || nextProps.selectedChat !== this.props.selectedChat\n                || nextState.scrollToTopVisible !== this.state.scrollToTopVisible\n                || nextState.chatListFinished !== this.state.chatListFinished)\n                && nextProps.connectionState != 'connectionStateUpdating'\n                && nextState.chatListFinished; // Do not re-render if updating\n        }\n\n        render() {\n            // Get chats from the list (this needs to be repeated on every modification)\n            const array= \n                getChatsFromList(this.props.chats, this.props.list)\n                    .map(chat=>\n                        <Chat key={chat.id} chat={chat} selected={this.props.selectedChat == chat.id}/>\n                    );\n            \n            return (\n                <React.Fragment>\n                    <ScrollView scrollRef={this.scrollRef} id=\"chat-list\" scrollBarWidth=\"4\" onScroll={this.onScroll}>\n                        {this.props.list['@type']=='chatListMain' && (\n                            <Provider store={chatStore}>\n                                <ArchivedChatsItem chats={this.props.chats}/>\n                            </Provider>\n                        )}\n                        <Provider store={usersStore}>\n                            {array.length ? array :  <EmptyChatList list={this.props.list} unread={this.props.unread}/>}\n                        </Provider>\n                    </ScrollView>\n                    <IconButton icon={history_to_down} onClick={this.scrollToTop}\n                        className={'history-to-down '+(this.state.scrollToTopVisible ? 'visible' : '')}/>\n                </React.Fragment>\n            );\n        }\n\n        scrollToTop= () => {\n            (this.scrollRef.current as any)?.view.scroll({\n                top: 0,\n                behavior: 'smooth',\n            });\n        }\n\n        componentDidMount() {\n            chatListScrollToTopEvent[0]= this.scrollToTop;\n            // Request TDLib to return chats in main list and archive list\n            TdLib.sendQuery({\n                '@type': 'loadChats',\n                'chat_list': {\n                    '@type': 'chatListMain'\n                },\n                'limit': 50\n            }).then(()=> {\n                this.setState({\n                    chatListFinished: true\n                });\n            });\n            TdLib.sendQuery({\n                '@type': 'loadChats',\n                'chat_list': {\n                    '@type': 'chatListArchive'\n                },\n                'limit': 50\n            });\n        }\n    }\n));\nexport default ChatList;\n\ntype ArchivedChatsItemProps= {\n    /** A list of all chats (not just current list) */\n    chats: TdApi.chat[],\n}\n\ntype ArchivedChatsItemStoreProps= {\n    archiveButtonState: 'collapsed'|'expanded'|'hidden-collapsed'|'hidden-expanded',\n    unread: ChatListUnreadData,\n}\n\nconst ArchivedChatsItem= (connect<ArchivedChatsItemStoreProps, unknown, ArchivedChatsItemProps, ChatStoreState>((state) => ({\n    archiveButtonState: state.archiveButtonState,\n    unread: state.unread.archive\n})) (function ArchivedChatsItem({chats, unread, archiveButtonState}: ArchivedChatsItemProps & ArchivedChatsItemStoreProps) {\n    const chatsInList = getChatsFromList(chats, {'@type': 'chatListArchive'}); // Check if there are any archived chats\n    if(!chatsInList.length) return null; // If there are no archived chats, render nothing\n\n    // Ripple\n    const ripple= React.useState<RippleEffectProps_AutoSettable>({state: 'off'});\n    const rippleEvents= handleMyMouseEventsFunction(ripple);\n\n    function onArchiveOpen() {\n        chatStore.dispatch({\n            type: 'SET_ARCHIVE_STATE',\n            archiveState: 'open'\n        });\n    }\n\n    // Change button type to collapsed/expanded/moved to main menu\n    function setButtonState(state: 'collapsed'|'expanded'|'hidden-collapsed'|'hidden-expanded'): void {\n        chatStore.dispatch({\n            type: 'SET_ARCHIVE_BUTTON_STATE',\n            archiveButtonState: state\n        });\n    }\n\n    const moveToMainMenuToast= <Toast>{__('lng_context_archive_to_menu_info')}</Toast>;\n\n    switch(archiveButtonState) {\n        case 'expanded': // Looks like a regular chat\n        default:\n            return (\n                <div {...rippleEvents}\n                    className=\"chat archived\" onClick={onArchiveOpen}\n                    onContextMenu={e=> createContextMenu(e, (\n                        <Menu.MenuContents>\n                            <Menu.MenuItem onClick={()=>{\n                                setButtonState('collapsed');\n                                localStorage.setItem('dibgram-archived-chats-button-mode', 'collapsed');\n                            }} icon={menu_collapse}>\n                                {__('lng_context_archive_collapse')}\n                            </Menu.MenuItem>\n                            <Menu.MenuItem onClick={()=>{\n                                setButtonState('hidden-expanded');\n                                localStorage.setItem('dibgram-archived-chats-button-mode', 'hidden-expanded');\n                                addToast(moveToMainMenuToast);\n                            }} icon={menu_move_to_menu}>\n                                {__('lng_context_archive_to_menu')}\n                            </Menu.MenuItem>\n                        </Menu.MenuContents>\n                    ))}>\n                    <RippleEffect {...ripple[0]} color=\"var(--theme-color-dialogsRippleBg)\"/>\n                    <div className=\"content\">\n                        <div className=\"profile-photo\">\n                            <div className=\"svg\" dangerouslySetInnerHTML={{__html: archive_userpic}}/>\n                        </div>\n                        <div className=\"details\">\n                            <div className=\"top\">\n                                <div className=\"left\">\n                                    <div className=\"title\">{__('lng_archived_name')}</div>\n                                </div>\n                            </div>\n                            <div className=\"bottom\">\n                                <div className=\"left\">\n                                    <div className=\"last-message\">\n                                        <span className=\"part-1\">\n                                            {chatsInList\n                                                .filter(chat=> chat.unread_count > 0)\n                                                .map(chat => chatTitleOrDeletedAccount(chat) + ', ')\n                                                .join('')}\n                                        </span>\n                                        <span className=\"part-2\">\n                                            {chatsInList\n                                                .filter(chat=> chat.unread_count == 0)\n                                                .map(chat => chatTitleOrDeletedAccount(chat))\n                                                .join(', ')}\n                                        </span>\n                                    </div>\n                                </div>\n                                {unread.unread_messages_count? (\n                                    <div className=\"right\">\n                                        <span className=\"unread-badge muted\">{unread.unread_messages_count}</span>\n                                    </div>\n                                ) : null}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n\n        case 'collapsed': // Only title / tiny icon\n            return (\n                <div {...rippleEvents}\n                    className=\"chat archived collapsed\" onClick={onArchiveOpen}\n                    onContextMenu={e=> createContextMenu(e, (\n                        <Menu.MenuContents>\n                            <Menu.MenuItem onClick={()=>{\n                                setButtonState('expanded');\n                                localStorage.setItem('dibgram-archived-chats-button-mode', 'expanded');\n                            }} icon={menu_expand}>\n                                {__('lng_context_archive_expand')}\n                            </Menu.MenuItem>\n                            <Menu.MenuItem onClick={()=>{\n                                setButtonState('hidden-collapsed');\n                                localStorage.setItem('dibgram-archived-chats-button-mode', 'hidden-collapsed');\n                                addToast(moveToMainMenuToast);\n                            }} icon={menu_move_to_menu}>\n                                {__('lng_context_archive_to_menu')}\n                            </Menu.MenuItem>\n                        </Menu.MenuContents>\n                    ))}>\n                    <RippleEffect {...ripple[0]} color=\"var(--theme-color-dialogsRippleBg)\"/>\n                    <div className=\"content\">\n                        {__('lng_archived_name')}\n                        {unread.unread_messages_count? (\n                            <div className=\"details\">\n                                <span className=\"unread-badge muted\">{unread.unread_messages_count}</span>\n                            </div>\n                        ) : null}\n                    </div>\n                </div>\n            );\n        case 'hidden-expanded': // Not here, it's in main menu\n        case 'hidden-collapsed':\n            return null;\n    }\n}) as unknown as React.FunctionComponent<ArchivedChatsItemProps>);\n\ntype EmptyChatListProps = {\n    /** The active chat list */\n    list: TdApi.ChatList,\n    /** Unread data */\n    unread: ChatStoreUnreadData,\n}\n\n/** Renders the empty chat list fallback */\nfunction EmptyChatList({list, unread}: EmptyChatListProps): JSX.Element {\n    const loadingFallBack= (\n        <div className=\"empty\">\n            <div>{__('lng_profile_loading')}</div>\n        </div>\n    );\n    if(list['@type']=='chatListFilter'){ // Empty filter / Filter not loaded\n        if(unread.filters?.[list.chat_filter_id]?.total_chats_count !== 0) return loadingFallBack;\n        return (\n            <div className=\"empty\">\n                <div>{__('lng_no_chats_filter')}</div>\n                <LinkButton>{__('lng_filters_edit')}</LinkButton>\n            </div>\n        );\n    } else { // There are no chats at all / Chats not loaded\n        if(unread.main?.total_chats_count !== 0) return loadingFallBack;\n        return (\n            <div className=\"empty\">\n                <div>{__('lng_no_chats')}</div>\n                <LinkButton>{__('lng_add_contact_button')}</LinkButton>\n            </div>\n        );\n    }\n}\n","import React from 'react';\nimport './search-box.scss';\nimport { info_close } from '../../../../ui/icon/icons';\nimport __ from '../../../../language-pack/language-pack';\n\n/**\n * Renders the search box.\n */\nexport default function SearchBox(props: React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>): JSX.Element {\n    return (\n        <div id=\"search-box\">\n            <input \n                placeholder={__('lng_dlg_filter') as string}\n                {...props}/>\n            <button \n                className=\"clear\" \n                onClick={()=> props.onChange && props.onChange({target: {value: ''}} as any)}\n                data-visible={((props.value as string) || '').length}\n                dangerouslySetInnerHTML={{__html: info_close}}>\n            </button>\n        </div>\n    );\n}\n","import { createStore } from 'redux';\nimport TdLib from './tdlib';\nimport TdApi from './td_api';\n\ntype ConnectionStoreAction_SetConnection= {\n    type: 'SET_CONNECTION',\n    connection: 'connectionStateWaitingForNetwork' | 'connectionStateConnectingToProxy' | 'connectionStateConnecting' | 'connectionStateUpdating' | 'connectionStateReady'\n}\ntype ConnectionStoreAction= ConnectionStoreAction_SetConnection;\n\nexport type ConnectionStoreState = 'connectionStateWaitingForNetwork' | 'connectionStateConnectingToProxy' | 'connectionStateConnecting' | 'connectionStateUpdating' | 'connectionStateReady';\n\nconst connectionStore = createStore<ConnectionStoreState, ConnectionStoreAction, any, any>(\n    (state = 'connectionStateConnecting', action) => {\n        switch (action.type) {\n            case 'SET_CONNECTION':\n                return  action.connection;\n            default:\n                return state;\n        }\n    }\n);\n\nTdLib.registerUpdateHandler<TdApi.updateConnectionState>('updateConnectionState', (update) => {\n    connectionStore.dispatch({\n        type: 'SET_CONNECTION',\n        connection: update.state['@type']\n    });\n});\nexport default connectionStore;","import React from 'react';\nimport './nav-animation.scss';\n\ntype NavAnimationProps = {\n    children?: React.ReactNode | React.ReactNode[],\n    /** The child screen content, only needed when open */\n    innerScreen?: React.ReactNode | React.ReactNode[],\n    /** The class name to apply to the outer element */\n    className?: string,\n    /** The class name to apply to the inner element */\n    innerClass?: string,\n    /** The current state of the animation. Can be `open`, `closing` or `closed` */\n    state: 'open' | 'closing' | 'closed',\n    /**\n     * The type of animation to use:\n     * - `slide-over`: The parent screen swipes a little to left, while the child screen slides in from the right. \n     *   A shadow is also shown over the parent screen in the animation.\n     * - `swipe-fade`: More subtle animation, the parent screen fades out while moving left, while at the same time the child screen fades in from the right.\n     */\n    mode: 'slide-over' | 'swipe-fade',\n\n    //eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [key: string]: any,\n}\n\n/**\n * Renders two navigation sections (outer and inner) with an animation between them\n * \n * You need to set a background color to the outer section. (it has the CSS class 'nav-animation-outer')\n */\nexport default function NavAnimation({ children, innerScreen, className, innerClass, state, mode, ...props }: NavAnimationProps): JSX.Element {\n    return (\n        <div className={'nav-animation ' + mode + ' ' + state + ' ' + className} {...props}>\n            <div className=\"outer\">\n                {children}\n            </div>\n            {state!='closed' && \n                <div className={'inner ' + innerClass}>\n                    {innerScreen}\n                </div>\n            }\n        </div>\n    );\n}\n\nexport function closeNavAnimation(getState: (()=>'open'|'closing'|'closed'), setState: (state: 'closed'|'closing') => void): void {\n    // First set state to closing, which triggers the closing animation. After that, we can delete the element.\n    setState('closing');\n    setTimeout(() => {\n        if(getState() == 'closing') { // This condition is to prevent glitches when archive is opened again before 2s\n            setState('closed');\n        }\n    }, 2000);\n}\n","import React from 'react';\nimport { connect, Provider } from 'react-redux';\nimport ConnectionState from '../../../ui/components/connecting';\nimport ChatList from './chat-list';\nimport SearchBox from './search/search-box';\nimport HamburgerMenuButton from './hamburger-menu/menu-button';\nimport connectionStore from '../../../TdWeb/connectionStore';\nimport IconButton from '../../../ui/elements/icon-button';\nimport './chat-list-bar.scss';\nimport { info_back } from '../../../ui/icon/icons';\nimport chatStore, { ChatStoreState, ChatStoreUnreadData } from '../../chat-store';\nimport NavAnimation, { closeNavAnimation } from '../../../ui/elements/nav-animation';\nimport __ from '../../../language-pack/language-pack';\nimport TdApi from '../../../TdWeb/td_api';\n\ntype ChatListBarProps = {\n    onHamburgerMenuOpened: () => void;\n};\n\ntype ChatListBarStateProps = {\n    useFolders: boolean;\n    chats: TdApi.chat[];\n    list: TdApi.ChatList;\n    archiveState: 'open' | 'closing' | 'closed';\n    unread: ChatStoreUnreadData,\n    selectedChat: number;\n}\n\n/**\n * Renders the navigation menu, containing chat list, search field and search results [and the main menu button]\n */\nconst ChatListBar = (connect<ChatListBarStateProps, unknown, ChatListBarProps, ChatStoreState>(function (state) {\n    return {\n        useFolders: (state.filters || []).length != 0,\n        chats: state.chats, \n        list: state.currentChatList,\n        archiveState: state.archiveState,\n        unread: state.unread,\n        selectedChat: state.selectedChat,\n    };\n})(function ChatListBar({useFolders, chats, list, archiveState, unread, selectedChat, onHamburgerMenuOpened}) {\n    const [searchText, setSearchText] = React.useState('');\n    \n    function closeArchive() {\n        closeNavAnimation(() => chatStore.getState().archiveState,\n            state => {\n                chatStore.dispatch({\n                    type: 'SET_ARCHIVE_STATE',\n                    archiveState: state\n                });\n            }\n        );\n    }\n\n    return (\n        <React.Fragment>\n            <NavAnimation \n                mode=\"slide-over\" \n                id=\"chat-list-bar\"\n                state={archiveState}\n                innerClass=\"archived-chats\"\n                innerScreen={<ArchiveScreen chats={chats} closeArchive={closeArchive} selectedChat={selectedChat} unread={unread}/>}>\n                <div className=\"chat-list-header\">\n                    {(!useFolders) && <HamburgerMenuButton.WithoutFolders onClick={onHamburgerMenuOpened}/>}\n                    <SearchBox value={searchText} onChange={e => setSearchText(e.target.value)}/>\n                </div>\n                <Provider store={connectionStore}>\n                    <ChatList chats={chats} list={list} unread={unread} selectedChat={selectedChat}/>\n                </Provider>\n            </NavAnimation>\n            <Provider store={connectionStore}>\n                <ConnectionState/>\n            </Provider>\n        </React.Fragment>\n    );\n})) as unknown as React.ComponentType<ChatListBarProps>;\nexport default ChatListBar;\n\ntype ArchiveScreenProps = {\n    unread: ChatStoreUnreadData,\n    selectedChat: number,\n    chats: TdApi.chat[],\n    closeArchive: () => void;\n}\n\nfunction ArchiveScreen({unread, selectedChat, chats, closeArchive}: ArchiveScreenProps): JSX.Element {\n    return (\n        <Provider store={connectionStore}>\n            <div className=\"chat-list-header\">\n                <IconButton icon={info_back} onClick={closeArchive}/>\n                {unread.main.unread_unmuted_messages_count? (\n                    <div className=\"unread-badge\">\n                        <span>{unread.main.unread_unmuted_messages_count}</span>\n                    </div>\n                ): null}\n                <div className=\"title\">{__('lng_archived_name')}</div>\n            </div>\n            <ChatList chats={chats} list={{'@type': 'chatListArchive'}} unread={unread} selectedChat={selectedChat}/>\n        </Provider>\n    );\n}\n","export default '0.0.2-beta3';","import React from 'react';\nimport PropTypes from 'prop-types';\nimport RippleEffect, {handleMyMouseEventsFunction, RippleEffectProps_AutoSettable} from '../elements/ripple-effect';\nimport './button.scss';\n\ntype ToolStripButtonProps = React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> & {\n    children?: React.ReactNode | React.ReactNode[];\n    icon?: string;\n    text: React.ReactNode|React.ReactNode[];\n    hideIcon?: boolean;\n}\n\n/**\n * Renders a tool strip button. Has an icon and children, if provided will align to the right.\n */\nexport default function ToolStripButton({icon, text, children, hideIcon, ...rest}: ToolStripButtonProps): JSX.Element {\n    const ripple = React.useState<RippleEffectProps_AutoSettable>({state: 'off'});\n    const rippleEvents= handleMyMouseEventsFunction(ripple);\n    return (\n        <div className=\"tool-strip-button\" {...rest} {...rippleEvents}>\n            <RippleEffect {...ripple[0]} color=\"var(--theme-color-windowBgRipple)\"/>\n            <div className=\"content\">\n                {(!hideIcon) && <div className=\"icon\" dangerouslySetInnerHTML={{__html: icon || ''}}></div>} \n                <div className=\"title\">{text}</div>\n                {children && (\n                    <div className=\"right\">\n                        {children}\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\nToolStripButton.propTypes = {\n    /** Icon HTML */\n    icon: PropTypes.string,\n    /** Button text */\n    text: PropTypes.string,\n    /** Optionally, an element to show aligned to right */\n    children: PropTypes.node,\n    /** If true, does not show the icon. This removes the space allocated to the icon. */\n    hideIcon: PropTypes.bool\n};","/**\n * There are 3 ways to import the items\n * 1. import each component from the respective file\n * 2. import each component from tool-strip.js\n * 3. import the default export from tool-strip.js and access the object members\n * You can use whichever you want.\n */\n\nimport ToolStripButton from './button';\nimport ToolStripSection from './section';\nimport ToolStripSeparator from './separator';\nimport ToolStripToggleButton from './toggle-button';\nimport ToolStripHeading from './heading';\n\n/**\n * A collection of different components to create a generic menu.\n * \n * Contains sections, menu-items, two kinds of separators, switches, check-boxes, etc.s\n */\nconst ToolStrip = {\n    Button: ToolStripButton,\n    Section: ToolStripSection,\n    ToggleButton: ToolStripToggleButton,\n    Separator: ToolStripSeparator,\n    Heading: ToolStripHeading\n};\nexport default ToolStrip;\nexport { ToolStripButton, ToolStripSection, ToolStripToggleButton, ToolStripSeparator, ToolStripHeading };\n","import React from 'react';\nimport './section.scss';\n\n/**\n * Renders a tool strip section. Use different sections when using separators.\n */\nexport default function Section(props: React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>): JSX.Element {\n    return <div className=\"tool-strip-section\" {...props}/>;\n}\n// Too simple for a separate file, no?","import React from 'react';\nimport ToolStripButton from './button';\nimport './toggle-button.scss';\n\ntype ToolStripToggleButtonProps = {\n    /** HTML of the icon to display */\n    icon?: string;\n    /** Button text */\n    text: React.ReactNode|React.ReactNode[];\n    /** Callback when the button is toggled */\n    onChange: (value: boolean) => void;\n    /** the on/off state of the button */\n    isActive: boolean;\n    /** If true, does not show the icon. This removes the space allocated to the icon. */\n    hideIcon?: boolean;\n\n    //eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [key: string]: any;\n}\n\nexport default function ToolStripToggleButton({icon, text, onChange, isActive, ...rest}: ToolStripToggleButtonProps): JSX.Element {\n    function toggle() {\n        onChange(!isActive);\n    }\n    return (\n        <ToolStripButton icon={icon} text={text} onClick={toggle} {...rest}>\n            <input type=\"checkbox\" className=\"toggle-button\" checked={isActive} readOnly/>\n        </ToolStripButton>\n    );\n}\n","import React from 'react';\nimport './separator.scss';\n\n/**\n * Renders a tool strip button. Has an icon and children, if provided will align to the right.\n */\nexport default function ToolStripSeparator(props: React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>): JSX.Element {\n    return (\n        <div className=\"tool-strip-separator\" {...props}/>\n    );\n}","import React from 'react';\nimport './heading.scss';\n\nexport default function Heading({children}: {children: React.ReactNode|React.ReactNode[]}): JSX.Element {\n    return <div className=\"tool-strip-heading\">{children}</div>;\n}","import React from 'react';\nimport RippleEffect, { handleMyMouseEventsFunction, RippleEffectProps_AutoSettable } from '../elements/ripple-effect';\nimport { three_dots } from '../icon/icons';\nimport './three-dots-menu.scss';\nimport { getRtlMode } from '../../language-pack/language-pack';\n\nexport default function ThreeDotsMenu({children, className, ...rest}: React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>): JSX.Element {\n    const ripple= React.useState<RippleEffectProps_AutoSettable>({state: 'off'});\n    const {onMouseDown, onMouseUp, onMouseLeave}= handleMyMouseEventsFunction(ripple);\n\n    const [visible, setVisible]= React.useState(false);\n\n    return (\n        <div className={'three-dots-menu ' + (className || '')} onMouseLeave={e=> {\n            onMouseLeave(e);\n            setVisible(false);\n        }} {...rest}>\n            <button className=\"icon-button\" onMouseDown={e=> {\n                onMouseDown(e);\n                setVisible(true);\n            }}>\n                <span dangerouslySetInnerHTML={{__html: three_dots}} />\n                <RippleEffect {...ripple[0]} color=\"var(--theme-color-windowBgOver)\" small={true}/>\n            </button>\n            {visible && <div className={'menu ' + (getRtlMode() ? 'br' : 'bl')} onClick={e=> {\n                onMouseUp(e);\n                setVisible(false);\n            }}>\n                {children}\n            </div>}\n        </div>\n    );\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { info_close, title_search } from '../icon/icons';\nimport './search.scss';\nimport IconButton from '../elements/icon-button';\nimport __ from '../../language-pack/language-pack';\n\ntype BoxSearchProps = {\n    value: string;\n    onChange: (value: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nexport default function BoxSearch({value, onChange}: BoxSearchProps): JSX.Element {\n    return (\n        <div className=\"box-search\">\n            <span className=\"icon\" dangerouslySetInnerHTML={{__html: title_search}} />\n            <input type=\"text\" placeholder={__('lng_dlg_filter') as string} value={value} onChange={onChange} />\n            <IconButton icon={info_close} className=\"icon-button clear\" \n                onClick={()=> onChange && onChange({target: {value: ''} as any} as React.ChangeEvent<HTMLInputElement>)}\n                data-visible={(value || '').length}/>\n        </div>\n    );\n}\nBoxSearch.propTypes = {\n    value: PropTypes.string,\n    onChange: PropTypes.func\n};\n","import React from 'react';\nimport Dialog from '../../../ui/dialog/dialog';\nimport SmallButton from '../../../ui/elements/small-button';\nimport ScrollView from '../../../ui/scroll/scrollbar';\nimport RippleEffect, { handleMyMouseEventsFunction, RippleEffectProps_AutoSettable } from '../../../ui/elements/ripple-effect';\nimport BoxSearch from '../../../ui/dialog/search';\nimport __, { getCurrentLanguagePack } from '../../../language-pack/language-pack';\nimport TdLib from '../../../TdWeb/tdlib';\nimport './choose-language.scss';\nimport { addDialog } from '../../../ui/dialog/dialogs';\nimport ConfirmDialog from '../../../ui/dialog/confirm-dialog';\nimport ToolStrip from '../../../ui/tool-strip/tool-strip';\nimport TdApi from '../../../TdWeb/td_api';\n\ntype ChooseLanguageDialog= {\n    id: string\n}\n\nexport default function ChooseLanguageDialog({id}: ChooseLanguageDialog): JSX.Element {\n    const ref = React.useRef<Dialog>() as React.RefObject<Dialog>;\n    // eslint-disable-next-line prefer-const\n    let [languages, setLanguages] = React.useState<TdApi.languagePackInfo[]>([]);\n    const [search, setSearch] = React.useState('');\n\n    if(search.length > 0) { // Search\n        languages = languages.filter(country => country.name.toLowerCase().startsWith(search.toLowerCase()));\n    }\n\n    React.useEffect(() => {\n        TdLib.sendQuery({\n            '@type': 'getLocalizationTargetInfo',\n            'only_local': false\n        }).then((response) => {\n            response= response as TdApi.localizationTargetInfo;\n            setLanguages(response.language_packs);\n        });\n    }, []);\n\n    const currentPack= getCurrentLanguagePack(true);\n\n    return (\n        <Dialog ref={ref} id={id} width=\"320px\" className=\"confirm-dialog\">\n            <h1>{__('lng_languages')}</h1>\n\n            <BoxSearch value={search} onChange={(e) => setSearch(e.target.value)} />\n\n            <ScrollView scrollAlwaysVisible>\n                <ToolStrip.Section>\n                    {languages.map(pack => (\n                        <LanguagePack \n                            key={pack.id} \n                            pack={pack} \n                            onClick={()=> selectLanguage(pack)} \n                            selected={currentPack.id == pack.id}/>\n                    ))}\n                </ToolStrip.Section>\n            </ScrollView>\n\n            <div className=\"options\">\n                <SmallButton onClick={()=> {ref.current?.close();}}>{__('lng_close')}</SmallButton>\n            </div>\n        </Dialog>\n    );\n}\n\ntype LanguagePackProps= {\n    pack: TdApi.languagePackInfo,\n    onClick: (e: React.MouseEvent<HTMLDivElement>)=> void,\n    selected: boolean\n}\n\nexport function LanguagePack({pack, onClick, selected}: LanguagePackProps): JSX.Element {\n    const ripple = React.useState<RippleEffectProps_AutoSettable>({state: 'off'});\n    const rippleEvents = handleMyMouseEventsFunction(ripple);\n    return (\n        <div className=\"language-pack-item\" onClick={onClick} {...rippleEvents}>\n            <RippleEffect {...ripple[0]} color=\"var(--theme-color-windowBgRipple)\"/>\n            <div className=\"content\">\n                <input type=\"radio\" name=\"settings-language-pack-selector\" checked={selected}/>\n                <div className=\"right\">\n                    <div className=\"name\">{pack.native_name}</div>\n                    <div className=\"english-name\">{pack.name}</div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\ntype SpecialLanguageStrings= {\n    [key: string]: string\n}\ntype SpecialLanguageStringsCache= {\n    [id: string]: SpecialLanguageStrings\n}\n\nfunction selectLanguage(pack: TdApi.languagePackInfo): void {\n    const cache: SpecialLanguageStringsCache= JSON.parse(localStorage.getItem('dibgram-special-language-strings-cache') || '{}');\n    let specialStringsImport: Promise<{default:SpecialLanguageStrings}|null>;\n    if(!cache[pack.id] && pack.id!='en'){\n        specialStringsImport= import(`../../../language-pack/special-strings/${pack.id}.json`);\n    } else {\n        specialStringsImport= Promise.resolve(null);\n    }\n\n    function apply(){\n        specialStringsImport.then(specialStrings => {\n            if(!cache[pack.id] && pack.id!='en') {\n                specialStrings= specialStrings as {default:SpecialLanguageStrings};\n                cache[pack.id]= specialStrings.default;\n                localStorage.setItem('dibgram-special-language-strings-cache', JSON.stringify(cache));\n            }\n\n            localStorage.setItem('dibgram-active-language', JSON.stringify(pack));\n            window.location.reload();\n        });\n    }\n\n    TdLib.sendQuery({\n        '@type': 'getLanguagePackStrings',\n        language_pack_id: pack.id,\n        keys: [ 'lng_sure_save_language' ]\n    })\n        .then(response => {\n            response= response as TdApi.languagePackStrings;\n            addDialog('settings-language-restart-confirm-dialog', (\n                <ConfirmDialog id=\"settings-language-restart-confirm-dialog\"\n                    largeFont={true} onOK={apply}>\n\n                    {__('lng_sure_save_language')}\n                    <br/><br/>\n                    {(response.strings[0].value as TdApi.languagePackStringValueOrdinary).value}\n                </ConfirmDialog>\n            ));\n\n            TdLib.sendQuery({ // Request language pack strings so it is already cached after restart\n                '@type': 'getLanguagePackStrings',\n                language_pack_id: pack.id,\n            });\n        });\n}\n","import React from 'react';\nimport IconButton from '../../../../ui/elements/icon-button';\nimport { info_back, info_close } from '../../../../ui/icon/icons';\nimport __, { _s__ } from '../../../../language-pack/language-pack';\nimport ToolStrip from '../../../../ui/tool-strip/tool-strip';\nimport { themeStore } from '../../../../ui/themes/theme';\nimport { getRtlMode } from '../../../../language-pack/language-pack';\nimport dibgramMods, { saveDibgramMod } from '../../../../dibgram-mods';\n\ntype SettingsAdvancedProps = {\n    onClose: () => void;\n    onBack: () => void;\n};\n\nexport default function SettingsAdvanced({onClose, onBack}: SettingsAdvancedProps): JSX.Element {\n    const [enableRtl, setEnableRtl] = React.useState(localStorage.getItem('dibgram-allow-rtl-layout') == 'true');\n\n    const [mod_enableSyntaxHighlighting, setMod_enableSyntaxHighlighting] = React.useState(dibgramMods.chat_enableSyntaxHighlighting);\n\n    return (\n        <React.Fragment>\n            <div className=\"header\">\n                <IconButton className=\"icon-button back\" icon={info_back} onClick={onBack} />\n                <h3 className=\"title\">{__('lng_settings_advanced')}</h3>\n                <IconButton className=\"icon-button close\" icon={info_close} onClick={onClose}/>\n            </div>\n            <ToolStrip.Section>\n                <ToolStrip.ToggleButton text={_s__('lngd_settings_advanced_rtl')} hideIcon={true} isActive={enableRtl} onChange={() => {\n                    setEnableRtl(!enableRtl);\n                    localStorage.setItem('dibgram-allow-rtl-layout', String(!enableRtl));\n                    themeStore.dispatch({type: 'SET_RTL', rtl: getRtlMode()});\n                }} />\n            </ToolStrip.Section>\n            <ToolStrip.Separator />\n            <ToolStrip.Section>\n                <ToolStrip.Heading>{_s__('lngd_settings_advanced_mods_title')}</ToolStrip.Heading>\n\n                <ToolStrip.ToggleButton text={_s__('lngd_settings_advanced_mods_syntaxhighlighting')} hideIcon={true} isActive={mod_enableSyntaxHighlighting} onChange={(newValue) => {\n                    saveDibgramMod('chat_enableSyntaxHighlighting', newValue);\n                    setMod_enableSyntaxHighlighting(newValue);\n                }} />\n            </ToolStrip.Section>\n        </React.Fragment>\n    );\n}\n","import React from 'react';\nimport Dialog from '../../../ui/dialog/dialog';\nimport ToolStrip from '../../../ui/tool-strip/tool-strip';\nimport ScrollView from '../../../ui/scroll/scrollbar';\nimport TdLib from '../../../TdWeb/tdlib';\nimport { addDialog } from '../../../ui/dialog/dialogs';\nimport ConfirmDialog from '../../../ui/dialog/confirm-dialog';\nimport ThreeDotsMenu from '../../../ui/menu/three-dots-menu';\nimport Menu from '../../../ui/menu/menu';\nimport './settings-dialog.scss';\nimport { info_close, settings_advanced, settings_chat, settings_faq, settings_folders, settings_info, settings_language, settings_notifications, settings_privacy_security } from '../../../ui/icon/icons';\nimport ProfilePhoto from '../../../ui/components/profile-photo';\nimport IconButton from '../../../ui/elements/icon-button';\nimport options from '../../../TdWeb/options';\nimport { connect } from 'react-redux';\nimport { getUserFullName } from '../../user-misc';\nimport __ from '../../../language-pack/language-pack';\nimport ChooseLanguageDialog from './choose-language';\nimport NavAnimation, { closeNavAnimation } from '../../../ui/elements/nav-animation';\nimport SettingsAdvanced from './advanced/advanced';\nimport { lastSeenToString } from '../../../time-tostring';\nimport { UsersStoreState } from '../../users-store';\nimport { menu_add_account, menu_info, menu_leave } from '../../../ui/icon/menu/menu';\n\ntype SettingsSection= React.ComponentType<{\n    onClose: ()=> void,\n    onBack: ()=> void\n}>;\n\ntype SettingsSelfProps = {\n    /** Unique ID of this dialog, used to close it. */\n    id: string,\n}\ntype SettingsStoreProps = {\n    users: UsersStoreState,\n}\ntype SettingsProps = SettingsSelfProps & SettingsStoreProps;\n\nfunction Settings ({id, users}: SettingsProps): JSX.Element {\n    const dialogRef = React.useRef<Dialog>() as React.RefObject<Dialog>;\n    const user= users[options['my_id'] as number];\n    const [navState, setNavState] = React.useState<'open'|'closing'|'closed'>('closed');\n    const [section, setSection] = React.useState<React.ReactElement|null>(null);\n\n    function openSection(Section: SettingsSection): void {\n        setSection(<Section onClose={(dialogRef.current as Dialog).close} onBack={()=> {\n            closeNavAnimation(()=>navState, setNavState);\n        }}/>);\n        setNavState('open');\n    }\n\n    return (\n        <Dialog className=\"settings-dialog\" id={id} ref={dialogRef} width=\"392px\">\n            <NavAnimation className=\"dialog-content\" innerScreen={section} mode=\"swipe-fade\" state={navState}>\n                <div className=\"header\">\n                    <h3 className=\"title\">{__('lng_menu_settings')}</h3>\n                    <IconButton className=\"icon-button close\" icon={info_close} onClick={() => {\n                        dialogRef.current?.close();\n                    }} />\n                    \n                    <ThreeDotsMenu className=\"more-options\">\n                        <Menu.MenuContents>\n                            <Menu.MenuItem icon={menu_add_account}>{__('lng_menu_add_account')}</Menu.MenuItem>\n                            <Menu.MenuItem icon={menu_info}>{__('lng_settings_information')}</Menu.MenuItem>\n                            <Menu.MenuItem icon={menu_leave} onClick={() => {\n                                addDialog('log-out-from-main-menu-confirm-dialog',\n                                    <ConfirmDialog largeFont={true}\n                                        id=\"log-out-from-main-menu-confirm-dialog\"\n                                        OKButtonText={__('lng_settings_logout')} onOK={()=> {\n                                            TdLib.sendQuery({\n                                                '@type': 'logOut'\n                                            });\n                                        }} attention={true}>\n                                        {__('lng_sure_logout')}\n                                    </ConfirmDialog>\n                                );\n                            }}>{__('lng_settings_logout')}</Menu.MenuItem>\n                        </Menu.MenuContents>\n                    </ThreeDotsMenu>\n                </div>\n                <ScrollView scrollBarWidth=\"4\">\n                    <div className=\"scroll-content\">\n                        <ToolStrip.Section className=\"profile-info\">\n                            <ProfilePhoto id={user?.id} name={user ? getUserFullName(user) : ''} photo={user?.profile_photo?.small} disableSavedMessages={true}/>\n                            <span>\n                                <p className=\"name\">{user && getUserFullName(user)}</p>\n                                <p className={`status ${user.status['@type'] == 'userStatusOnline' ? 'active' : ''}`}>\n                                    {lastSeenToString(user.status)}\n                                </p>\n                            </span>\n                        </ToolStrip.Section>\n                        <ToolStrip.Separator/>\n                        <ToolStrip.Section>\n                            <ToolStrip.Button icon={settings_info} text={__('lng_settings_information')}/>\n                            <ToolStrip.Button icon={settings_notifications} text={__('lng_settings_section_notify')}/>\n                            <ToolStrip.Button icon={settings_privacy_security} text={__('lng_settings_section_privacy')}/>\n                            <ToolStrip.Button icon={settings_chat} text={__('lng_settings_section_chat_settings')}/>\n                            <ToolStrip.Button icon={settings_folders} text={__('lng_settings_section_filters')}/>\n                            <ToolStrip.Button icon={settings_advanced} text={__('lng_settings_advanced')} onClick={()=> openSection(SettingsAdvanced)}/>\n                            <ToolStrip.Button icon={settings_language} text={__('lng_settings_language')}\n                                onClick={()=>addDialog('settings-change-language-dialog', <ChooseLanguageDialog id=\"settings-change-language-dialog\"/>)}>\n                                <span className=\"value\">{__('lng_language_name')}</span>\n                            </ToolStrip.Button>\n                        </ToolStrip.Section>\n                        <ToolStrip.Separator/>\n                        <ToolStrip.Section>\n                            <ToolStrip.Button icon={settings_faq} text={__('lng_settings_faq')} onClick={() => window.open('https://telegram.org/faq')}/>\n                            <ToolStrip.Button text={__('lng_settings_ask_question')}/>\n                        </ToolStrip.Section>\n                    </div>\n                </ScrollView>\n            </NavAnimation>\n        </Dialog>\n    );\n}\n\nconst SettingsDialog =( connect<SettingsStoreProps, unknown, SettingsSelfProps, UsersStoreState>( (users)=> ({users}) ) (Settings)) as unknown as React.FunctionComponent<SettingsSelfProps>;\nexport default SettingsDialog;","import React from 'react';\nimport './menu.scss';\nimport TdLib from '../../../../TdWeb/tdlib';\nimport ProfilePhoto from '../../../../ui/components/profile-photo';\nimport { getChatsFromList } from '../chat-list';\nimport chatStore, { ChatStoreState } from '../../../chat-store';\nimport { archive_userpic, menu_new_channel, menu_new_group, menu_night_mode, menu_settings, settings_name, settings_phone_number } from '../../../../ui/icon/icons';\nimport { connect, Provider } from 'react-redux';\nimport { createContextMenu } from '../../../../ui/menu/context-menu';\nimport Menu from '../../../../ui/menu/menu';\nimport ScrollView from '../../../../ui/scroll/scrollbar';\nimport LinkButton from '../../../../ui/elements/link-button';\nimport version from '../../../../../version';\nimport Dialogs, { addDialog, dialogStore } from '../../../../ui/dialog/dialogs';\nimport ConfirmDialog from '../../../../ui/dialog/confirm-dialog';\nimport ToolStrip from '../../../../ui/tool-strip/tool-strip';\nimport { setTheme, themeStore } from '../../../../ui/themes/theme';\nimport SettingsDialog from '../../settings/settings-dialog';\nimport usersStore from '../../../users-store';\nimport options from '../../../../TdWeb/options';\nimport { getUserFullName } from '../../../user-misc';\nimport __, { _s__fmt, __fmt } from '../../../../language-pack/language-pack';\nimport TdApi from '../../../../TdWeb/td_api';\nimport { menu_move_from_menu } from '../../../../ui/icon/menu/menu';\n\ntype HamburgerMenuSelfProps = {\n    visible: boolean;\n    onClose: () => void;\n}\n\ntype HamburgerMenuStoreProps = {\n    chats: TdApi.chat[];\n    archiveButtonState: 'expanded' | 'collapsed' | 'hidden-expanded' | 'hidden-collapsed';\n}\n\ntype HamburgerMenuProps = HamburgerMenuSelfProps & HamburgerMenuStoreProps;\n\n/**\n * Renders the main menu (always rendered but not always visible)\n */\nconst HamburgerMenu= (connect<HamburgerMenuStoreProps, unknown, HamburgerMenuSelfProps, ChatStoreState>(state=> ({\n    chats: state.chats,\n    archiveButtonState: state.archiveButtonState,\n})) (\n    function HamburgerMenu ({visible, onClose, chats, archiveButtonState}: HamburgerMenuProps): JSX.Element {\n        const [me, setMe] = React.useState<TdApi.user|null>(null);\n        React.useEffect(() => {\n            TdLib.sendQuery({ // Get current user info\n                '@type': 'getMe'\n            }).then(result => {\n                // Format phone number and put it in state\n                if(result.phone_number) {\n                    TdLib.sendQuery({\n                        '@type': 'getPhoneNumberInfo',\n                        phone_number_prefix: result.phone_number\n                    }).then(info => {\n                        result= result as TdApi.user;\n                        info = info as TdApi.phoneNumberInfo;\n                        // Format phone number\n                        if(info.country_calling_code){\n                            result.phone_number= `+${info.country_calling_code} ${info.formatted_phone_number}`;\n                        }\n                        setMe(result);\n                    });\n                } \n                else setMe(result);\n            });\n        }, []); // equivalent to componentDidMount\n\n        const [nightMode, setNightMode] = React.useState(['tinted', 'night'].includes(themeStore.getState().theme));\n\n        function onKeyDown (e: React.KeyboardEvent<HTMLDivElement>): void {\n            // `Esc` closes the menu\n            if(e.key === 'Escape') {\n                onClose();\n            }\n        }\n        // Autofocus menu\n        const ref = React.useRef<HTMLDivElement>(null);\n        React.useEffect(() => {\n            if(visible) {\n                ref.current?.focus();\n            }\n        }, [visible]);\n\n        // Get chats from archive to see if archive button should be shown\n        const showArchivedChats = getChatsFromList(chats, {'@type': 'chatListArchive'}).length > 0;\n\n        return (\n            <div id=\"hamburger-menu\" ref={ref} className={visible ? 'visible' : ''} \n                onKeyDown={onKeyDown} tabIndex={0}>\n                <div className=\"content\">\n                    <div className=\"header\">\n                        <div className=\"row-1\">\n                            <ProfilePhoto \n                                id={me?.id || 0} \n                                name={(me?.first_name || '') + (me?.last_name? (' ' + me.last_name) : '')} \n                                photo={me?.profile_photo?.small}\n                                disableSavedMessages={true}/>\n                            <div className=\"buttons\">\n                                {(showArchivedChats && (['hidden-collapsed', 'hidden-expanded'].includes(archiveButtonState))) && (\n                                    <button \n                                        className=\"button\" \n                                        dangerouslySetInnerHTML={{__html: archive_userpic}}\n                                        onClick={() => {\n                                            chatStore.dispatch({\n                                                type: 'SET_ARCHIVE_STATE',\n                                                archiveState: 'open'\n                                            });\n                                            onClose();\n                                        }}\n                                        onContextMenu={e=> createContextMenu(e, (\n                                            <Menu.MenuContents>\n                                                <Menu.MenuItem onClick={()=> {\n                                                    const newState= ({\n                                                        'hidden-collapsed': 'collapsed', \n                                                        'hidden-expanded': 'expanded',\n                                                        'collapsed': 'collapsed',\n                                                        'expanded': 'expanded'\n                                                    } as const)[archiveButtonState];\n                                                    chatStore.dispatch({\n                                                        type: 'SET_ARCHIVE_BUTTON_STATE',\n                                                        archiveButtonState: newState\n                                                    });\n                                                    localStorage.setItem('dibgram-archived-chats-button-mode', newState);\n                                                    onClose();\n                                                }} icon={menu_move_from_menu}>\n                                                    {__('lng_context_archive_to_list')}\n                                                </Menu.MenuItem>\n                                            </Menu.MenuContents>\n                                        ))}/>\n                                )}\n                            </div>\n                        </div>\n                        <div className=\"row-2\">\n                            <div className=\"name\">\n                                {me && getUserFullName(me)}\n                            </div>\n                            <div className=\"phone-number\">\n                                {me?.phone_number}\n                            </div>\n                        </div>\n                    </div>\n                    <ScrollView scrollAlwaysVisible>\n                        <div className=\"scroll-content\">\n                            <div className=\"options\">\n                                <ToolStrip.Section>\n                                    <ToolStrip.Button icon={menu_new_group} text={__('lng_create_group_title')}/>\n                                    <ToolStrip.Button icon={menu_new_channel} text={__('lng_create_channel_title')}/>\n                                    <ToolStrip.Button icon={settings_name} text={__('lng_menu_contacts')}/>\n                                    <ToolStrip.Button icon={settings_phone_number} text={__('lng_menu_calls')}/>\n                                    <ToolStrip.Button icon={menu_settings} text={__('lng_menu_settings')} onClick={()=> {\n                                        onClose();\n                                        addDialog('full-settings-dialog',\n                                            <Provider store={usersStore}>\n                                                <SettingsDialog id=\"full-settings-dialog\" />\n                                            </Provider>\n                                        );\n                                    }}/>\n                                    <ToolStrip.ToggleButton icon={menu_night_mode} text={__('lng_menu_night_mode')} isActive={nightMode} onChange={(isNight)=> {\n                                        setNightMode(isNight);\n                                        setTheme(isNight ? 'night' : 'day');\n                                    }}/>\n                                </ToolStrip.Section>\n                            </div>\n                            <div className=\"about\">\n                                <div className=\"row-1\">\n                                    <LinkButton href=\"https://github.com/DIBgram/DIBgram\">DIBgram</LinkButton>\n                                </div>\n                                <div className=\"row-2\">\n                                    <LinkButton href=\"https://github.com/DIBgram/DIBgram/releases/\">{__fmt('lng_settings_current_version', {version})}</LinkButton> ­– <LinkButton onClick={()=> {\n                                        // About DIBgram\n                                        onClose();\n                                        addDialog('main-menu-about-dibgram-dialog', (\n                                            <ConfirmDialog id=\"main-menu-about-dibgram-dialog\"\n                                                width=\"390px\" title=\"DIBgram\" OKButtonText={__('lng_close')}\n                                                hideCancelButton={true}>\n\n                                                <LinkButton className=\"version link-button\"\n                                                    style={{color: 'var(--theme-color-windowSubTextFg)'}} \n                                                    href=\"https://github.com/DIBgram/DIBgram/releases/\">\n                                                        \n                                                    {_s__fmt('lngd_about_version', {\n                                                        version,\n                                                        tdlib: options['version']\n                                                    })}\n                                                </LinkButton>\n\n                                                <p>{_s__fmt('lngd_about_text1', {\n                                                    tdlib: <LinkButton href=\"https://core.telegram.org/tdlib\">TDLib</LinkButton>\n                                                })}</p>\n\n                                                <p>{__fmt('lng_about_text2', { //TODO: find out why it doesn't work\n                                                    gpl_link: <LinkButton href=\"https://github.com/DIBgram/DIBgram/blob/main/LICENSE\">GNU GPL</LinkButton>,\n                                                    github_link: <LinkButton href=\"https://github.com/DIBgram/DIBgram\">GitHub</LinkButton>\n                                                })}</p>\n\n                                                <p>{__fmt('lng_about_text3', {\n                                                    faq_link: <LinkButton href=\"https://telegram.org/faq\">{__('lng_about_text3_faq')}</LinkButton>\n                                                })}</p>\n                                            </ConfirmDialog>\n                                        ));\n                                    }}>\n                                        {__('lng_menu_about')}\n                                    </LinkButton>\n                                </div>\n                            </div>\n                        </div>\n                    </ScrollView>\n                </div>\n                <Provider store={dialogStore}>\n                    <Dialogs className=\"shadow\" onClick={onClose}/>\n                </Provider>\n            </div>\n        );\n    }) as unknown as React.FunctionComponent<HamburgerMenuSelfProps>);\nexport default HamburgerMenu;\n","import { createStore } from 'redux';\nimport TdApi from '../TdWeb/td_api';\n\nexport type MessageStoreState= {\n    messages: {[id: number]: TdApi.message};\n}\n\ntype MessageStoreAction_AddMessages= { // Add a list of messages, which is returned from getChatHistory\n    type: 'ADD_MESSAGES';\n    messages: TdApi.message[];\n}\ntype MessageStoreAction_AddMessage= { // Add a single message\n    type: 'ADD_MESSAGE';\n    message: TdApi.message;\n}\ntype MessageStoreAction_RemoveMessages= { // Removes the messages with the given ids\n    type: 'REMOVE_MESSAGES';\n    messageIds: number[];\n}\ntype MessageStoreAction_ReduceMessage= { // Replaces the message with the given id with the result of the reduce function\n    type: 'REDUCE_MESSAGE';\n    messageId: number;\n    reduce: (message: TdApi.message) => TdApi.message;\n}\ntype MessageStoreAction_ClearMessages= {\n    type: 'CLEAR_MESSAGES'\n}\n\nexport type MessageStoreAction = MessageStoreAction_AddMessages | MessageStoreAction_AddMessage | MessageStoreAction_RemoveMessages | MessageStoreAction_ReduceMessage| MessageStoreAction_ClearMessages;\n\nconst defaultMessageStoreState= {\n    messages: {}\n};\n\nexport function reducer(state: MessageStoreState= defaultMessageStoreState , action: MessageStoreAction): MessageStoreState {\n    switch (action.type) {\n        case 'ADD_MESSAGES': {\n            const result: {[key: number]: TdApi.message} = {};\n            for (const message of action.messages) {\n                result[message.id] = message;\n            }\n            return {\n                ...state,\n                messages: {\n                    ...state.messages,\n                    ...result\n                }\n            };\n        }\n        case 'ADD_MESSAGE': {\n            return {\n                ...state,\n                messages: {\n                    ...state.messages,\n                    [action.message.id]: action.message\n                }\n            };\n        }\n        case 'REMOVE_MESSAGES': {\n            const result: {[key: number]: TdApi.message} = {};\n            for (const messageId in state.messages) {\n                if (!action.messageIds.includes(Number(messageId))) {\n                    result[messageId] = state.messages[messageId];\n                }\n            }\n            return {\n                ...state,\n                messages: result\n            };  \n        }\n        case 'REDUCE_MESSAGE': {\n            return {\n                ...state,\n                messages: {\n                    ...state.messages,\n                    [action.messageId]: action.reduce(state.messages[action.messageId])\n                }\n            };\n        }\n        case 'CLEAR_MESSAGES': \n            return defaultMessageStoreState;\n        default:\n            return state;\n    }\n}\n\nexport const messageStore= createStore(reducer);","import React from 'react';\nimport TdLib from '../../TdWeb/tdlib';\nimport currencyAmountToString from '../sections/payments/currency-tostring';\nimport {getUserFullName} from '../user-misc';\nimport MessagePinnedMessage from './message-pinned-message';\nimport { durationToString, futureDayToString, timeToString } from '../../time-tostring';\nimport __, { _s__, __collection, __fmt, __pl } from '../../language-pack/language-pack';\nimport compileEntities from './ui/entities';\nimport TdApi from '../../TdWeb/td_api';\nimport { UsersStoreState } from '../users-store';\nimport { LanguagePackKey, LanguagePackStringName, LanguagePackStringNamePluralized } from '../../language-pack/language-pack-types';\nimport currencies from '../sections/payments/currencies.json';\n\ntype MessageSummaryWithIconProps = {\n    message?: TdApi.message,\n    className: string,\n    users: UsersStoreState,\n    chat: TdApi.chat,\n}\n\nexport default function MessageSummaryWithIcon({message, className, users, chat}: MessageSummaryWithIconProps): JSX.Element|null {\n    if(!message) return null;\n\n    switch(message.content['@type']) {\n        case 'messageAnimation': // GIF\n            return (\n                <MayHaveCaption\n                    type=\"GIF\" //TODO: Find the localized string\n                    caption={message.content.caption} \n                    className={className}/>\n            );\n        \n        case 'messageAudio': { // Audio/music file\n            let title= message.content.audio.title || message.content.audio.file_name; // If there is no title, use file name instead\n            if(message.content.audio.performer) // Prepend performer name\n                title= message.content.audio.performer+ ' ­­– ' + title;\n            return (\n                <MayHaveCaption \n                    type={title} \n                    caption={message.content.caption} \n                    className={className}/>\n            );\n        }\n\n        case 'messageBasicGroupChatCreate': // X created the group «xxxx»\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{__fmt('lng_action_created_chat', {from: null, title: message.content.title})}</span>\n                </span>\n            );\n\n        case 'messageCall': { // Call\n            let text: React.ReactNode|React.ReactNode[] ='';\n            if(message.is_outgoing) { // You made the call\n                switch(message.content.discard_reason?.['@type']) {\n                    case 'callDiscardReasonMissed':\n                        text= __(message.content.is_video? 'lng_call_video_cancelled' : 'lng_call_cancelled');\n                        break;\n                    default:\n                        text= __(message.content.is_video? 'lng_call_video_outgoing' : 'lng_call_outgoing');\n                }\n            } else { // The other user called you\n                switch(message.content.discard_reason?.['@type']) {\n                    case 'callDiscardReasonDeclined':\n                        text= __(message.content.is_video? 'lng_call_video_declined' : 'lng_call_declined');\n                        break;\n                    case 'callDiscardReasonMissed':\n                        text= __(message.content.is_video? 'lng_call_video_missed' : 'lng_call_missed');\n                        break;\n                    default: \n                        text= __(message.content.is_video? 'lng_call_video_incoming' : 'lng_call_incoming');\n                }\n            } \n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{text}</span>\n                </span>\n            );\n        }\n\n        case 'messageChatAddMembers': { // X added Y\n            // If the user joined the group by themselves, it appears as 'X added X' and that is not accurate.\n            if(message.sender_id['@type']=='messageSenderUser' && message.content.member_user_ids[0] == message.sender_id?.user_id) {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\">{__fmt('lng_action_user_joined', {from: null})}</span>\n                    </span>\n                );\n            }\n\n            const newMembers= __collection(false, message.content.member_user_ids.map(id=> getUserFullName(users[id])), false);\n            \n            return (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt(newMembers.length> 1 ? 'lng_action_add_users_many' : 'lng_action_add_user', {\n                        from: null,\n                        users: newMembers,\n                        user: newMembers\n                    })}\n                </span></span>\n            );\n        }\n\n        case 'messageChatChangePhoto': // Chat photo changed\n            // Telegram Desktop shows chat photo change events as 'Photo' instead of 'X changed group photo' or 'Channel photo changed'\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{__('lng_attach_photo')}</span> \n                </span>\n            );\n\n        case 'messageChatChangeTitle': // Chat was renamed\n            if(message.is_channel_post) {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\">{__fmt('lng_action_changed_title_channel', {title: message.content.title})}</span>\n                    </span>\n                );\n            } else {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\">{__fmt('lng_action_changed_title', {\n                            from: null,\n                            title: message.content.title\n                        })}</span>\n                    </span>\n                );\n            }\n\n        case 'messageChatDeleteMember': { // X removed Y\n            const deletedMember= users[message.content.user_id];\n            if( message.sender_id['@type']=='messageSenderUser' && deletedMember.id == message.sender_id.user_id ) { // Left the group\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_user_left', { from: null })}\n                    </span></span>\n                );\n            }\n            return (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt('lng_action_kick_user', {\n                        from: null,\n                        user: getUserFullName(deletedMember)\n                    })}\n                </span></span>\n            );\n        }\n\n        case 'messageChatDeletePhoto': // Chat photo was deleted\n            if(message.is_channel_post) {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\">{__('lng_action_removed_photo_channel')}</span>\n                    </span>\n                );\n            } else {\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_removed_photo', { from:  null })}\n                    </span></span>\n                );\n            }\n\n        case 'messageChatJoinByLink': // X joined the group via invite link\n            return (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt('lng_action_user_joined_by_link', { from: null })}\n                </span></span>\n            );\n\n        case 'messageChatJoinByRequest': // X was accepted to the group\n            return (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt('lng_action_user_joined_by_request', { from: null })}\n                </span></span>\n            );\n\n        case 'messageChatSetTheme':\n            if(message.content.theme_name){\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        <ServiceMessageIncludingYou \n                            message={message}\n                            lpString=\"lng_action_theme_changed\"\n                            lpString_you=\"lng_action_you_theme_changed\"\n                            params={{emoji: message.content.theme_name}}/>\n                    </span></span>\n                );\n            } else {\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        <ServiceMessageIncludingYou \n                            message={message}\n                            lpString=\"lng_action_theme_disabled\"\n                            lpString_you=\"lng_action_you_theme_disabled\"/>\n                    </span></span>\n                );\n            }\n\n        case 'messageChatSetTtl': { // Auto-delete / self-destruct timer changed\n            const ttlTimeUnit= {\n                86400: __('lng_ttl_about_duration1'), \n                604800: __('lng_ttl_about_duration2'),\n                2678400: __('lng_ttl_about_duration3'),\n            }[message.content.ttl];\n\n            if(message.is_channel_post) {\n                if(message.content.ttl) { // If TTL is disabled, it will be set to 0\n                    return (\n                        <span className={className}><span className=\"part-1\">\n                            {__fmt('lng_action_ttl_changed_channel', {\n                                duration: ttlTimeUnit\n                            })}\n                        </span></span>\n                    );\n                } else {\n                    return (\n                        <span className={className}><span className=\"part-1\">\n                            {__('lng_action_ttl_removed_channel')}\n                        </span></span>\n                    );\n                }\n            } else {\n                if(message.content.ttl) { // If TTL is disabled, it will be set to 0\n                    return (\n                        <span className={className}><span className=\"part-1\">\n                            <ServiceMessageIncludingYou \n                                message={message}\n                                lpString=\"lng_action_ttl_changed\"\n                                lpString_you=\"lng_action_ttl_changed_you\"\n                                params={{duration: ttlTimeUnit}}/>\n                        </span></span>\n                    );\n                } else {\n                    return (\n                        <span className={className}><span className=\"part-1\">\n                            <ServiceMessageIncludingYou \n                                message={message}\n                                lpString=\"lng_action_ttl_removed\"\n                                lpString_you=\"lng_action_ttl_removed_you\"/>\n                        </span></span>\n                    );\n                }\n            }\n        }\n\n        case 'messageChatUpgradeFrom': // It is too complicated to get basic group last message.\n        case 'messageChatUpgradeTo': // TODO: It's complicated, but it should be done.\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{_s__('lngd_action_upgrade_to_supergroup')}</span>\n                </span>\n            );\n\n        case 'messageContact': // Shared contact\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{__('lng_in_dlg_contact')}</span>\n                </span>\n            );\n\n        case 'messageContactRegistered': // X joined Telegram\n            return (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt('lng_action_user_registered', { from: null })}\n                </span></span>\n            );\n\n        case 'messageCustomServiceAction': // ¯\\_(ツ)_/¯\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{message.content.text}</span>\n                </span>\n            );\n\n        case 'messageAnimatedEmoji':\n        case 'messageDice': // Dice (🎲🎯🎳⚽🏀)\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{message.content.emoji}</span>\n                </span>\n            );\n\n        case 'messageDocument': // File/document\n            return (\n                <MayHaveCaption\n                    type={message.content.document.file_name} \n                    caption={message.content.caption} \n                    className={className}/>\n            );\n        \n        case 'messageExpiredPhoto': \n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{__('lng_ttl_photo_expired')}</span>\n                </span>\n            );\n        \n        case 'messageExpiredVideo':\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{__('lng_ttl_video_expired')}</span>\n                </span>\n            );\n        \n        case 'messageGame': // Game\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">🎮 {message.content.game.title}</span>\n                </span>\n            );\n\n        case 'messageGameScore': { // X scored {score} in {game}\n            // Text to use if game message is not available\n            const noGameTitleFallback= (\n                <span className={className}><span className=\"part-1\">\n                    <ServiceMessageIncludingYou \n                        message={message}\n                        lpString=\"lng_action_game_score_no_game\"\n                        lpString_you=\"lng_action_game_you_scored_no_game\"\n                        count={message.content.score}/>\n                </span></span>\n            );\n\n            // Get game message\n            const GameScoreWithTitle= React.lazy(()=> new Promise<{default: React.ComponentType}>(resolve=> {\n                message.content = message.content as TdApi.messageGameScore;\n                TdLib.sendQuery({\n                    '@type': 'getMessage',\n                    chat_id: chat.id,\n                    message_id: message.content.game_message_id\n                }).then(\n                    result=> { \n                        //eslint-disable-next-line react/display-name\n                        resolve({ default: ()=> {\n                            message.content = message.content as TdApi.messageGameScore;\n                            result = result as TdApi.message;\n                            result.content = result.content as TdApi.messageGame;\n\n                            return (\n                                <span className={className}><span className=\"part-1\">\n                                    <ServiceMessageIncludingYou \n                                        message={message}\n                                        lpString=\"lng_action_game_score\"\n                                        lpString_you=\"lng_action_game_you_scored\"\n                                        count={message.content.score}\n                                        params={{game: result.content.game.title}}/>\n                                </span></span>\n                            );\n                        }});\n                    },\n                    ()=> { // Failed\n                        //eslint-disable-next-line react/display-name\n                        resolve({ default: ()=> noGameTitleFallback});\n                    }\n                );\n            }));\n\n            return (\n                <React.Suspense fallback={noGameTitleFallback}>\n                    <GameScoreWithTitle/>\n                </React.Suspense>\n            );\n        }\n\n        case 'messageInvoice': // Invoice (a buyable product)\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{message.content.title}</span>\n                </span>\n            );\n\n        case 'messageLocation': // Location\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{__('lng_maps_point')}</span>\n                </span>\n            );\n\n        case 'messagePassportDataSent': { // You sent some Telegram passport data\n            const passportDataTypeToString= {\n                'passportElementTypeAddress':               'lng_passport_address',\n                'passportElementTypeBankStatement':         'lng_passport_address_statement',\n                'passportElementTypeDriverLicense':         'lng_passport_identity_license',\n                'passportElementTypeEmailAddress':          'lng_passport_email_title',\n                'passportElementTypeIdentityCard':          'lng_passport_identity_card',\n                'passportElementTypeInternalPassport':      'lng_passport_identity_internal',\n                'passportElementTypePassport':              'lng_passport_identity_passport',\n                'passportElementTypePassportRegistration':  'lng_passport_address_registration',\n                'passportElementTypePersonalDetails':       'lng_passport_personal_details',\n                'passportElementTypePhoneNumber':           'lng_passport_phone_title',\n                'passportElementTypeRentalAgreement':       'lng_passport_address_agreement',\n                'passportElementTypeTemporaryRegistration': 'lng_passport_address_temporary',\n                'passportElementTypeUtilityBill':           'lng_passport_address_bill',\n            };\n            const passportDataTypes= message.content.types.map(type=> (__(passportDataTypeToString[type['@type']] as LanguagePackKey) as string).toLowerCase());\n            return (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt('lng_action_secure_values_sent', {\n                        user: chat.title,\n                        documents: passportDataTypes.join(', ')\n                    })}\n                </span></span>\n            );\n        }\n\n        case 'messagePaymentSuccessful': { // You paid [real] money\n            // To be shown if invoice is not available\n            const noInvoiceTitleFallback= (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt('lng_action_payment_done', {\n                        amount: currencyAmountToString(message.content.currency as keyof typeof currencies, message.content.total_amount),\n                        user: chat.title\n                    })}\n                </span></span>\n            );\n\n            // Get invoice message\n            const PaymentInfoWithInvoiceTitle= React.lazy(()=>new Promise<{default:React.ComponentType}>(resolve=> {\n                message.content= message.content as TdApi.messagePaymentSuccessful;\n                TdLib.sendQuery({\n                    '@type': 'getMessage',\n                    chat_id: message.content.invoice_chat_id,\n                    message_id: message.content.invoice_message_id\n                }).then(\n                    result=> { \n                        //eslint-disable-next-line react/display-name\n                        resolve({ default: ()=> {\n                            message.content= message.content as TdApi.messagePaymentSuccessful;\n                            result= result as TdApi.message;\n                            result.content= result.content as TdApi.messageInvoice;\n                            return (\n                                <span className={className}><span className=\"part-1\">\n                                    {__fmt('lng_action_payment_done_for', {\n                                        amount: currencyAmountToString(message.content.currency as keyof typeof currencies, message.content.total_amount),\n                                        user: chat.title,\n                                        invoice: result.content.title\n                                    })}\n                                </span></span>\n                            );\n                        }});\n                    },\n                    ()=> { // Failed\n                        resolve({ default: ()=> noInvoiceTitleFallback});\n                    }\n                );\n            }));\n\n            return (\n                <React.Suspense fallback={noInvoiceTitleFallback}>\n                    <PaymentInfoWithInvoiceTitle/>\n                </React.Suspense>\n            );\n        }\n\n        case 'messagePhoto': // A photo\n            if(message.content.is_secret) { // Self-destructing photo, not implemented\n                if(message.is_outgoing) { // You sent it\n                    return (\n                        <span className={className}>\n                            <span className=\"part-1\">{__('lng_ttl_photo_sent')}</span>\n                        </span>\n                    );\n                } else { // You received it\n                    return (\n                        <span className={className}><span className=\"part-1\">\n                            {__fmt('lng_ttl_photo_received', { from: null })}\n                        </span></span>\n                    );\n                }\n            } else { // Normal photo\n                return (\n                    <MayHaveCaption\n                        type={__('lng_in_dlg_photo') as string}\n                        caption={message.content.caption} \n                        className={className}/>\n                );\n            }\n        \n        case 'messagePinMessage': { // Pinned message\n\n            // Get pinned message message\n            const PinnedMessageMessage= React.lazy(()=>new Promise<{default:React.ComponentType}>(resolve=> {\n                message.content= message.content as TdApi.messagePinMessage;\n                TdLib.sendQuery({\n                    '@type': 'getMessage',\n                    chat_id: chat.id,\n                    message_id: message.content.message_id\n                }).then(\n                    result=> { \n                        //eslint-disable-next-line react/display-name\n                        resolve({ default: ()=> {\n                            message.content= message.content as TdApi.messagePinMessage;\n                            result= result as TdApi.message;\n                            return (\n                                <span className={className}><span className=\"part-1\">\n                                    <MessagePinnedMessage message={result} from={null}/>\n                                </span></span>\n                            );\n                        }});\n                    },\n                    ()=> { // Failed\n                        //eslint-disable-next-line react/display-name\n                        resolve({ default: ()=> (\n                            <span className={className}><span className=\"part-1\">\n                                {__fmt('lng_action_pinned_media', {\n                                    from: null,\n                                    media: __('lng_deleted_message')\n                                })}\n                            </span></span>\n                        )});\n                    }\n                );\n            }));\n\n            return (\n                <React.Suspense fallback={\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_pinned_media', {\n                            from: null,\n                            media: __('lng_contacts_loading')\n                        })}\n                    </span></span>\n                }>\n                    <PinnedMessageMessage/>\n                </React.Suspense>\n            );\n        }\n        \n        case 'messagePoll':\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{message.content.poll.question}</span>\n                </span>\n            );\n        \n        // case 'messageProximityAlertTriggered': // TODO: Reproduce this message and implement it\n        // case 'messageScreenshotTaken':\n        case 'messageSticker': // Sticker\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">\n                        {__fmt('lng_in_dlg_sticker_emoji', {\n                            emoji: message.content.sticker.emoji\n                        })}\n                    </span>\n                </span>\n            );\n\n        case 'messageSupergroupChatCreate': // Supergroup created\n            if(message.is_channel_post) {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\">{__('lng_action_created_channel')}</span>\n                    </span>\n                );\n            } else {\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_created_chat', {\n                            from: null,\n                            title: message.content.title\n                        })}\n                    </span></span>\n                );\n            }\n\n        case 'messageText':\n            return (\n                <span className={className}>\n                    <span className=\"part-2\">{compileEntities(message.content.text, true)}</span>\n                </span>\n            );\n\n        case 'messageUnsupported': // Is not supported :(\n            return ( //TODO localize\n                <span className={className}>\n                    <span className=\"part-2\">{_s__('lngd_message_unsupported')}</span>\n                </span>\n            );\n        \n        case 'messageVenue': // Venue/location\n            return ( //TODO find the translation string\n                <span className={className}>\n                    <span className=\"part-1\">Location, </span>\n                    <span className=\"part-2\">{message.content.venue.title}</span>\n                </span>\n            );\n\n        case 'messageVideo': // Video\n            if(message.content.is_secret) { // Self-destructing photo, not implemented\n                if(message.is_outgoing) { // You sent it\n                    return (\n                        <span className={className}>\n                            <span className=\"part-1\">{__('lng_ttl_video_sent')}</span>\n                        </span>\n                    );\n                } else { // You received it\n                    return (\n                        <span className={className}><span className=\"part-1\">\n                            {__fmt('lng_ttl_video_received', { from: null })}\n                        </span></span>\n                    );\n                }\n            } else { // Normal photo\n                return (\n                    <MayHaveCaption\n                        type={__('lng_in_dlg_video') as string}\n                        caption={message.content.caption} \n                        className={className}/>\n                );\n            }\n\n        case 'messageVideoNote':\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{__('lng_in_dlg_video_message')}</span>\n                </span>\n            );\n\n        case 'messageVideoChatScheduled':\n            if(message.is_channel_post) {\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_group_call_scheduled_channel', {\n                            date: __fmt('lng_mediaview_date_time', {\n                                date: futureDayToString(message.content.start_date),\n                                time: timeToString(message.content.start_date)\n                            })\n                        })}\n                    </span></span>\n                );\n            } else {\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_group_call_scheduled_group', {\n                            from: null,\n                            date: __fmt('lng_mediaview_date_time', {\n                                date: futureDayToString(message.content.start_date),\n                                time: timeToString(message.content.start_date)\n                            })\n                        })}\n                    </span></span>\n                );\n            }\n\n        case 'messageVideoChatStarted':\n            if(message.is_channel_post) {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\">{__('lng_action_group_call_started_channel')}</span>\n                    </span>\n                );\n            } else {\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_group_call_started_group', { from: null })}\n                    </span></span>\n                );\n            }\n\n        case 'messageVideoChatEnded':\n            if(message.is_channel_post) {\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_group_call_finished', {\n                            duration: durationToString(message.content.duration)\n                        })}\n                    </span></span>\n                );\n            } else {\n                return (\n                    <span className={className}><span className=\"part-1\">\n                        {__fmt('lng_action_group_call_finished_group', {\n                            from: null,\n                            duration: durationToString(message.content.duration)\n                        })}\n                    </span></span>\n                );\n            }\n\n        case 'messageInviteVideoChatParticipants': {\n            const invitedMembers= __collection(true, message.content.user_ids.map(id=> // convert user IDs to names\n                getUserFullName(users[id])), false); // A, B, and C\n            return (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt((invitedMembers.length==1 ? 'lng_action_invite_user' : 'lng_action_invite_users_many'), {\n                        from: null,\n                        user: invitedMembers,\n                        users: invitedMembers,\n                        chat: __('lng_action_invite_user_chat')\n                    })}\n                </span></span>\n            );\n        }\n\n        case 'messageVoiceNote':\n            return (\n                <MayHaveCaption \n                    type={__('lng_in_dlg_audio') as string}\n                    caption={message.content.caption} \n                    className={className} />\n            );\n\n        case 'messageWebsiteConnected':\n            return (\n                <span className={className}><span className=\"part-1\">\n                    {__fmt('lng_action_bot_allowed_from_domain', {\n                        domain: message.content.domain_name\n                    })}\n                </span></span>\n            );\n\n        default:\n            return null;\n    }\n}\n\ntype MayHaveCaptionProps= {\n    /** Message type, e.g. 'GIF', 'Video' */\n    type: string,\n    /** Message caption, can be empty */\n    caption: TdApi.formattedText,\n\n    className: string,\n}\n\n/** If caption has a value, adds a comma to type and returns type */ \nfunction MayHaveCaption({type, caption, className}: MayHaveCaptionProps): JSX.Element {\n    if(caption?.text) type+=',';\n    return (\n        <span className={className}>\n            <span className=\"part-1\">{type}</span> <span className=\"part-2\">{compileEntities(caption, true)}</span>\n        </span>\n    );\n}\n\ntype ServiceMessageIncludingYouProps= {\n    /** The message object */\n    message: TdApi.message,\n    /** Language pack string key for the service message */\n    lpString: LanguagePackStringName,\n    /** Language pack string key for the service message if the service message is outgoing */\n    lpString_you: LanguagePackStringName,\n    /** Parameters for the language pack string */\n    params?: {[key: string]: React.ReactNode|React.ReactNode[]},\n    /** If provided, the language pack strings will be treated as pluralized */\n    count?: number,\n}\n\nfunction ServiceMessageIncludingYou({message, lpString, lpString_you, params={}, count=undefined}: ServiceMessageIncludingYouProps): JSX.Element {\n    const string= message.is_outgoing ? lpString_you : lpString;\n\n    if(count==undefined) {\n        return <>{__fmt(string as Exclude<LanguagePackStringName, LanguagePackStringNamePluralized>, {\n            from: null,\n            ...params\n        })}</>;\n    } else {\n        return <>{__pl(string, count, {\n            from: null,\n            ...params\n        })}</>;\n    }\n}\n","import React from 'react';\nimport TdApi from '../../../TdWeb/td_api';\nimport { timeToString } from '../../../time-tostring';\nimport ProfilePhoto, { getChatTypeId, getIdColorCode } from '../../../ui/components/profile-photo';\nimport { bubble_tail, dialogs_sending, history_received, history_sent } from '../../../ui/icon/icons';\nimport { getChatNoCache } from '../../chat-store';\nimport { getMessageStatus } from '../../message-misc';\nimport { getUserFullName } from '../../user-misc';\nimport { ProcessedSingleMessage } from '../processHistory';\nimport usersStore, { UsersStoreState } from '../../users-store';\n\nimport './message-containers.scss';\nimport __, { __fmt } from '../../../language-pack/language-pack';\nimport { messageStore } from '../../message-store';\nimport TdLib from '../../../TdWeb/tdlib';\nimport MessageSummaryWithIcon from '../message-summary-withicon';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function ServiceMessageBubble(props: React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>): JSX.Element {\n    return (\n        <div className=\"history-service-message\" {...props}/>\n    );\n}\n\nexport function ServiceMessage({children}: {children: React.ReactNode|React.ReactNode[]}): JSX.Element {\n    return (\n        <div className=\"history-message service\">\n            <ServiceMessageBubble>\n                {children}\n            </ServiceMessageBubble>\n        </div>\n    );\n}\n\ntype MessageBubbleProps= {\n    children: React.ReactNode | React.ReactNode[],\n    showTail?: boolean,\n    beforeBubble?: React.ReactNode | React.ReactNode[],\n}\nexport function MessageBubble({ children, beforeBubble=null, showTail=true, ...rest}: MessageBubbleProps): JSX.Element {\n    return (\n        <div className=\"bubble-container\">\n            {beforeBubble}\n            <div className={`bubble ${showTail ? 'has-tail' : ''}`} {...rest}>\n                {children}\n                {showTail && <span className=\"tail\" dangerouslySetInnerHTML={{__html: bubble_tail}}/>}\n            </div>\n        </div>\n    );\n}\n\n\ntype BubbleMessageProps= {\n    message: ProcessedSingleMessage,\n    chat: TdApi.chat,\n    users: {[key: number]: TdApi.user},\n    children: React.ReactNode | React.ReactNode[],\n}\nexport function BubbleMessage({message, chat, users, children}: BubbleMessageProps): JSX.Element {\n    let sender= null;\n    let senderId= 0;\n    let photo= null;\n    let usesPhoto= false;\n    if(chat.type['@type'] === 'chatTypeSupergroup' && chat.type.is_channel) {\n        sender= chat.title;\n    } \n    else if(chat.type['@type'] === 'chatTypeSupergroup' || \n            chat.type['@type'] === 'chatTypeBasicGroup') {\n        usesPhoto= !message.is_outgoing;\n        switch(message.sender_id['@type']) {\n            case 'messageSenderUser':\n                if(!message.is_outgoing) {\n                    const user=users[message.sender_id.user_id];\n                    sender= getUserFullName(user);\n                    senderId= getIdColorCode(message.sender_id.user_id);\n                    photo= (!message.hide_tail) &&\n                            <ProfilePhoto \n                                id={user.id} \n                                name={sender} \n                                disableSavedMessages={true} \n                                photo={user.profile_photo?.small}\n                            />;\n                }\n                break;\n            case 'messageSenderChat': {\n                const chat: TdApi.chat= getChatNoCache(message.sender_id.chat_id) as TdApi.chat;\n                sender= chat.title;\n                photo= (!message.hide_tail) &&\n                        <ProfilePhoto \n                            id={getChatTypeId(chat)} \n                            name={sender}\n                            disableSavedMessages={true} \n                            photo={chat.photo?.small}\n                        />;\n            }\n        }\n    }\n    return (\n        <div className={'history-message' + \n                        ((message.is_outgoing && !message.is_channel_post) ? ' outgoing' : '') +\n                        (message.hide_sender_name? ' small-margin' : '')}>\n\n            <MessageBubble \n                beforeBubble={usesPhoto && <div className=\"profile-photo-c\">{photo}</div>} \n                showTail={!message.hide_tail}>\n\n                <div className=\"message-sender\">\n                    {sender && (!message.hide_sender_name) && (\n                        <span className={`color_${senderId}`}>{sender}</span>\n                    )}\n                    {message.via_bot_user_id? (\n                        <span className=\"color_0\">\n                            {__fmt('lng_inline_bot_via', {\n                                inline_bot: '@'+(usersStore.getState()[message.via_bot_user_id] as TdApi.user).username\n                            })}\n                        </span>\n                    ): null}\n                </div>\n\n                {message.reply_to_message_id ? <MessageReplyTo message={message} users={users}/>: null}\n                {children}\n                <div className=\"after\"/>\n            </MessageBubble>\n        </div>\n    );\n}\n\ntype MessageFooterProps= {\n    message: TdApi.message,\n    chat: TdApi.chat,\n}\nexport function MessageFooter({message, chat}: MessageFooterProps): JSX.Element {\n    let tick= null;\n    switch(getMessageStatus(chat, message)) {\n        case 'sending':\n            tick= <span className=\"tick sending\" dangerouslySetInnerHTML={{__html: dialogs_sending}}/>;\n            break;\n        case 'sent':\n            tick= <span className=\"tick sent\" dangerouslySetInnerHTML={{__html: history_sent}}/>;\n            break;\n        case 'seen':\n            tick= <span className=\"tick seen\" dangerouslySetInnerHTML={{__html: history_received}}/>;\n    }\n    return (\n        <div className=\"footer\">\n            <div className=\"text\">{timeToString(message.date)}</div>\n            {(!message.is_channel_post) && tick}\n        </div>\n    );\n}\n\ntype MessageReplyToProps= {\n    message: TdApi.message,\n    users: UsersStoreState\n}\n\nexport function MessageReplyTo({message, users}: MessageReplyToProps): JSX.Element|null {\n    const [replyMessage, setReplyMessage]= React.useState<TdApi.message|-1|0>(0);\n\n    const rMessage= ((message.reply_in_chat_id == message.chat_id) && messageStore.getState().messages[message.reply_to_message_id]) || replyMessage;\n\n    React.useEffect(() => {\n        function requestHandler(result: TdApi.message|TdApi.error) {\n            if(result['@type'] === 'error') {\n                setReplyMessage(-1);\n            } else {\n                setReplyMessage(result);\n            }\n        }\n\n        if((!rMessage) && replyMessage==0) {\n            TdLib.sendQuery({\n                '@type': 'getMessage',\n                chat_id: message.reply_in_chat_id,\n                message_id: message.reply_to_message_id\n            }).then(requestHandler, requestHandler);\n        }\n    }, []);\n\n    if( typeof rMessage != 'number') {\n        const chat= getChatNoCache(message.reply_in_chat_id) as TdApi.chat;\n        const sender= rMessage.sender_id['@type'] === 'messageSenderUser' ?\n            getUserFullName(users[rMessage.sender_id.user_id]):\n            (getChatNoCache(rMessage.sender_id.chat_id) as TdApi.chat).title;\n\n        return (\n            <div className=\"reply-to\">\n                <div className=\"reply-sender\">{sender}</div>\n                <div className=\"text-container\">\n                    <MessageSummaryWithIcon chat={chat} message={rMessage} className='text' users={users}/>\n                </div>\n            </div>\n        );\n    }\n    else {\n        return (\n            <div className=\"reply-to\">\n                <div className=\"placeholder\">\n                    { rMessage==-1 ? __('lng_deleted_message') : __('lng_contacts_loading')}\n                </div>\n            </div>\n        );\n    }\n}","import React from 'react';\nimport './title.scss';\nimport __, { __pl } from '../../../../language-pack/language-pack';\nimport ThreeDotsMenu from '../../../../ui/menu/three-dots-menu';\nimport Menu from '../../../../ui/menu/menu';\nimport options from '../../../../TdWeb/options';\nimport IconButton from '../../../../ui/elements/icon-button';\nimport { info_back, top_bar_group_call, top_bar_profile, top_bar_search } from '../../../../ui/icon/icons';\nimport { chatTitleOrDeletedAccount } from '../../../chat-misc';\nimport { lastSeenToString } from '../../../../time-tostring';\nimport ProfilePhoto, { getChatTypeId } from '../../../../ui/components/profile-photo';\nimport chatStore from '../../../chat-store';\nimport { ChatSectionContentProps } from '../chat-section';\nimport TdApi from '../../../../TdWeb/td_api';\nimport { menu_report } from '../../../../ui/icon/menu/menu';\n\nexport default function TitleHeader(props: ChatSectionContentProps): JSX.Element {\n    return (\n        <div className=\"title-bar\">\n            {props.singleColumnLayout && (\n                <IconButton icon={info_back} className=\"icon-button back\" onClick={()=>{\n                    chatStore.dispatch({\n                        type: 'SELECT_CHAT',\n                        chat_id: -1\n                    });\n                }}/>\n            )}\n            <div className=\"title-bar-left\">\n                {props.singleColumnLayout && (\n                    <ProfilePhoto \n                        id={getChatTypeId(props.chat)} \n                        name={props.chat.title} \n                        photo={props.chat.photo?.small}\n                    />\n                )}\n                <div className=\"text\">\n                    <div className=\"title\">\n                        {options['my_id'] == props.chat.id && (__('lng_saved_messages'))}\n                        {options['replies_bot_chat_id'] == props.chat.id && (__('lng_replies_messages'))}\n                        {options['my_id'] != props.chat.id && options['replies_bot_chat_id'] != props.chat.id && (chatTitleOrDeletedAccount(props.chat))}\n                    </div>\n                    <SubText {...props}/>\n                </div>\n            </div>\n            <div className=\"title-bar-right\">\n                {/*TODO Missing item: Call button for private chats, depends on userFullInfo */}\n                {props.chat.video_chat.group_call_id != 0 && (\n                    <IconButton icon={top_bar_group_call} className=\"icon-button voice-chat\"/>\n                )}\n                <IconButton icon={top_bar_search}/>\n                <IconButton icon={top_bar_profile}/>\n                <ThreeDotsMenu>\n                    <Menu.MenuContents>\n                        {props.chat.can_be_reported && <Menu.MenuItem icon={menu_report}>{__('lng_report_button')}</Menu.MenuItem>}\n                    </Menu.MenuContents>\n                </ThreeDotsMenu>\n            </div>\n        </div>\n    );\n}\n\nfunction SubText({chat, user, basicGroup, supergroup}: ChatSectionContentProps): JSX.Element|null {\n    if(supergroup) {\n        return (\n            <div className=\"info\">\n                {__pl((chat.type as TdApi.chatTypeSupergroup).is_channel ? 'lng_chat_status_subscribers' : 'lng_chat_status_members', supergroup.member_count)}\n            </div>\n        );\n    } \n    else if(basicGroup) {\n        return (\n            <div className=\"info\">\n                {__pl('lng_chat_status_members', basicGroup.member_count)}\n            </div>\n        );\n    } \n    else if(user)\n    {\n        if (chat.id == options['my_id'] || chat.id == options['replies_bot_chat_id']) {\n            return null;\n        }\n        if (chat.id == options['telegram_service_notifications_chat_id']) {\n            // Service notifications\n            return (\n                <div className=\"info\">\n                    {__('lng_status_service_notifications')}\n                </div>\n            );\n        }\n        if (user.is_support) {\n            return (\n                <div className=\"info\">\n                    {__('lng_status_support')}\n                </div>\n            );\n        }\n        if (user.type['@type'] == 'userTypeBot') {\n            return (\n                <div className=\"info\">\n                    {__('lng_status_bot')}\n                </div>\n            );\n        }\n\n        // In this case, He is a normal user, So app should show status\n        return (\n            <div className={`info ${user.status['@type'] == 'userStatusOnline' ? 'active' : ''}`}>\n                {lastSeenToString(user.status)}\n            </div>\n        );\n    }\n\n    return null;\n}\n","import {createStore, Store} from 'redux';\nimport TdLib from '../TdWeb/tdlib';\nimport TdApi from '../TdWeb/td_api';\n\nexport type BasicGroupStoreState = {\n    [id: number]: TdApi.basicGroup\n}\n\nexport type BasicGroupStoreAction = {\n    type: 'UPD_BASIC_GROUP',\n    basic_group: TdApi.basicGroup\n}\n\nfunction reducer(state: BasicGroupStoreState = {}, action: BasicGroupStoreAction): BasicGroupStoreState {\n    switch (action.type) {\n        case 'UPD_BASIC_GROUP':\n            return {\n                ...state,\n                [action.basic_group.id]: action.basic_group\n            };\n        default:\n            return state;\n    }\n}\n\nconst basicGroupStore= createStore<BasicGroupStoreState, BasicGroupStoreAction, any, any>(reducer) as Store<BasicGroupStoreState, BasicGroupStoreAction>;\nexport default basicGroupStore;\n\nTdLib.registerUpdateHandler<TdApi.updateBasicGroup>('updateBasicGroup', (update) => {\n    basicGroupStore.dispatch({\n        type: 'UPD_BASIC_GROUP',\n        basic_group: update.basic_group\n    });\n});","import React from 'react';\nimport RippleEffect, { handleMyMouseEventsFunction, RippleEffectProps_AutoSettable } from '../../../../ui/elements/ripple-effect';\nimport './compose-button.scss';\n\ntype ComposeButtonProps = {\n    onClick: (e: React.SyntheticEvent<HTMLButtonElement>) => void;\n    children: React.ReactNode;\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    [key: string]: any;\n};\n\nexport default function ComposeButton({ onClick, children, ...rest }: ComposeButtonProps): JSX.Element {\n    const ripple= React.useState<RippleEffectProps_AutoSettable>({state: 'off'});\n    const rippleEvents= handleMyMouseEventsFunction(ripple);\n    return (\n        <button className=\"compose-button\" onClick={onClick} {...rippleEvents} {...rest}>\n            <RippleEffect {...ripple[0]} color=\"var(--theme-color-historyComposeButtonBgRipple)\"/>\n            <div className=\"content\">{children}</div>\n        </button>\n    );\n}","import React from 'react';\nimport './footer.scss';\nimport ComposeButton from './compose-button';\nimport __ from '../../../../language-pack/language-pack';\nimport options from '../../../../TdWeb/options';\nimport { ChatSectionContentProps } from '../chat-section';\n\nexport function ChatFooter({user, supergroup}: ChatSectionContentProps): JSX.Element {\n    return (\n        <div className=\"footer\">\n            {(user?.username || supergroup?.username) && ( // As DIBgram has many missing features, we can show an 'OPEN WITH' button so the user can open the chat with another client\n                <ComposeButton onClick={()=> {\n                    window.open((options['t_me_url'] as string) + (user?.username || supergroup?.username), '_blank');\n                }}>\n                    {__('lng_media_open_with')}\n                </ComposeButton>\n            )}\n            {/* TODO: Render different footers based on chat. (e.g. compose area, 'mute', 'unmute', 'unblock', etc.) Compose footer must be on a separate file. */}\n        </div>\n    );\n}\n","import { ProgressRing } from 'progress-ring';\nimport React from 'react';\nimport TdLib from '../../TdWeb/tdlib';\nimport TdApi from '../../TdWeb/td_api';\nimport { history_file_cancel, history_file_download } from '../icon/icons';\nimport './download-circle.scss';\n\ntype DownloadCircleProps = {\n    file: TdApi.file,\n    priority?: number,\n}\n\nexport default function DownloadCircle({file, priority=1}: DownloadCircleProps): JSX.Element|null {\n\n    function downloadFile() {\n        TdLib.sendQuery({\n            '@type': 'downloadFile',\n            'file_id': file.id,\n            'priority': priority,\n            'offset': 0,\n            'limit': 0,\n            'synchronous': false\n        }).then(file=> {\n            TdLib.handleUpdate({ // TDLib will not sent an update when file.local.is_downloading_active changes. We can inject one here.\n                '@type': 'updateFile',\n                file\n            });\n        });\n    }\n\n    function cancelDownloadFile() {\n        TdLib.sendQuery({\n            '@type': 'cancelDownloadFile',\n            'file_id': file.id\n        });\n    }\n\n    if ((!file.local.is_downloading_active) && (!file.local.is_downloading_completed)) {\n        return (\n            <div className='download-circle-container' onClick={downloadFile}>\n                <div className=\"download-circle\">\n                    <div className=\"icon download\" dangerouslySetInnerHTML={ {__html: history_file_download} }/>\n                </div>\n            </div>\n        );\n    } \n    else if(file.local.is_downloading_active) {\n        return (\n            <div className='download-circle-container' onClick={cancelDownloadFile}>\n                <div className=\"download-circle\">\n                    <div className=\"icon cancel\" dangerouslySetInnerHTML={ {__html: history_file_cancel} }/>\n                    <ProgressRing \n                        size={40}\n                        caps='round' \n                        lineWidth={3} \n                        percent={file.local.downloaded_size / file.expected_size * 99 + 1} \n                        transitionDuration={300} \n                        spin\n                        trackColor=\"transparent\"\n                        progressColor=\"var(--theme-color-historyFileThumbIconFg)\"\n                    /> \n                </div>\n            </div>\n        );\n    }\n    return null;\n}","import React from 'react';\nimport TdApi from '../../TdWeb/td_api';\nimport { getFileContent, blobToUrl } from '../../TdWeb/file';\nimport './photo.scss';\nimport DownloadCircle from './download-circle';\nimport TdLib from '../../TdWeb/tdlib';\n\nexport function getBestPhotoSize(sizes: TdApi.photoSize[], minWidth = 400): TdApi.photoSize {\n    // Get smallest photo size with width >= 400\n    const sorted= sizes.sort((a, b) => a.width - b.width);\n    return sorted.find(s => s.width >= minWidth) || sorted[0];\n}\n\ntype PhotoProps = {\n    photo: TdApi.photo,\n    priority?: number,\n    getBestSize?: typeof getBestPhotoSize,\n    onClick?: () => void,\n}\n\nexport default function Photo({photo, priority=1, getBestSize= getBestPhotoSize, onClick}: PhotoProps): JSX.Element {\n    const [blob, setBlob] = React.useState<Blob | null>(null);\n    const [photoSize, setPhotoSize] = React.useState<TdApi.photoSize | null>(null);\n\n    React.useEffect(() => {\n        if (photo.sizes.length > 0) {\n            const size = getBestSize(photo.sizes);\n            const fl = size.photo;\n            setPhotoSize(size);\n            TdLib.sendQuery({\n                '@type': 'getFile',\n                file_id: fl.id\n            }).then(f=> setPhotoSize(s=> (s? {...s, photo: f}: null)));\n        }\n    }, [photo]);\n\n    React.useEffect(() => {\n        if(photoSize?.photo.local.is_downloading_completed) {\n            TdLib.sendQuery({\n                '@type': 'readFilePart',\n                file_id: photoSize.photo.id\n            }).then(part => setBlob(part.data));\n        } else {\n            setBlob(null);\n        }\n    }, [photoSize?.photo]);\n\n    React.useEffect(() => {\n        const hid = TdLib.registerUpdateHandler<TdApi.updateFile>('updateFile', update => {\n            console.log('updateFile');\n            if(update.file.id === photoSize?.photo.id) {\n                console.log('correct id');\n                setPhotoSize(s=> (s? {...s, photo: update.file}: null));\n            }\n        });\n        return ()=> {\n            TdLib.unRegisterUpdateHandler<TdApi.updateFile>('updateFile', hid);\n        };\n    }, [photoSize?.photo.id]);\n\n    if(photoSize) {\n        let width = photoSize.width, height = photoSize.height;\n        if(width > 430) {\n            height = height * (430 / width);\n            width = 430;\n        }\n        if(height > 430) {\n            width = width * (430 / height);\n            height = 430;\n        }\n\n        if (!blob) {\n            if(photo.minithumbnail) {\n                return (\n                    <div className='history-photo' onClick={onClick}>\n                        <img \n                            src={`data:image/jpeg;base64,${photo.minithumbnail.data}`} \n                            alt='thumbnail' \n                            className='thumbnail behind'\n                            height={height}\n                            width={width}\n                        />\n                        <img \n                            src={`data:image/jpeg;base64,${photo.minithumbnail.data}`} \n                            alt='thumbnail' \n                            className='thumbnail'\n                            height={height}\n                            width={width}\n                        />\n                        {/**\n                         * When a blur is applied, the area around the border becomes dark. \n                         * We can fix it by adding an non-blurred copy of the image behind it.\n                         */}\n                        <DownloadCircle file={photoSize.photo} priority={priority}/>\n                    </div>\n                );\n            } else {\n                return (\n                    <div className='history-photo' onClick={onClick}>\n                        <DownloadCircle file={photoSize.photo} priority={priority}/>\n                    </div>\n                );\n            }\n        } else {\n            return (\n                <div className='history-photo'>\n                    <img \n                        src={blobToUrl(blob)} \n                        alt='thumbnail'\n                        onClick={onClick}\n                    />\n                </div>\n            );\n        }\n    } else {\n        return <></>;\n    }\n}","import React from 'react';\nimport TdApi from '../../TdWeb/td_api';\nimport { getFileContent, blobToUrl } from '../../TdWeb/file';\nimport { getBestPhotoSize } from './photo';\n\ntype ThumbnailProps = {\n    photo: TdApi.photo,\n    priority?: number,\n}\n\nexport default function Thumbnail({photo, priority=1}: ThumbnailProps): JSX.Element {\n    const [blob, setBlob] = React.useState<Blob | null>(null);\n    React.useEffect(() => {\n        const size= getBestPhotoSize(photo.sizes, 50); // Use the smallest size\n        getFileContent(size.photo, priority).then(filePart => {\n            setBlob(filePart.data);\n        });\n    }, [photo]);\n\n    if (!blob) {\n        if(photo.minithumbnail) {\n            return (\n                <img className='photo-thumbnail' src={`data:image/jpeg;base64,${photo.minithumbnail.data}`} alt='thumbnail'/>\n            );\n        } else {\n            return <></>;\n        }\n    } else {\n        return (\n            <img className='photo-thumbnail' src={blobToUrl(blob)} alt='thumbnail'/>\n        );\n    }\n        \n}","import React from 'react';\nimport usersStore, { UsersStoreAction, UsersStoreState } from './users-store';\nimport { Provider, connect } from 'react-redux';\nimport { Dispatch } from 'redux';\n/**\n * A React higher order component that provides the `users` prop to the wrapped component.\n */\nexport default function withUsers<P extends {users: UsersStoreState, dispatch?: Dispatch<UsersStoreAction>}>(Component: React.ComponentType<P>): React.ComponentType<Omit<P, 'users'|'dispatch'>> {\n    const WrappedComponent= connect<{users: UsersStoreState}, unknown, Omit<P, 'users'|'dispatch'>, UsersStoreState>(users => ({users}))(Component as any);\n    return function WithUsers(props) {\n        return (\n            <Provider store={usersStore}>\n                <WrappedComponent {...props} />\n            </Provider>\n        );\n    };\n}\n","import React from 'react';\nimport TdApi from '../../../../TdWeb/td_api';\nimport Photo from '../../../../ui/components/photo';\nimport Thumbnail from '../../../../ui/components/thumbnail';\nimport withUsers from '../../../users-wrapper';\nimport compileEntities from '../entities';\nimport { MessageProps } from '../message';\nimport { BubbleMessage, MessageFooter } from '../message-containers';\nimport './messageText.scss';\n\nexport default function MessageText({message, chat}: MessageProps): JSX.Element {\n    const messageContent= (message.content as TdApi.messageText);\n    \n    const BubbleMsg= withUsers(BubbleMessage);\n    return (\n        <BubbleMsg message={message} chat={chat}>\n            <div className={`content text ${message.can_be_saved?'':'no-save'}`}>\n                {compileEntities(messageContent.text)}\n                {messageContent.web_page && <LinkPreview preview={messageContent.web_page} />}\n                <MessageFooter message={message} chat={chat}/>\n            </div>\n        </BubbleMsg>\n    );\n}\n\ntype LinkPreviewProps = {\n    preview: TdApi.webPage;\n}\nfunction LinkPreview({preview}: LinkPreviewProps): JSX.Element {\n    return (\n        <div className={`link-preview ${(preview.type==='article' && preview.photo && preview.instant_view_version===0)? 'has-side-photo':''}`}>\n            <div className=\"texts\">\n                <div className=\"site-name\">{preview.site_name}</div>\n                <div className=\"title\">{preview.title}</div>\n                {compileEntities(preview.description)}\n            </div>\n            {(preview.type=='photo' && preview.photo) && <Photo photo={preview.photo} priority={1}/>}\n            {(preview.type=='article' && preview.photo) && (preview.instant_view_version ? \n                <Photo photo={preview.photo} priority={1} onClick={()=> window.open(preview.url)}/> :\n                <Thumbnail photo={preview.photo} priority={1}/>\n            )}\n        </div>\n    );\n}","import React from 'react';\nimport { _s__ } from '../../../../language-pack/language-pack';\nimport { MessageProps } from '../message';\nimport MessageText from './messageText';\n\nexport function MessageUnsupported({message, chat, users}: MessageProps): JSX.Element {\n    return (\n        <MessageText chat={chat} users={users} message={{\n            ...message,\n            content: {\n                '@type': 'messageText',\n                text: {\n                    '@type': 'formattedText',\n                    text: _s__('lngd_message_unsupported'),\n                    entities: [],\n                },\n            }\n        }}/>\n    );\n}","import React from 'react';\nimport TdApi from '../../../TdWeb/td_api';\nimport { UsersStoreState } from '../../users-store';\nimport { ProcessedSingleMessage } from '../processHistory';\nimport MessageBasicGroupChatCreate from './types/messageBasicGroupChatCreate';\nimport MessageChatAddMembers from './types/messageChatAddMembers';\nimport MessageChatChangeTitle from './types/messageChatChangeTitle';\nimport MessageChatDeleteMember from './types/messageChatDeleteMember';\nimport MessageChatDeletePhoto from './types/messageChatDeletePhoto';\nimport MessageChatJoinByLink from './types/messageChatJoinByLink';\nimport MessageChatJoinByRequest from './types/messageChatJoinByRequest';\nimport MessageChatSetTheme from './types/messageChatSetTheme';\nimport MessageChatSetTtl from './types/messageChatSetTtl';\nimport MessageContactRegistered from './types/messageContactRegistered';\nimport MessageCustomServiceAction from './types/messageCustomServiceAction';\nimport MessageExpiredPhoto from './types/messageExpiredPhoto';\nimport MessageExpiredVideo from './types/messageExpiredVideo';\nimport MessageGameScore from './types/messageGameScore';\nimport MessageInviteVideoChatParticipants from './types/messageInviteVideoChatParticipants';\nimport MessagePassportDataSent from './types/messagePassportDataSent';\nimport MessagePaymentSuccessful from './types/messagePaymentSuccessful';\nimport MessagePinMessage from './types/messagePinMessage';\nimport MessageSupergroupChatCreate from './types/messageSupergroupChatCreate';\nimport MessageText from './types/messageText';\nimport { MessageUnsupported } from './types/messageUnsupported';\nimport MessageVideoChatEnded from './types/messageVideoChatEnded';\nimport MessageVideoChatScheduled from './types/messageVideoChatScheduled';\nimport MessageVideoChatStarted from './types/messageVideoChatStarted';\nimport MessageWebsiteConnected from './types/messageWebsiteConnected';\n\nconst messageTypes = {\n    'messageText': MessageText,\n    'messageExpiredPhoto': MessageExpiredPhoto,\n    'messageExpiredVideo': MessageExpiredVideo,\n    'messageVideoChatScheduled': MessageVideoChatScheduled,\n    'messageVideoChatStarted': MessageVideoChatStarted,\n    'messageVideoChatEnded': MessageVideoChatEnded,\n    'messageInviteVideoChatParticipants': MessageInviteVideoChatParticipants,\n    'messageBasicGroupChatCreate': MessageBasicGroupChatCreate,\n    'messageSupergroupChatCreate': MessageSupergroupChatCreate,\n    'messageChatChangeTitle': MessageChatChangeTitle,\n    'messageChatDeletePhoto': MessageChatDeletePhoto,\n    'messageChatAddMembers': MessageChatAddMembers,\n    'messageChatJoinByLink': MessageChatJoinByLink,\n    'messageChatJoinByRequest': MessageChatJoinByRequest,\n    'messageChatDeleteMember': MessageChatDeleteMember,\n    'messageChatUpgradeTo': ()=> null,\n    'messageChatUpgradeFrom': ()=> null,\n    'messagePinMessage': MessagePinMessage,\n    'messageChatSetTheme': MessageChatSetTheme,\n    'messageChatSetTtl': MessageChatSetTtl,\n    'messageCustomServiceAction': MessageCustomServiceAction,\n    'messageGameScore': MessageGameScore,\n    'messagePaymentSuccessful': MessagePaymentSuccessful,\n    'messageContactRegistered': MessageContactRegistered,\n    'messageWebsiteConnected': MessageWebsiteConnected,\n    'messagePassportDataSent': MessagePassportDataSent\n};\n\nexport type MessageProps = {\n    message: ProcessedSingleMessage\n    chat: TdApi.chat\n    users: UsersStoreState\n};\nexport const Message= React.memo(function Message({message, chat, users}: MessageProps): JSX.Element {\n    const MessageComponent= messageTypes[message.content['@type'] as keyof typeof messageTypes] || MessageUnsupported;\n    return <MessageComponent message={message} chat={chat} users={users}/>;\n});","import React from 'react';\nimport __ from '../../../../language-pack/language-pack';\nimport { ServiceMessage } from '../message-containers';\n\nexport default function MessageExpiredPhoto(): JSX.Element {\n    return (\n        <ServiceMessage>\n            {__('lng_ttl_photo_expired')}\n        </ServiceMessage>\n    );\n}","import React from 'react';\nimport __ from '../../../../language-pack/language-pack';\nimport { ServiceMessage } from '../message-containers';\n\nexport default function MessageExpiredVideo(): JSX.Element {\n    return (\n        <ServiceMessage>\n            {__('lng_ttl_video_expired')}\n        </ServiceMessage>\n    );\n}","import React from 'react';\nimport { __fmt } from '../../../../language-pack/language-pack';\nimport { futureDayToString, timeToString } from '../../../../time-tostring';\nimport { SenderFullName } from '../../message-summary-noicon';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\n\n\nexport default function MessageVideoChatScheduled({message, chat, users}: MessageProps): JSX.Element {\n    if(message.content['@type'] !== 'messageVideoChatScheduled') {\n        throw new Error('Message is not messageVideoChatScheduled');\n    }\n\n    if(message.is_channel_post) {\n        return (\n            <ServiceMessage>\n                {__fmt('lng_action_group_call_scheduled_channel', {\n                    date: __fmt('lng_mediaview_date_time', {\n                        date: futureDayToString(message.content.start_date),\n                        time: timeToString(message.content.start_date)\n                    })\n                })}\n            </ServiceMessage>\n        );\n    } else {\n        return (\n            <ServiceMessage>\n                {__fmt('lng_action_group_call_scheduled_group', {\n                    from: <SenderFullName message={message} chat={chat} users={users}/>,\n                    date: __fmt('lng_mediaview_date_time', {\n                        date: futureDayToString(message.content.start_date),\n                        time: timeToString(message.content.start_date)\n                    })\n                })}\n            </ServiceMessage>\n        );\n    }\n}","import React from 'react';\nimport __, { __fmt } from '../../../../language-pack/language-pack';\nimport { SenderFullName } from '../../message-summary-noicon';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\n\nexport default function MessageVideoChatStarted({message, chat, users}: MessageProps): JSX.Element {\n    if(message.is_channel_post) {\n        return (\n            <ServiceMessage>\n                <span className=\"part-1\">{__('lng_action_group_call_started_channel')}</span>\n            </ServiceMessage>\n        );\n    } else {\n        return (\n            <ServiceMessage>\n                {__fmt('lng_action_group_call_started_group', {\n                    from: <SenderFullName message={message} chat={chat} users={users}/>\n                })}\n            </ServiceMessage>\n        );\n    }\n}","import React from 'react';\nimport { __fmt } from '../../../../language-pack/language-pack';\nimport { durationToString } from '../../../../time-tostring';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\nimport { SenderFullName } from '../../message-summary-noicon';\n\nexport default function MessageVideoChatEnded({message, chat, users}: MessageProps): JSX.Element {\n    if(message.content['@type'] !== 'messageVideoChatEnded') {\n        throw new Error('Message is not messageVideoChatEnded');\n    }\n    if(message.is_channel_post) {\n        return (\n            <ServiceMessage>\n                {__fmt('lng_action_group_call_finished', {\n                    duration: durationToString(message.content.duration)\n                })}\n            </ServiceMessage>\n        );\n    } else {\n        return (\n            <ServiceMessage>\n                {__fmt('lng_action_group_call_finished_group', {\n                    from: <SenderFullName message={message} chat={chat} users={users}/>,\n                    duration: durationToString(message.content.duration)\n                })}\n            </ServiceMessage>\n        );\n    }\n}","import React from 'react';\nimport __, { __collection, __fmt } from '../../../../language-pack/language-pack';\nimport { getUserFullName } from '../../../user-misc';\nimport { SenderFullName } from '../../message-summary-noicon';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\n\nexport default function MessageInviteVideoChatParticipants({message, chat, users}: MessageProps): JSX.Element {\n    if(message.content['@type'] != 'messageInviteVideoChatParticipants') {\n        throw new Error('Message is not messageInviteVideoChatParticipants');\n    }\n    const invitedMembers= __collection(true, message.content.user_ids.map(id=> // convert user IDs to names\n        getUserFullName(users[id])), false); // A, B, and C\n    return (\n        <ServiceMessage>\n            {__fmt((invitedMembers.length==1 ? 'lng_action_invite_user' : 'lng_action_invite_users_many'), {\n                from: <SenderFullName message={message} chat={chat} users={users}/>,\n                user: invitedMembers,\n                users: invitedMembers,\n                chat: __('lng_action_invite_user_chat')\n            })}\n        </ServiceMessage>\n    );\n}","import React from 'react';\nimport __, { __fmt } from '../../../../language-pack/language-pack';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\nimport { SenderFullName } from '../../message-summary-noicon';\n\nexport default function MessageBasicGroupChatCreate({message, chat, users}: MessageProps): JSX.Element {\n    if(message.content['@type'] != 'messageBasicGroupChatCreate') {\n        throw new Error('Message is not messageBasicGroupChatCreate');\n    }\n    if(message.is_channel_post) {\n        return (\n            <ServiceMessage>\n                <span className=\"part-1\">{__('lng_action_created_channel')}</span>\n            </ServiceMessage>\n        );\n    } else {\n        return (\n            <ServiceMessage>\n                {__fmt('lng_action_created_chat', {\n                    from: <SenderFullName message={message} chat={chat} users={users}/>,\n                    title: message.content.title\n                })}\n            </ServiceMessage>\n        );\n    }\n}","import React from 'react';\nimport __, { __fmt } from '../../../../language-pack/language-pack';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\nimport { SenderFullName } from '../../message-summary-noicon';\n\nexport default function MessageSupergroupChatCreate({message, chat, users}: MessageProps): JSX.Element {\n    if(message.content['@type'] != 'messageSupergroupChatCreate') {\n        throw new Error('Message is not messageSuperGroupChatCreate');\n    }\n    if(message.is_channel_post) {\n        return (\n            <ServiceMessage>\n                <span className=\"part-1\">{__('lng_action_created_channel')}</span>\n            </ServiceMessage>\n        );\n    } else {\n        return (\n            <ServiceMessage>\n                {__fmt('lng_action_created_chat', {\n                    from: <SenderFullName message={message} chat={chat} users={users}/>,\n                    title: message.content.title\n                })}\n            </ServiceMessage>\n        );\n    }\n}","import React from 'react';\nimport { __fmt } from '../../../../language-pack/language-pack';\nimport { SenderFullName } from '../../message-summary-noicon';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\n\nexport default function MessageChatChangeTitle({message, chat, users}: MessageProps): JSX.Element {\n    if(message.content['@type'] != 'messageChatChangeTitle') {\n        throw new Error('Message is not messageChatChangeTitle');\n    }\n    if(message.is_channel_post) {\n        return (\n            <ServiceMessage>\n                <span className=\"part-1\">{__fmt('lng_action_changed_title_channel', {title: message.content.title})}</span>\n            </ServiceMessage>\n        );\n    } else {\n        return (\n            <ServiceMessage>\n                <span className=\"part-1\">{__fmt('lng_action_changed_title', {\n                    from: <SenderFullName message={message} chat={chat} users={users}/>,\n                    title: message.content.title\n                })}</span>\n            </ServiceMessage>\n        );\n    }\n}","import React from 'react';\nimport __, { __fmt } from '../../../../language-pack/language-pack';\nimport { SenderFullName } from '../../message-summary-noicon';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\n\nexport default function MessageChatDeletePhoto({message, chat, users}: MessageProps): JSX.Element {\n    if(message.is_channel_post) {\n        return (\n            <ServiceMessage>\n                <span className=\"part-1\">{__('lng_action_removed_photo_channel')}</span>\n            </ServiceMessage>\n        );\n    } else {\n        return (\n            <ServiceMessage>\n                {__fmt('lng_action_removed_photo', {\n                    from:  <SenderFullName message={message} chat={chat} users={users}/>\n                })}\n            </ServiceMessage>\n        );\n    }\n}","import React from 'react';\nimport { __collection, __fmt } from '../../../../language-pack/language-pack';\nimport { getUserFullName } from '../../../user-misc';\nimport { SenderFullName } from '../../message-summary-noicon';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\n\nexport default function MessageChatAddMembers({message, chat, users}: MessageProps): JSX.Element {\n    if(message.content['@type'] != 'messageChatAddMembers') {\n        throw new Error('Message is not messageChatAddMembers');\n    }\n\n    // If the user joined the group by themselves, it appears as 'X added X' and that is not accurate.\n    if(message.sender_id['@type']=='messageSenderUser' && message.content.member_user_ids[0] == message.sender_id?.user_id) {\n        return (\n            <ServiceMessage>\n                <span className=\"part-1\">{__fmt('lng_action_user_joined', {from: <SenderFullName message={message} chat={chat} users={users}/>})}</span>\n            </ServiceMessage>\n        );\n    }\n\n    const newMembers= __collection(false, message.content.member_user_ids.map(id=> getUserFullName(users[id])), false);\n    \n    return (\n        <ServiceMessage>\n            {__fmt(newMembers.length> 1 ? 'lng_action_add_users_many' : 'lng_action_add_user', {\n                from: <SenderFullName message={message} chat={chat} users={users}/>,\n                users: newMembers,\n                user: newMembers\n            })}\n        </ServiceMessage>\n    );\n}","import React from 'react';\nimport { __fmt } from '../../../../language-pack/language-pack';\nimport { ServiceMessage } from '../message-containers';\nimport { MessageProps } from '../message';\nimport { SenderFullName } from '../../message-summary-noicon';\n\nexport default function MessageChatJoinByLink({message, chat, users}: MessageProps): JSX.Element {\n    return (\n        <ServiceMessage>\n            {__fmt('lng_action_user_joined_by_link', {\n                from: <SenderFullName message={message} chat={chat} users={users}/>\n            })}\n        </ServiceMessage>\n    );\n}","import React from 'react';\nimport { __fmt } from '../../../../language-pack/language-pack';\nimport { SenderFullName } from '../../message-summary-noicon';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\n\nexport default function MessageChatJoinByRequest({message, chat, users}: MessageProps): JSX.Element {\n    return (\n        <ServiceMessage>\n            {__fmt('lng_action_user_joined_by_request', {\n                from: <SenderFullName message={message} chat={chat} users={users}/>\n            })}\n        </ServiceMessage>\n    );\n}","import React from 'react';\nimport { __fmt } from '../../../../language-pack/language-pack';\nimport { getUserFullName } from '../../../user-misc';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\nimport { SenderFullName } from '../../message-summary-noicon';\n\nexport default function MessageChatDeleteMember({message, chat, users}: MessageProps): JSX.Element {\n    if(message.content['@type'] != 'messageChatDeleteMember') {\n        throw new Error('Message is not messageChatDeleteMember');\n    }\n    const deletedMember= users[message.content.user_id];\n    if( message.sender_id['@type']=='messageSenderUser' && deletedMember.id == message.sender_id.user_id ) { // Left the group\n        return (\n            <ServiceMessage>\n                {__fmt('lng_action_user_left', {\n                    from: <SenderFullName message={message} chat={chat} users={users}/>\n                })}\n            </ServiceMessage>\n        );\n    }\n    return (\n        <ServiceMessage>\n            {__fmt('lng_action_kick_user', {\n                from: <SenderFullName message={message} chat={chat} users={users}/>,\n                user: getUserFullName(deletedMember)\n            })}\n        </ServiceMessage>\n    );\n}","import React from 'react';\nimport __, { __fmt } from '../../../../language-pack/language-pack';\nimport TdLib from '../../../../TdWeb/tdlib';\nimport TdApi from '../../../../TdWeb/td_api';\nimport { messageStore } from '../../../message-store';\nimport MessaagePinnedMessage from '../../message-pinned-message';\nimport { SenderFullName } from '../../message-summary-noicon';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\n\nexport default function MessagePinMessage({message, chat, users}: MessageProps): JSX.Element {\n    if(message.content['@type'] != 'messagePinMessage') {\n        throw new Error('Message is not messagePinMessage');\n    }\n\n    const [pinnedMessage, setPinnedMessage] = React.useState<TdApi.message|0|-1>(0);\n\n    function handleMessageQuery(result: TdApi.message|TdApi.error) {\n        if(result['@type'] == 'error') {\n            setPinnedMessage(-1);\n        }\n        else {\n            setPinnedMessage(result);\n        }\n    }\n\n    React.useEffect(() => {\n        message.content = message.content as TdApi.messagePinMessage;\n        if(pinnedMessage == 0) {\n            const pmessage= messageStore.getState().messages[message.content.message_id];\n            if(pmessage) {\n                setPinnedMessage(pmessage);\n            } else {\n                TdLib.sendQuery({\n                    '@type': 'getMessage',\n                    chat_id: chat.id,\n                    message_id: message.content.message_id\n                }).then(handleMessageQuery, handleMessageQuery);\n            }\n        }\n    }, []);\n\n    return pinnedMessage == 0 ? (\n        <ServiceMessage>\n            {__fmt('lng_action_pinned_media', {\n                from: <SenderFullName message={message} chat={chat} users={users}/>,\n                media: __('lng_contacts_loading')\n            })}\n        </ServiceMessage>\n    ) : pinnedMessage == -1 ? (\n        <ServiceMessage>\n            {__fmt('lng_action_pinned_media', {\n                from: <SenderFullName message={message} chat={chat} users={users}/>,\n                media: __('lng_deleted_message')\n            })}\n        </ServiceMessage>\n    ) : (\n        <ServiceMessage>\n            <MessaagePinnedMessage message={pinnedMessage} from={<SenderFullName message={message} chat={chat} users={users}/>}/>\n        </ServiceMessage>\n    );\n}","import React from 'react';\nimport { ServiceMessageIncludingYou } from '../../message-summary-noicon';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\n\nexport default function MessageChatSetTheme({message, chat, users}: MessageProps): JSX.Element {\n    if(message.content['@type'] != 'messageChatSetTheme') {\n        throw new Error('Message is not messageChatSetTheme');\n    }\n    \n    if(message.content.theme_name){\n        return (\n            <ServiceMessage>\n                <ServiceMessageIncludingYou \n                    message={message} chat={chat} users={users}\n                    lpString=\"lng_action_theme_changed\"\n                    lpString_you=\"lng_action_you_theme_changed\"\n                    params={{emoji: message.content.theme_name}}/>\n            </ServiceMessage>\n        );\n    } else {\n        return (\n            <ServiceMessage>\n                <ServiceMessageIncludingYou \n                    message={message} chat={chat} users={users}\n                    lpString=\"lng_action_theme_disabled\"\n                    lpString_you=\"lng_action_you_theme_disabled\"/>\n            </ServiceMessage>\n        );\n    }\n}","import React from 'react';\nimport __, { __fmt } from '../../../../language-pack/language-pack';\nimport { ServiceMessageIncludingYou } from '../../message-summary-noicon';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\n\nexport default function MessageChatSetTtl({message, chat, users}: MessageProps): JSX.Element {\n    if(message.content['@type'] != 'messageChatSetTtl') {\n        throw new Error('Message is not messageChatSetTtl');\n    }\n    \n    const ttlTimeUnit= {\n        86400: __('lng_ttl_about_duration1'), \n        604800: __('lng_ttl_about_duration2'),\n        2678400: __('lng_ttl_about_duration3'),\n    }[message.content.ttl];\n\n    if(message.is_channel_post) {\n        if(message.content.ttl) { // If TTL is disabled, it will be set to 0\n            return (\n                <ServiceMessage>\n                    {__fmt('lng_action_ttl_changed_channel', {\n                        duration: ttlTimeUnit\n                    })}\n                </ServiceMessage>\n            );\n        } else {\n            return (\n                <ServiceMessage>\n                    {__('lng_action_ttl_removed_channel')}\n                </ServiceMessage>\n            );\n        }\n    } else {\n        if(message.content.ttl) { // If TTL is disabled, it will be set to 0\n            return (\n                <ServiceMessage>\n                    <ServiceMessageIncludingYou \n                        message={message} chat={chat} users={users}\n                        lpString=\"lng_action_ttl_changed\"\n                        lpString_you=\"lng_action_ttl_changed_you\"\n                        params={{duration: ttlTimeUnit}}/>\n                </ServiceMessage>\n            );\n        } else {\n            return (\n                <ServiceMessage>\n                    <ServiceMessageIncludingYou \n                        message={message} chat={chat} users={users}\n                        lpString=\"lng_action_ttl_removed\"\n                        lpString_you=\"lng_action_ttl_removed_you\"/>\n                </ServiceMessage>\n            );\n        }\n    }\n}","import React from 'react';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\n\nexport default function MessageCustomServiceAction({message}: MessageProps): JSX.Element {\n    if(message.content['@type'] != 'messageCustomServiceAction') {\n        throw new Error('Message is not messageCustomServiceAction');\n    }\n\n    return (\n        <ServiceMessage>\n            {message.content.text}\n        </ServiceMessage>\n    );\n}","import React from 'react';\nimport TdLib from '../../../../TdWeb/tdlib';\nimport TdApi from '../../../../TdWeb/td_api';\nimport { messageStore } from '../../../message-store';\nimport { ServiceMessageIncludingYou } from '../../message-summary-noicon';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\n\nexport default function MessageGameScore({message, chat, users}: MessageProps): JSX.Element {\n    if(message.content['@type'] != 'messageGameScore') {\n        throw new Error('Message is not messageGameScore');\n    }\n\n    const [gameMessage, setGameMessage] = React.useState<TdApi.message|0|-1>(0);\n\n    function handleMessageQuery(result: TdApi.message|TdApi.error) {\n        if(result['@type'] == 'error') {\n            setGameMessage(-1);\n        }\n        else {\n            setGameMessage(result);\n        }\n    }\n\n    React.useEffect(() => {\n        message.content = message.content as TdApi.messageGameScore;\n        if(gameMessage == 0) {\n            const gmessage= messageStore.getState().messages[message.content.game_message_id];\n            if(gmessage) {\n                setGameMessage(gmessage);\n            } else {\n                TdLib.sendQuery({\n                    '@type': 'getMessage',\n                    chat_id: chat.id,\n                    message_id: message.content.game_message_id\n                }).then(handleMessageQuery, handleMessageQuery);\n            }\n        }\n    }, []);\n\n    return typeof gameMessage == 'number'? (\n        <ServiceMessage>\n            <ServiceMessageIncludingYou \n                message={message} chat={chat} users={users}\n                lpString=\"lng_action_game_score_no_game\"\n                lpString_you=\"lng_action_game_you_scored_no_game\"\n                count={message.content.score}/>\n        </ServiceMessage>\n    ) : (\n        <ServiceMessage>\n            <ServiceMessageIncludingYou \n                message={message} chat={chat} users={users}\n                lpString=\"lng_action_game_score\"\n                lpString_you=\"lng_action_game_you_scored\"\n                count={message.content.score}\n                params={{game: (gameMessage.content as TdApi.messageGame).game.title}}/>\n        </ServiceMessage>\n    );\n}","import React from 'react';\nimport { __fmt } from '../../../../language-pack/language-pack';\nimport TdLib from '../../../../TdWeb/tdlib';\nimport TdApi from '../../../../TdWeb/td_api';\nimport currencyAmountToString from '../../../sections/payments/currency-tostring';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\nimport currencies from '../../../sections/payments/currencies.json';\nimport { messageStore } from '../../../message-store';\n\nexport default function MessagePaymentSuccessful({message, chat}: MessageProps): JSX.Element {\n    if(message.content['@type'] != 'messagePaymentSuccessful') {\n        throw new Error('Message is not messagePaymentSuccessful');\n    }\n\n    const [invoiceMessage, setInvoiceMessage] = React.useState<TdApi.message|0|-1>(0);\n\n    function handleMessageQuery(result: TdApi.message|TdApi.error) {\n        if(result['@type'] == 'error') {\n            setInvoiceMessage(-1);\n        }\n        else {\n            setInvoiceMessage(result);\n        }\n    }\n\n    React.useEffect(() => {\n        message.content = message.content as TdApi.messagePaymentSuccessful;\n        if(invoiceMessage == 0) {\n            const imessage= messageStore.getState().messages[message.content.invoice_message_id];\n            if(imessage) {\n                setInvoiceMessage(imessage);\n            } else {\n                TdLib.sendQuery({\n                    '@type': 'getMessage',\n                    chat_id: message.content.invoice_chat_id,\n                    message_id: message.content.invoice_message_id\n                }).then(handleMessageQuery, handleMessageQuery);\n            }\n        }\n    }, []);\n\n    return typeof invoiceMessage == 'number'? (\n        <ServiceMessage>\n            {__fmt('lng_action_payment_done', {\n                amount: currencyAmountToString(message.content.currency as keyof typeof currencies, message.content.total_amount),\n                user: chat.title\n            })}\n        </ServiceMessage>\n    ) : (\n        <ServiceMessage>\n            {__fmt('lng_action_payment_done_for', {\n                amount: currencyAmountToString(message.content.currency as keyof typeof currencies, message.content.total_amount),\n                user: chat.title,\n                invoice: (invoiceMessage.content as TdApi.messageInvoice).title\n            })}\n        </ServiceMessage>\n    );\n}","import React from 'react';\nimport { __fmt } from '../../../../language-pack/language-pack';\nimport { SenderFullName } from '../../message-summary-noicon';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\n\nexport default function MessageContactRegistered({message, chat, users}: MessageProps): JSX.Element {\n    return (\n        <ServiceMessage>\n            {__fmt('lng_action_user_registered', {\n                from: <SenderFullName message={message} chat={chat} users={users}/>\n            })}\n        </ServiceMessage>\n    );\n}","import React from 'react';\nimport { __fmt } from '../../../../language-pack/language-pack';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\n\nexport default function MessageWebsiteConnected({message}: MessageProps): JSX.Element {\n    if(message.content['@type'] != 'messageWebsiteConnected') {\n        throw new Error('Message is not messageWebsiteConnected');\n    }\n\n    return (\n        <ServiceMessage>\n            {__fmt('lng_action_bot_allowed_from_domain', {\n                domain: message.content.domain_name\n            })}\n        </ServiceMessage>\n    )\n}","import React from 'react';\nimport __, { __fmt } from '../../../../language-pack/language-pack';\nimport { LanguagePackKey } from '../../../../language-pack/language-pack-types';\nimport { MessageProps } from '../message';\nimport { ServiceMessage } from '../message-containers';\n\nexport default function MessagePassportDataSent({message, chat}: MessageProps): JSX.Element {\n    if(message.content['@type'] != 'messagePassportDataSent') {\n        throw new Error('Message is not messagePassportDataSent');\n    }\n\n    const passportDataTypeToString= {\n        'passportElementTypeAddress':               'lng_passport_address',\n        'passportElementTypeBankStatement':         'lng_passport_address_statement',\n        'passportElementTypeDriverLicense':         'lng_passport_identity_license',\n        'passportElementTypeEmailAddress':          'lng_passport_email_title',\n        'passportElementTypeIdentityCard':          'lng_passport_identity_card',\n        'passportElementTypeInternalPassport':      'lng_passport_identity_internal',\n        'passportElementTypePassport':              'lng_passport_identity_passport',\n        'passportElementTypePassportRegistration':  'lng_passport_address_registration',\n        'passportElementTypePersonalDetails':       'lng_passport_personal_details',\n        'passportElementTypePhoneNumber':           'lng_passport_phone_title',\n        'passportElementTypeRentalAgreement':       'lng_passport_address_agreement',\n        'passportElementTypeTemporaryRegistration': 'lng_passport_address_temporary',\n        'passportElementTypeUtilityBill':           'lng_passport_address_bill',\n    };\n    const passportDataTypes= message.content.types.map(type=> (__(passportDataTypeToString[type['@type']] as LanguagePackKey) as string).toLowerCase());\n    return (\n        <ServiceMessage>\n            {__fmt('lng_action_secure_values_sent', {\n                user: chat.title,\n                documents: passportDataTypes.join(', ')\n            })}\n        </ServiceMessage>\n    );\n}","import TdLib from '../../TdWeb/tdlib';\nimport TdApi from '../../TdWeb/td_api';\nimport { messageStore } from '../message-store';\nimport chatStore from '../chat-store';\n\nexport function loadChatHistory(chatId: number, fromMessageId = 0, limit= 100): Promise<number> {\n    return new Promise<number>((resolve, reject) => {\n        TdLib.sendQuery({\n            '@type': 'getChatHistory',\n            chat_id: chatId,\n            from_message_id: fromMessageId,\n            limit: limit\n        }).then((result) => {\n            result= result as TdApi.messages;\n            if(chatId !== chatStore.getState().selectedChat) {\n                resolve(-1);\n                return;\n            }\n\n            if(result.messages) {\n                messageStore.dispatch({\n                    type: 'ADD_MESSAGES',\n                    messages: result.messages\n                });\n            }\n            resolve(result.total_count);\n        }, reject);\n    });\n}\n\nTdLib.registerUpdateHandler<TdApi.updateNewMessage>('updateNewMessage', (update) => {\n    if(update.message.chat_id !== chatStore.getState().selectedChat) return;\n    messageStore.dispatch({\n        type: 'ADD_MESSAGE',\n        message: update.message,\n    });\n});\nTdLib.registerUpdateHandler<TdApi.updateMessageSendSucceeded>('updateMessageSendSucceeded', (update) => {\n    if(update.message.chat_id !== chatStore.getState().selectedChat) return;\n    messageStore.dispatch({\n        type: 'REMOVE_MESSAGES',\n        messageIds: [update.old_message_id],\n    });\n    messageStore.dispatch({\n        type: 'ADD_MESSAGE',\n        message: update.message,\n    });\n});\nTdLib.registerUpdateHandler<TdApi.updateDeleteMessages>('updateDeleteMessages', (update) => {\n    if(update.chat_id !== chatStore.getState().selectedChat) return;\n    messageStore.dispatch({\n        type: 'REMOVE_MESSAGES',\n        messageIds: update.message_ids,\n    });\n});\nTdLib.registerUpdateHandler<TdApi.updateMessageContent>('updateMessageContent', (update) => {\n    if(update.chat_id !== chatStore.getState().selectedChat) return;\n    messageStore.dispatch({\n        type: 'REDUCE_MESSAGE',\n        messageId: update.message_id,\n        reduce: (message) => {\n            return {\n                ...message,\n                content: update.new_content,\n            };\n        }\n    });\n});\nTdLib.registerUpdateHandler<TdApi.updateMessageEdited>('updateMessageEdited', (update) => {\n    if(update.chat_id !== chatStore.getState().selectedChat) return;\n    messageStore.dispatch({\n        type: 'REDUCE_MESSAGE',\n        messageId: update.message_id,\n        reduce: (message) => {\n            return {\n                ...message,\n                edit_date: update.edit_date,\n                reply_markup: update.reply_markup,\n            };\n        }\n    });\n});\nTdLib.registerUpdateHandler<TdApi.updateMessageIsPinned>('updateMessageIsPinned', (update) => {\n    if(update.chat_id !== chatStore.getState().selectedChat) return;\n    messageStore.dispatch({\n        type: 'REDUCE_MESSAGE',\n        messageId: update.message_id,\n        reduce: (message) => {\n            return {\n                ...message,\n                is_pinned: update.is_pinned,\n            };\n        }\n    });\n});\nTdLib.registerUpdateHandler<TdApi.updateMessageInteractionInfo>('updateMessageInteractionInfo', (update) => {\n    if(update.chat_id !== chatStore.getState().selectedChat) return;\n    messageStore.dispatch({\n        type: 'REDUCE_MESSAGE',\n        messageId: update.message_id,\n        reduce: (message) => {\n            return {\n                ...message,\n                interaction_info: update.interaction_info,\n            };\n        }\n    });\n});","import TdApi from '../../TdWeb/td_api';\n\nconst serviceMessages= ([\n    'messageExpiredPhoto',\n    'messageExpiredVideo',\n    'messageVideoChatScheduled',\n    'messageVideoChatStarted',\n    'messageVideoChatEnded',\n    'messageInviteVideoChatParticipants',\n    'messageBasicGroupChatCreate',\n    'messageSupergroupChatCreate',\n    'messageChatChangeTitle',\n    'messageChatChangePhoto',\n    'messageChatDeletePhoto',\n    'messageChatAddMembers',\n    'messageChatJoinByLink',\n    'messageChatJoinByRequest',\n    'messageChatDeleteMember',\n    'messageChatUpgradeTo',\n    'messageChatUpgradeFrom',\n    'messagePinMessage',\n    'messageScreenshotTaken',\n    'messageChatSetTheme',\n    'messageChatSetTtl',\n    'messageCustomServiceAction',\n    'messageGameScore',\n    'messagePaymentSuccessful',\n    'messageContactRegistered',\n    'messageWebsiteConnected',\n    'messagePassportDataSent',\n    'messageProximityAlertTriggered',\n] as TdApi.MessageContent['@type'][]);\n\nexport default function messageIsService(message: TdApi.message): boolean {\n    return serviceMessages.includes(message.content['@type']);\n}","import React from 'react';\nimport './outline-button.scss';\nimport RippleEffect, { handleMyMouseEventsFunction, RippleEffectProps_AutoSettable } from './ripple-effect';\n\ntype OutlineButtonProps= {\n    onClick: (e: React.SyntheticEvent<HTMLButtonElement>) => void,\n    children: React.ReactNode | React.ReactNode[],\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    [key: string]: any,\n}\n\nexport function OutlineButton({onClick, children, ...rest}: OutlineButtonProps): JSX.Element {\n    const ripple= React.useState<RippleEffectProps_AutoSettable>({state: 'off'});\n    const rippleEvents= handleMyMouseEventsFunction(ripple);\n    return (\n        <button className=\"outline-button\" onClick={onClick} {...rippleEvents} {...rest}>\n            <RippleEffect {...ripple[0]} color=\"\"/>{/* TODO: Find the color */}\n            <div className=\"content\">{children}</div>\n        </button>\n    );\n}","import React from 'react';\nimport __ from '../../../../language-pack/language-pack';\nimport TdLib from '../../../../TdWeb/tdlib';\nimport TdApi from '../../../../TdWeb/td_api';\nimport { OutlineButton } from '../../../../ui/elements/outline-button';\nimport chatStore, { getChatNoCache } from '../../../chat-store';\nimport compileEntities from '../entities';\nimport { MessageBubble } from '../message-containers';\nimport './sponsored.scss';\n\ntype SponsoredMessageProps= {\n    message: TdApi.SponsoredMessage;\n    chat_id: number;\n    viewport: React.RefObject<HTMLElement>;\n}\n\nexport default function SponsoredMessage({message, chat_id, viewport}: SponsoredMessageProps): JSX.Element {\n    const chat= getChatNoCache(message.sponsor_chat_id) as TdApi.chat;\n\n    const [viewed, setViewed]= React.useState(false);\n    const ref= React.useRef<HTMLDivElement>(null);\n    let observer: IntersectionObserver|null= null;\n    React.useEffect(() => {\n        if (ref.current) {\n            observer= new IntersectionObserver(entries => {\n                if (entries[0].isIntersecting) {\n                    if(!viewed) {\n                        observer?.disconnect();\n                        TdLib.sendQuery({\n                            '@type': 'viewMessages',\n                            chat_id: chat_id,\n                            // sponsor_message_id: message.message_id,\n                            message_ids: [message.message_id]\n                        });\n                    }\n                    setViewed(true);\n                }\n            }, {\n                root: viewport.current,\n                threshold: 1,\n            });\n            observer.observe(ref.current);\n        }\n        return () => {\n            observer?.disconnect();\n            setViewed(false);\n        };\n    }, [chat_id, message.message_id]);\n\n    return (\n        <div className=\"history-message sponsored\">\n            <MessageBubble>\n                <div className=\"message-sender\">\n                    <span className=\"color_0\">{chat.title}</span>\n                </div>\n                <div className=\"content\">\n                    <div ref={ref}>\n                        {compileEntities((message.content as TdApi.messageText).text)}\n                    </div>\n                    <div className=\"footer\">\n                        <div className=\"text\"> {__('lng_sponsored')}</div>\n                    </div>\n                    <div className=\"after\"/>\n                    <OutlineButton onClick={()=> {\n                        chatStore.dispatch({\n                            type: 'SELECT_CHAT',\n                            chat_id: message.sponsor_chat_id\n                        });\n                    }}>\n                        {chat.type['@type']== 'chatTypePrivate' ? __('lng_view_button_bot') : __('lng_view_button_channel')}\n                    </OutlineButton>\n                </div>\n            </MessageBubble>\n        </div>\n    );\n}","import React from 'react';\nimport './history.scss';\nimport ScrollView from '../../../../ui/scroll/scrollbar';\nimport { Message } from '../../../message/ui/message';\nimport { connect } from 'react-redux';\nimport { loadChatHistory } from '../../../message/chat-history';\nimport processMessageHistory from '../../../message/processHistory';\nimport TdLib from '../../../../TdWeb/tdlib';\nimport SponsoredMessage from '../../../message/ui/types/sponsored';\nimport './history-to-down.scss';\nimport IconButton from '../../../../ui/elements/icon-button';\nimport { history_to_down } from '../../../../ui/icon/icons';\nimport { MessageStoreAction, MessageStoreState } from '../../../message-store';\nimport { ChatSectionContentProps } from '../chat-section';\nimport { Dispatch } from 'redux';\nimport TdApi from '../../../../TdWeb/td_api';\nimport Scrollbars from 'react-custom-scrollbars-2';\nimport withUsers from '../../../users-wrapper';\n\nexport const ChatHistory= connect<MessageStoreState, unknown, ChatSectionContentProps, MessageStoreState>(({messages}) => ({messages})) (\n    function ChatHistory({chat, messages, dispatch }: ChatSectionContentProps & MessageStoreState & {dispatch: Dispatch<MessageStoreAction>}) {\n        \n        const ref= React.useRef<HTMLDivElement>() as React.RefObject<HTMLDivElement>;\n        const upperEndDetectorRef= React.useRef<HTMLDivElement>() as React.RefObject<HTMLDivElement>;\n        const lowerEndDetectorRef= React.useRef<HTMLDivElement>() as React.RefObject<HTMLDivElement>;\n        \n        const array= Object.keys(messages).length ? processMessageHistory(messages) : [];\n        \n        const [sponsoredMessage, setSponsoredMessage]= React.useState<TdApi.sponsoredMessage|null>(null);\n\n        const [observer, setObserver]= React.useState<IntersectionObserver|null>(null);\n        const [currentlyLoading, setCurrentlyLoading]= React.useState(0);\n\n        const [upperEndDetectorVisible, setUpperEndDetectorVisible]= React.useState(false);\n        const [lowerEndDetectorVisible, setLowerEndDetectorVisible]= React.useState(false);\n        const [reachedEndTop, setReachedEndTop]= React.useState(false);\n        const [reachedEndBottom, setReachedEndBottom]= React.useState(false);\n        React.useEffect(() => {\n            setCurrentlyLoading(0);\n            setUpperEndDetectorVisible(false);\n            setLowerEndDetectorVisible(false);\n            setReachedEndTop(false);\n            setReachedEndBottom(false);\n            if(!observer) {\n                const ob= new IntersectionObserver(entries => {\n                    entries.forEach(entry => {\n                        if(entry.target.classList.contains('upper')) {\n                            setUpperEndDetectorVisible(entry.isIntersecting);\n                        }\n                        else if(entry.target.classList.contains('lower')) {\n                            setLowerEndDetectorVisible(entry.isIntersecting);\n                        }\n                    });\n                }, {\n                    root: ref.current\n                });\n                ob.observe(upperEndDetectorRef.current as HTMLDivElement);\n                ob.observe(lowerEndDetectorRef.current as HTMLDivElement);\n                setObserver(ob);\n            }\n\n            if (chat.type['@type'] == 'chatTypeSupergroup' && chat.type.is_channel) {\n                TdLib.sendQuery({\n                    '@type': 'getChatSponsoredMessage',\n                    chat_id: chat.id\n                }).then((res)=>(setSponsoredMessage(res as TdApi.sponsoredMessage)));\n            } else {\n                setSponsoredMessage(null);\n            }\n\n            return () => {\n                observer?.disconnect();\n                dispatch({\n                    type: 'CLEAR_MESSAGES',\n                });\n            };\n        }, [chat.id]);\n\n        React.useEffect(() => {\n            if(currentlyLoading < 1) {\n                if(upperEndDetectorVisible && !reachedEndTop) {\n                    setCurrentlyLoading(current => current + 1);\n                    loadChatHistory(chat.id, array.length ? array[0].id : 0, 50).then((count)=> {\n                        (count!=-1) && setCurrentlyLoading(current => current - 1);\n                        (count==0) && setReachedEndTop(true);\n                    });\n                }\n            }\n        }, [upperEndDetectorVisible, lowerEndDetectorVisible, currentlyLoading]);\n\n        const scrollRef= React.useRef<Scrollbars>() as React.RefObject<Scrollbars>;\n        function jumpToDown() {\n            (scrollRef.current as any)?.view.scroll({\n                top: 0,\n                behavior: 'smooth',\n            });\n        }\n        const [jumpToDownVisible, setJumpToDownVisible]= React.useState(false);\n        function onScroll(e: React.UIEvent) {\n            const visible= (-(e.target as HTMLElement).scrollTop) > 480;\n            if (visible != jumpToDownVisible) {\n                setJumpToDownVisible(visible);\n            }\n        }\n\n        const Message2= withUsers(Message);\n\n        return (\n            <div className=\"history\" ref={ref}>\n                <ScrollView scrollRef={scrollRef} className=\"scrollbar full-size\" scrollBarWidth={6} onScroll={onScroll}>\n                    <div className=\"history-scroll-content\">\n                        <div className=\"end-detector upper\" ref={upperEndDetectorRef}></div>\n                        {array.map(message => <Message2 key={message.id} message={message} chat={chat}/>)}\n                        <div className=\"end-detector lower\" ref={lowerEndDetectorRef}></div>\n                        {sponsoredMessage && <SponsoredMessage message={sponsoredMessage} chat_id={chat.id} viewport={ref}/>}\n                    </div>\n                </ScrollView>\n                <IconButton icon={history_to_down} onClick={jumpToDown}\n                    className={'history-to-down '+(jumpToDownVisible ? 'visible' : '')}/>\n            </div>\n        );\n    }\n);\n","import TdApi from '../../TdWeb/td_api';\nimport messageIsService from './message-is-service';\n\nexport interface ProcessedSingleMessage extends TdApi.message, ProcessedMessage {\n}\n\nexport interface MessageAlbum extends ProcessedMessage {\n    processedType: 'messageAlbum';\n    type: 'messageDocument' | 'messagePhoto' | 'messageVideo' | 'messageAudio';\n    messages: TdApi.message[];\n}\n\nexport interface FileAlbum extends MessageAlbum {\n    type: 'messageDocument' | 'messageAudio',\n}\n\nexport interface MediaAlbum extends MessageAlbum {\n    type: 'messagePhoto' | 'messageVideo',\n}\n\nexport interface ProcessedMessage {\n    /** Indicates whether the sender name should *not* be shown on the top of the message */\n    hide_sender_name: boolean;\n    /** Indicates whether the message tail (and sender photo if applicable) should *not* be shown */\n    hide_tail: boolean;\n    processedType?: string;\n}\n\nexport default function processMessageHistory(messages: {[id: number|string]: TdApi.message}): ProcessedSingleMessage[] {\n    const array: TdApi.message[]= [];\n    for(const id of Object.keys(messages).sort((a, b) => Number(a) - Number(b))) {\n        array.push(messages[id]);\n    }\n\n    function reducer(prev: ProcessedMessage[] | null, current: TdApi.message): ProcessedMessage[] {\n        if(!prev) {\n            return [{\n                ...current,\n                hide_sender_name: false,\n                hide_tail: false,\n            }];\n        } else {\n            const prevEl= prev[prev.length-1];\n            let message: TdApi.message;\n            if(prevEl.processedType== 'messageAlbum') {\n                message= (prevEl as MessageAlbum).messages[0];\n            } else {\n                message= prevEl as ProcessedSingleMessage;\n            }\n\n            if( (!messageIsService(message)) &&\n                (!messageIsService(current)) &&\n                message.sender_id['@type']=='messageSenderUser' &&\n                current.sender_id['@type']=='messageSenderUser' &&\n                message.sender_id.user_id == current.sender_id.user_id &&\n                ((current.date - message.date) < (60 * 15))) {\n\n                return [\n                    ...prev.slice(0, -1),\n                    {\n                        ...prevEl,\n                        hide_tail: true\n                    }as ProcessedSingleMessage,\n                    {\n                        ...current,\n                        hide_sender_name: true\n                    } as ProcessedSingleMessage\n                ];\n            }\n\n            return [\n                ...prev,\n                {\n                    ...current,\n                    hide_sender_name: false,\n                    hide_tail: false,\n                }\n            ];\n        }\n    }\n    return array.reduce<ProcessedMessage[]>(reducer, null as any) as any; //TODO: Find an appropriate solution\n}","import React from 'react';\nimport { connect, Provider } from 'react-redux';\nimport __ from '../../../language-pack/language-pack';\nimport { ServiceMessageBubble } from '../../message/ui/message-containers';\nimport TitleHeader from './headers/title';\nimport './chat-section.scss';\nimport usersStore, { UsersStoreState } from '../../users-store';\nimport supergroupStore, { SupergroupStoreState } from '../../supergroup-store';\nimport basicGroupStore, { BasicGroupStoreState } from '../../basic-group-store';\nimport { ChatFooter } from './footer/footer';\nimport { ChatHistory } from './history/history';\nimport { messageStore } from '../../message-store';\nimport TdLib from '../../../TdWeb/tdlib';\nimport { ChatStoreState } from '../../chat-store';\nimport TdApi from '../../../TdWeb/td_api';\n\ntype ChatSectionSelfProps= {\n    singleColumnLayout?: boolean\n}\n\ntype ChatSectionStoreProps= {\n    chats: TdApi.chat[],\n    selectedChat: number\n}\n\nexport const ChatSection= (connect<ChatSectionStoreProps, unknown, ChatSectionSelfProps, ChatStoreState>(({chats, selectedChat}) => ({chats, selectedChat})) (\n    function ChatSection({chats, selectedChat, singleColumnLayout}: ChatSectionStoreProps & ChatSectionSelfProps) {\n        let chat;\n        for(const c of chats) {\n            if(c.id === selectedChat) {\n                chat = c;\n                break;\n            }\n        }\n\n        if(!chat) return (\n            <div id=\"chat-section\" className=\"no-chat\">\n                <ServiceMessageBubble>\n                    {__('lng_willbe_history')}\n                </ServiceMessageBubble>\n            </div>\n        );\n        switch(chat.type['@type']){\n            case 'chatTypePrivate':\n                return (\n                    <Provider store={usersStore}>\n                        <ChatSectionContentWrapperPrivate \n                            chat={chat} \n                            singleColumnLayout={singleColumnLayout}/>\n                    </Provider>\n                );\n            case 'chatTypeBasicGroup': \n                return (\n                    <Provider store={basicGroupStore}>\n                        <ChatSectionContentWrapperBasicGroup \n                            chat={chat} \n                            singleColumnLayout={singleColumnLayout}/>\n                    </Provider>\n                );\n            case 'chatTypeSupergroup':\n                return (\n                    <Provider store={supergroupStore}>\n                        <ChatSectionContentWrapperSupergroup \n                            chat={chat} \n                            singleColumnLayout={singleColumnLayout}/>\n                    </Provider>\n                );\n        }\n        return null;\n    }\n)) as unknown as React.FunctionComponent<ChatSectionSelfProps>;\n\ntype ChatSectionContentWrapperSelfProps= {chat: TdApi.chat} & ChatSectionSelfProps;\n\nconst ChatSectionContentWrapperPrivate= connect<{users: UsersStoreState}, unknown, ChatSectionContentWrapperSelfProps, UsersStoreState>(users=>({users}))(\n    function ChatSectionContentWrapperPrivate({users, chat, ...rest}: {users: UsersStoreState} & ChatSectionContentWrapperSelfProps) {\n        return <ChatSectionContentWrapper user={users[(chat.type as TdApi.chatTypePrivate).user_id]} chat={chat} {...rest}/>;\n    }\n);\n\nconst ChatSectionContentWrapperBasicGroup= connect<{basicGroups: BasicGroupStoreState}, unknown, ChatSectionContentWrapperSelfProps, BasicGroupStoreState>(basicGroups=>({basicGroups}))(\n    function ChatSectionContentWrapperBasicGroup({basicGroups, chat, ...rest}: {basicGroups: BasicGroupStoreState} & ChatSectionContentWrapperSelfProps) {\n        return <ChatSectionContentWrapper basicGroup={basicGroups[(chat.type as TdApi.chatTypeBasicGroup).basic_group_id]} chat={chat} {...rest}/>;\n    }\n);\n\nconst ChatSectionContentWrapperSupergroup= connect<{supergroups: SupergroupStoreState}, unknown, ChatSectionContentWrapperSelfProps, SupergroupStoreState>(supergroups=>({supergroups}))(\n    function ChatSectionContentWrapperSupergroup({supergroups, chat, ...rest}: {supergroups: SupergroupStoreState} & ChatSectionContentWrapperSelfProps) {\n        return <ChatSectionContentWrapper supergroup={supergroups[(chat.type as TdApi.chatTypeSupergroup).supergroup_id]} chat={chat} {...rest}/>;\n    }\n);\n\nexport type ChatSectionContentProps= ChatSectionContentWrapperSelfProps & {\n    user?: TdApi.user,\n    basicGroup?: TdApi.basicGroup,\n    supergroup?: TdApi.supergroup\n}\n\nfunction ChatSectionContentWrapper(props: ChatSectionContentProps) {\n    React.useEffect(()=>{\n        TdLib.sendQuery({\n            '@type': 'openChat',\n            chat_id: props.chat.id\n        });\n        return ()=>{\n            TdLib.sendQuery({\n                '@type': 'closeChat',\n                chat_id: props.chat.id\n            });\n        };\n    }, [props.chat.id]);\n    return (\n        <div id=\"chat-section\">\n            <div className=\"headers\">\n                <TitleHeader {...props}/>\n            </div>\n            <Provider store={messageStore}>\n                <ChatHistory {...props}/>\n            </Provider>\n            <ChatFooter {...props}/>\n        </div>\n    );\n}\n","import React from 'react';\nimport ChatFoldersList from './sections/navigation-menu/chat-folders';\nimport ChatListBar from './sections/navigation-menu/chat-list-bar';\nimport chatStore, { ChatStoreState } from './chat-store';\nimport { connect, Provider } from 'react-redux';\nimport './messengerWindow.scss';\nimport HamburgerMenu from './sections/navigation-menu/hamburger-menu/menu';\nimport {Resizable} from 're-resizable';\nimport { ChatSection } from './sections/chat/chat-section';\nimport NavAnimation from '../ui/elements/nav-animation';\nimport { ThemeStoreState } from '../ui/themes/theme';\n\n/**\n * Renders the messenger screen\n */\nexport const MessengerWindow= (connect<{rtl:boolean}, unknown, Record<string,never>, ThemeStoreState>(({rtl})=>({rtl})) (function MessengerWindow ({rtl}) {\n\n    const [isMenuOpen, setIsMenuOpen] = React.useState(false);\n    const [useSingleLayout, setUseSingleLayout] = React.useState(false);\n    const ref= React.useRef<HTMLDivElement>() as React.RefObject<HTMLDivElement>;\n    React.useEffect(()=> {\n        function check() {\n            const wid= ref.current?.clientWidth || Infinity;\n            setUseSingleLayout(wid < (380 + 260));\n        }\n        window.addEventListener('resize', check);\n        check();\n    }, []);\n\n    return (\n        <div id=\"messenger-screen\" className={useSingleLayout? 'single-column' : ''}>\n            <Provider store={chatStore}>\n                <HamburgerMenu visible={isMenuOpen} onClose={()=> setIsMenuOpen(false)}/>\n                <ChatFoldersList onHamburgerMenuOpened={()=> setIsMenuOpen(true)}/>\n                <div className=\"responsive-container\" ref={ref}>\n                    <div>\n                        {useSingleLayout? (\n                            <SingleLevel setIsMenuOpen={setIsMenuOpen}/>\n                        ):(<>\n                            <Resizable defaultSize={{width: 260} as any} minWidth={260}\n                                className=\"chat-list-bar-container\" handleClasses={{right: 'chat-list-bar-resize-handle', left: 'chat-list-bar-resize-handle'}}\n                                enable={{top: false, right: !rtl, bottom: false, left: rtl, topRight: false, bottomRight: false, bottomLeft: false, topLeft: false}}>\n                                <ChatListBar onHamburgerMenuOpened={()=> setIsMenuOpen(true)}/>\n                            </Resizable>\n                            <div id=\"chat-container\">\n                                <ChatSection/>\n                            </div>\n                        </>)}\n                    </div>\n                </div>\n            </Provider>\n        </div>\n    );\n}) as unknown as React.FunctionComponent<Record<string, never>>);\n\ntype SingleLevelProps= {\n    setIsMenuOpen: (isOpen:boolean)=> void;\n}\n\nconst SingleLevel=(connect<{selectedChat: number}, unknown, SingleLevelProps, ChatStoreState>(({selectedChat})=>({selectedChat}))(\n    function SingleLevel({selectedChat, setIsMenuOpen}: SingleLevelProps & {selectedChat: number}) {\n        return (\n            <NavAnimation mode=\"slide-over\" state={selectedChat==-1? 'closing' : 'open'}\n                innerScreen={(\n                    <div id=\"chat-container\">\n                        <ChatSection singleColumnLayout/>\n                    </div>)\n                }>\n                <ChatListBar onHamburgerMenuOpened={()=> setIsMenuOpen(true)}/>\n            </NavAnimation>\n        );\n    }\n)) as unknown as React.ComponentType<SingleLevelProps>;","import TdLib from './tdlib';\nimport {getCredentials} from './config';\nimport {getUseTestDc} from './tdlib';\nimport version from '../../version';\nimport TdApi from './td_api';\n\nTdLib.registerUpdateHandler<TdApi.updateAuthorizationState>('updateAuthorizationState',function (update) {\n    const credentials= getCredentials();\n    const auth_state= update['authorization_state'];\n    \n    if(auth_state['@type']==='authorizationStateWaitEncryptionKey'){\n        TdLib.sendQuery({'@type': 'checkDatabaseEncryptionKey', 'encryption_key': ''});\n    }\n    if(auth_state['@type']==='authorizationStateWaitTdlibParameters'){\n        TdLib.sendQuery({\n            '@type': 'setTdlibParameters',\n            'parameters': ({\n                '@type': 'tdlibParameters',\n                'database_directory': 'tdlib',\n                'use_message_database': true,\n                'use_secret_chats': false,\n                'api_id': credentials.api_id,\n                'api_hash': credentials.api_hash,\n                'system_language_code': 'en',\n                'device_model': 'Web',\n                'application_version': version,\n                'enable_storage_optimizer': true,\n                'use_test_dc': getUseTestDc()\n            } as any)\n        });\n    }\n});\n\n/**\n * Provides functions to pass required authorization data to Telegram\n */\nexport default class Auth {\n    /**\n     * Pass phone number of the account to be logged in to\n     * @param {string} number The phone number the user entered\n     * @returns TdLib query result\n     */\n    static givePhoneNumber(number: string): Promise<TdApi.ok> {\n        return TdLib.sendQuery({'@type': 'setAuthenticationPhoneNumber', 'phone_number': number});\n    }\n    /**\n     * Pass authorization code the user has received\n     * @param {string} code The code the user entered\n     * @returns TdLib query result\n     */\n    static checkAuthCode(code: string): Promise<TdApi.ok> {\n        return TdLib.sendQuery({'@type': 'checkAuthenticationCode', 'code': code});\n    }\n    /**\n     * Pass 2FA password of the account\n     * @param {string} pass The password the user entered\n     * @returns TdLib query result\n     */\n    static check2FACode(pass: string): Promise<TdApi.ok> {\n        return TdLib.sendQuery({'@type': 'checkAuthenticationPassword', 'password': pass});\n    }\n    /**\n     * Sign up to Telegram\n     * @param {string} first The first name to be used in the new account\n     * @param {string} last Tha last name to be used in the new account\n     * @returns TdLib query result\n     */\n    static registerNewAccount(first: string, last: string): Promise<TdApi.ok> {\n        return TdLib.sendQuery({'@type': 'registerUser', 'first_name': first, 'last_name': last});\n    }\n}","import React from 'react';\nimport RippleEffect, {handleMyMouseEvents, RippleEffectProps_AutoSettable} from './ripple-effect';\n\ntype BigHighlightedButtonProps = {\n        /** Fires when the button is clicked */\n    onClick: (e: React.SyntheticEvent<HTMLButtonElement>) => void;\n        /** The button's content */\n    children: React.ReactNode | React.ReactNode[];\n}\n\ntype BigHighlightedButtonState = {\n    ripple: RippleEffectProps_AutoSettable;\n}\n\n/**\n * Renders a BIG button which is filled with accent color\n */\nexport default class BigHighlightedButton extends React.Component<BigHighlightedButtonProps, BigHighlightedButtonState> {\n    state= {\n        ripple: {\n            state: 'off'\n        }\n    } as const;\n    mouseDown: (e: React.MouseEvent<HTMLButtonElement>) => void;\n    mouseUp: (e: React.MouseEvent<HTMLButtonElement>) => void;\n    mouseLeave: (e: React.MouseEvent<HTMLButtonElement>) => void;\n    constructor(props: BigHighlightedButtonProps | Readonly<BigHighlightedButtonProps>) {\n        super(props);\n        [this.mouseDown, this.mouseUp, this.mouseLeave]= handleMyMouseEvents(this);\n    }\n\n    render (): JSX.Element {\n        return (\n            <button \n                className=\"big-highlighted-button\" \n                onClick={this.props.onClick}\n                onMouseDown={this.mouseDown}\n                onMouseUp={this.mouseUp}\n                onMouseLeave={this.mouseLeave}>\n\n                <RippleEffect {...this.state.ripple} color=\"var(--theme-color-activeButtonBgRipple)\"/>\n                <div className=\"content\">\n                    {this.props.children}\n                </div>\n            </button>\n        );\n    }\n}","import React from 'react';\n\ntype UnderlinedInputProps = {\n    /** Input type */\n    type: 'text' | 'password' | 'email' | 'number' | 'tel' | 'url';\n    /** Fired when input is modified */\n    onChange?: (value: React.ChangeEvent<HTMLInputElement>) => void;\n    /** Input value */\n    value?: string|number;\n    /** The maximum number of characters the input can have */\n    maxLength?: number;\n    /** If set to true, the input will gain focus when it renders */\n    autoFocus?: boolean;\n    /** Fires when the 'Enter' key is pressed */\n    onEnterKeyPressed?: (e: React.KeyboardEvent) => void;\n    /** Input title/placeholder */\n    title?: React.ReactNode|React.ReactNode[];\n    /** If true, the input will become red */\n    invalid?: boolean;\n    /** If true, text cannot be copied from the input */\n    disableCopy?: boolean;\n    /** If true, up and down buttons cannot change input value */\n    preventNumberScrolling?: boolean;\n    /** `<input>` React ref */\n    iRef?: React.RefObject<HTMLInputElement>;\n    /** Fires when a key is pushed down while the element is in focus. */\n    onKeyDown?: (e: React.KeyboardEvent<HTMLInputElement>) => void;\n}\n\ntype UnderlinedInputState = {\n    inactive: boolean;\n    mouseX: string;\n    titleClass: string;\n}\n\n/**\n * Renders a beautiful field with a title and underline\n */\nexport default class UnderlinedInput extends React.Component<UnderlinedInputProps, UnderlinedInputState> {\n    constructor(args: UnderlinedInputProps | Readonly<UnderlinedInputProps>) {\n        super(args);\n\n        this.state= {\n            inactive: false,\n            mouseX: '50%',\n            titleClass: this.getTitleClass(this.props.autoFocus)\n        };\n    }\n\n    getTitleClass (focus: boolean|undefined): string {\n        return (focus || (!!this.props.value)) ? 'title top' : 'title placeholder';\n    }\n\n    render(): JSX.Element {\n        let className='underlined-input';\n        if(this.state.inactive) {\n            className+=' inactive';\n        }\n        if(this.props.autoFocus) {\n            className+=' autoFocus';\n        }\n        if(this.props.invalid) {\n            className+=' invalid';\n        }\n        return (\n            <div className={className}\n                style={{'--mouse-left': this.state.mouseX || '50%'} as {[key: string]: string}}>\n                { this.props.title ? (\n                    <div className={this.state.titleClass}>{this.props.title}</div>\n                ) : null }\n                <input \n                    ref={this.props.iRef}\n                    type={this.props.type} \n                    onChange={this.props.onChange} \n                    value={this.props.value}\n                    onMouseDown={this.handleMouseDown}\n                    onFocus={this.handleFocus}\n                    onBlur={this.handleBlur}\n                    autoFocus={this.props.autoFocus || false}\n                    onKeyDown={this.handleKeyDown}\n                    maxLength={this.props.maxLength}\n                    onCopy={e=> {\n                        if(this.props.disableCopy) {\n                            e.preventDefault();\n                        }\n                    }}/>\n                <div className=\"underline\"></div>\n            </div>\n        );\n    }\n\n    handleFocus= (): void => {\n        this.setState({\n            inactive: false,\n            titleClass: this.getTitleClass(true)\n        });\n    }\n    handleBlur= (): void => {\n        this.setState({\n            inactive: true, \n            mouseX: '50%',\n            titleClass: this.getTitleClass(false)\n        });\n    }\n    handleMouseDown= (e: React.MouseEvent): void => {\n        this.setState({\n            mouseX: e.nativeEvent.offsetX+'px'\n        });\n    }\n    handleKeyDown= (e: React.KeyboardEvent<HTMLInputElement>): void => {\n        this.props.onKeyDown?.(e);\n        if(e.key=='Enter') {\n            this.props.onEnterKeyPressed && this.props.onEnterKeyPressed(e);\n        }\n        if(this.props.preventNumberScrolling) {\n            if(e.key=='ArrowUp' || e.key=='ArrowDown') {\n                e.preventDefault();\n            }\n        }\n    }\n\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '../../../ui/dialog/dialog';\nimport SmallButton from '../../../ui/elements/small-button';\nimport ScrollView from '../../../ui/scroll/scrollbar';\nimport './country-select.scss';\nimport RippleEffect, { handleMyMouseEventsFunction, RippleEffectProps_AutoSettable } from '../../../ui/elements/ripple-effect';\nimport BoxSearch from '../../../ui/dialog/search';\nimport __ from '../../../language-pack/language-pack';\nimport TdApi from '../../../TdWeb/td_api';\n\ntype CountrySelectProps = {\n    onChange?: (country: string) => void;\n    id: string;\n    countries: TdApi.countryInfo[];\n}\n\nexport default function CountrySelect({onChange, id, countries}: CountrySelectProps): JSX.Element {\n    const ref = React.useRef<Dialog>() as React.RefObject<Dialog>;\n    \n    const [search, setSearch] = React.useState('');\n    if(search.length > 0) {\n        countries = countries.filter((country: TdApi.countryInfo) => country.name.toLowerCase().startsWith(search.toLowerCase()));\n    }\n\n    return (\n        <Dialog ref={ref} id={id} width=\"320px\" className=\"confirm-dialog\">\n            <h1>{__('lng_country_select')}</h1>\n\n            <BoxSearch value={search} onChange={(e) => setSearch(e.target.value)} />\n\n            <ScrollView scrollAlwaysVisible>\n                {countries.map(country => (country.is_hidden? null: (\n                    <CountrySelectItem key={country.country_code} country={country} onClick={ ()=>{\n                        onChange?.('+' + country.calling_codes[0]);\n                        ref.current?.close();\n                    }}/>\n                )))}\n            </ScrollView>\n\n            <div className=\"options\">\n                <SmallButton onClick={()=> {ref.current?.close();}}>{__('lng_close')}</SmallButton>\n            </div>\n        </Dialog>\n    );\n}\nCountrySelect.propTypes = {\n    onChange: PropTypes.func,\n    id: PropTypes.string.isRequired,\n    countries: PropTypes.arrayOf(PropTypes.object).isRequired,\n};\n\ntype CountrySelectItemProps= {\n    country: TdApi.countryInfo;\n    onClick?: React.MouseEventHandler<HTMLDivElement>\n}\n\nexport function CountrySelectItem({country, onClick}: CountrySelectItemProps): JSX.Element {\n    const ripple = React.useState<RippleEffectProps_AutoSettable>({state: 'off'});\n    const rippleEvents = handleMyMouseEventsFunction(ripple);\n    return (\n        <div className=\"country-select-item\" onClick={onClick} {...rippleEvents}>\n            <RippleEffect {...ripple[0]} color=\"var(--theme-color-windowBgRipple)\"/>\n            <div className=\"content\">\n                <span className=\"name\">{country.english_name}</span>\n                <span className=\"codes\">{country.calling_codes.map(c=> '+' + c).join(', ')}</span>\n            </div>\n        </div>\n    );\n}\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport Auth from '../../../TdWeb/auth';\nimport connectionStore from '../../../TdWeb/connectionStore';\nimport ConfirmDialog from '../../../ui/dialog/confirm-dialog';\nimport { addDialog } from '../../../ui/dialog/dialogs';\nimport BigHighlightedButton from '../../../ui/elements/highlighted-button';\nimport UnderlinedInput from '../../../ui/elements/underlined-input';\nimport { manageStatusTextContent } from '../../auth-screen';\nimport ConnectionState from '../../../ui/components/connecting';\nimport callingCodes from './phone-number-calling-codes.json';\nimport './phone-number.scss';\nimport CountrySelect from './country-select';\nimport TdLib from '../../../TdWeb/tdlib';\nimport { intro_country_dropdown } from '../../../ui/icon/icons';\nimport __ from '../../../language-pack/language-pack';\nimport TdApi from '../../../TdWeb/td_api';\n\ntype AuthWindowStepPhoneNumberProps = {\n}\n\ntype AuthWindowStepPhoneNumberState = {\n    number: string;\n    number_p: string;\n    invalid: boolean;\n    statusContent: React.ReactNode|React.ReactNode[]|null;\n    statusVisible: boolean;\n    dropDownText: React.ReactNode|React.ReactNode[];\n    countries: TdApi.countryInfo[],\n}\n\n/**\n * Renders the phone number step of authorization screen\n */\nexport default class AuthWindowStepPhoneNumber extends React.Component<AuthWindowStepPhoneNumberProps, AuthWindowStepPhoneNumberState> {\n    constructor(args: AuthWindowStepPhoneNumberProps) {\n        super(args);\n        [this.Status, this.changeStatus] = manageStatusTextContent(this);\n    }\n    state= {\n        number: '',\n        number_p: '+',\n        invalid: false,\n        statusContent: '',\n        statusVisible: false,\n        dropDownText: '',\n        countries: [],\n    };\n\n    changeStatus: (status: React.ReactNode|React.ReactNode[])=> void;\n    Status: ()=> JSX.Element;\n\n    ref1= React.createRef<HTMLInputElement>();\n    ref2= React.createRef<HTMLInputElement>();\n\n    componentDidMount(): void {\n        TdLib.sendQuery({\n            '@type': 'getCountries',\n        }).then((result) => {\n            this.setState({\n                countries: result.countries,\n            });\n        });\n    }\n\n\n    handlePNFieldChange = (event: React.ChangeEvent<HTMLInputElement>): void => {\n        const value = event.target.value.replace(/[^0-9-]/g, '');\n        this.setState({\n            number: value,\n            invalid: false // We shouldn't show the phone number as invalid, since it has changed after submission\n        });\n        this.changeStatus(''); // The same\n    }\n\n    openCountryDropdown = (): void => {\n        addDialog('login-phone-number-country-selector-dialog', (\n            <CountrySelect id=\"login-phone-number-country-selector-dialog\"\n                countries={this.state.countries} onChange={cc=> {\n                    this.setState({\n                        number_p: cc,\n                        dropDownText: this.getCountryDropdownText(cc),\n                    });\n                }}/>\n        ));\n    }\n\n    getCountryDropdownText(callingCode: string): React.ReactNode|React.ReactNode[] {\n        let countryName= __('lng_bad_country_code');\n        if(callingCode == '+') {\n            countryName= __('lng_country_code');\n        }\n        for(const country of callingCodes) {\n            if( callingCode.slice(1) == country.callingCode) {\n                countryName = country.name;\n                break;\n            }\n        }\n        return countryName;\n    }\n\n    handlePNFieldChange_p = (event: React.ChangeEvent<HTMLInputElement>): void => {\n        const value = '+' + event.target.value.replace(/[^0-9-]/g, '');\n\n        if(value.length > 5) {\n            let length = 1;\n            for(const country of callingCodes) {\n                if(value.startsWith(country.callingCode, 1)) {\n                    length = country.callingCode.length+1;\n                    break;\n                }\n            }\n\n            const value_new = value.slice(0, length);\n            const rest= value.slice(length);\n\n            this.setState({\n                number_p: value_new,\n                number: rest + this.state.number,\n                invalid: false,\n                dropDownText: this.getCountryDropdownText(value_new)\n            });\n            this.ref2.current?.focus();\n        }\n        else {\n            this.setState({\n                number_p: value,\n                dropDownText: this.getCountryDropdownText(value)\n            });\n        }\n\n        this.changeStatus('');\n    }\n\n    handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>): void => { // Focus the previous field when the user presses the backspace key\n        if(e.nativeEvent.key === 'Backspace') {\n            if(this.state.number.length === 0) {\n                this.ref1.current?.focus();\n            }\n        }\n    }\n\n    submitNumber= (): void => {\n        const number = this.state.number_p + ' ' + this.state.number;\n        Auth.givePhoneNumber(number).catch((reason: TdApi.error)=> {\n            switch(reason.message){\n                case 'PHONE_NUMBER_FLOOD':\n                    addDialog( 'phone_number_flood_error',\n                        <ConfirmDialog width=\"320px\" hideCancelButton={true} largeFont={true} id=\"phone_number_flood_error\">\n                            {__('lng_error_phone_flood')}\n                        </ConfirmDialog>\n                    );\n                    this.changeStatus('');\n                    break;\n\n                case 'PHONE_NUMBER_INVALID':\n                    this.setState({invalid: true});\n                    this.changeStatus(__('lng_bad_phone'));\n                    break;\n\n                case 'Another authorization query has started': \n                    break;\n\n                default:\n                    // We don't know what error it is, so just show it to the user, he/she might understand it.\n                    this.setState({invalid: false});\n                    this.changeStatus(reason.message);\n                    break;\n            }\n        });\n    }\n    render (): JSX.Element {\n        const Status=this.Status;\n        return (\n            <div id=\"auth\" className=\"auth-step-phoneNumber\">\n\n                <h2>{__('lng_phone_title')}</h2>\n\n                <p className=\"description\">\n                    {__('lng_phone_desc')}\n                </p>\n\n                {//TODO: Add phone number placeholder\n                }\n\n                <div className=\"country-dropdown\" onClick={this.openCountryDropdown}>\n                    {this.state.dropDownText || __('lng_country_code')}\n                    <span dangerouslySetInnerHTML={{__html: intro_country_dropdown}}/>\n                </div>\n\n                <div className=\"phone-number-input\">\n                    <UnderlinedInput\n                        iRef={this.ref1}\n                        type=\"tel\" \n                        value={this.state.number_p} \n                        autoFocus={true}\n                        onChange={this.handlePNFieldChange_p}\n                        onEnterKeyPressed={this.submitNumber}\n                        preventNumberScrolling={false}/>\n                    \n                    <UnderlinedInput\n                        iRef={this.ref2}\n                        type=\"tel\" \n                        value={this.state.number} \n                        onChange={this.handlePNFieldChange}\n                        onEnterKeyPressed={this.submitNumber}\n                        invalid={this.state.invalid}\n                        preventNumberScrolling={false}\n                        onKeyDown={this.handleKeyDown}/>\n                </div>\n\n                <Status/>\n\n                <BigHighlightedButton\n                    onClick={this.submitNumber}>\n                    {__('lng_intro_next')}\n                </BigHighlightedButton>\n\n                <Provider store={connectionStore}>\n                    <ConnectionState/>\n                </Provider>\n            </div>\n        );\n    }\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { manageStatusTextContent } from '../../auth-screen';\nimport Auth from '../../../TdWeb/auth';\nimport UnderlinedInput from '../../../ui/elements/underlined-input';\nimport BigHighlightedButton from '../../../ui/elements/highlighted-button';\nimport { Provider } from 'react-redux';\nimport connectionStore from '../../../TdWeb/connectionStore';\nimport ConnectionState from '../../../ui/components/connecting';\nimport './verification-code.scss';\nimport __ from '../../../language-pack/language-pack';\n\n/**\n * Renders verification code step of authorization screen\n */\nexport default class AuthWindowStepCode extends React.Component {\n    static propTypes= {\n        info: PropTypes.object\n    };\n    constructor(args) {\n        super(args);\n        [this.Status, this.changeStatus] = manageStatusTextContent(this);\n    }\n    state= {\n        code: '',\n        invalid: false,\n        statusContent: '',\n        statusVisible: false\n    };\n\n    handleCodeFieldChange= (event) => {\n        this.setState({\n            code: event.target.value,\n            invalid: false // Verification code is changed, and we don't know if it is correct or not. Do not show it as invalid anymore\n        });\n        this.changeStatus('');\n        if(event.target.value.length==this.props.info.type.length) { // Automatically submit code if it is filled in\n            this.handleContinueButton(event.target.value);\n        }\n    }\n    handleContinueButton= (code) => {\n        // `code` might be the authorization code, or an event object. If it is not the authorization code, get it ourselves\n        if(typeof code != 'string') {\n            code= undefined;\n        }\n        code = code || this.state.code;\n\n        if(code.length!=this.props.info.type.length) return; // The code is not complete. It is definitely wrong.\n\n        Auth.checkAuthCode(code).catch(reason=> {\n            if(reason.message==='PHONE_CODE_INVALID'){\n                this.setState({invalid: true});\n                this.changeStatus(__('lng_bad_code'));\n            }\n            else {\n                // We don't know the error, all we can do is to just inform the user about it\n                this.setState({invalid: true});\n                this.changeStatus(reason.message);\n            }\n        });\n    }\n    render () {\n        const Status = this.Status;\n\n        var message= (this.props.info.type['@type']=='authenticationCodeTypeSms') ?\n            (<p className=\"description\">{__('lng_code_desc')}</p>) \n            :\n            (<p className=\"description\">{__('lng_code_from_telegram')}</p>);\n            \n        return (\n            <div id=\"auth\" className=\"auth-step-code\">\n\n                <h2>{this.props.info.phone_number}</h2>\n\n                {message}\n\n                <UnderlinedInput\n                    type=\"number\" \n                    value={this.state.code} \n                    onChange={this.handleCodeFieldChange}\n                    autoFocus={true}\n                    title={__('lng_code_ph')}\n                    maxLength={this.props.info.type.length}\n                    onEnterKeyPressed={this.handleContinueButton}\n                    invalid={this.state.invalid}\n                    preventNumberScrolling={true}/>\n\n                <Status/>\n\n                <BigHighlightedButton\n                    onClick={this.handleContinueButton}>\n                    {__('lng_intro_next')}\n                </BigHighlightedButton>\n\n                <Provider store={connectionStore}>\n                    <ConnectionState/>\n                </Provider>\n            </div>\n        );\n    }\n}","import React from 'react';\nimport { manageStatusTextContent } from '../../auth-screen';\nimport Auth from '../../../TdWeb/auth';\nimport UnderlinedInput from '../../../ui/elements/underlined-input';\nimport LinkButton from '../../../ui/elements/link-button';\nimport BigHighlightedButton from '../../../ui/elements/highlighted-button';\nimport { Provider } from 'react-redux';\nimport connectionStore from '../../../TdWeb/connectionStore';\nimport ConnectionState from '../../../ui/components/connecting';\nimport './cloud-password.scss';\nimport __, { __fmt } from '../../../language-pack/language-pack';\nimport TdApi from '../../../TdWeb/td_api';\n\ntype AuthWindowStepPasswordProps = {\n    info: TdApi.authorizationStateWaitPassword;\n}\n\ntype AuthWindowStepPasswordState = {\n    password: string;\n    invalid: boolean;\n    statusContent: React.ReactNode|React.ReactNode[]|null;\n    statusVisible: boolean;\n}\n\n/**\n * Renders 2FA password step of authorization screen\n */\nexport default class AuthWindowStepPassword extends React.Component<AuthWindowStepPasswordProps, AuthWindowStepPasswordState> {\n    constructor(args: AuthWindowStepPasswordProps) {\n        super(args);\n        [this.Status, this.changeStatus] = manageStatusTextContent(this);\n    }\n    state= {\n        password: '',\n        invalid: false,\n        statusContent: '',\n        statusVisible: false\n    };\n    changeStatus: (status: React.ReactNode|React.ReactNode[])=> void;\n    Status: ()=> JSX.Element;\n    handlePasswordFieldChange= (event: React.ChangeEvent<HTMLInputElement>): void => {\n        this.setState({\n            password: event.target.value,\n            invalid: false, // Password was changed, and we don't know if it is wrong or not. We should not show it as wrong\n        });\n        this.changeStatus(''); // Same\n    }\n    handleContinueButton= (): void => {\n        Auth.check2FACode(this.state.password).catch(reason=> {\n            if(reason.message=='PASSWORD_HASH_INVALID') {\n                this.setState({invalid: true});\n                this.changeStatus(__('lng_signin_bad_password'));\n            }\n            else {\n                // We don't know what the error is, so all we can do is to show it to the user\n                this.setState({invalid: true});\n                this.changeStatus(reason.message);\n            }\n        });\n    }\n    render (): JSX.Element {\n        const Status=this.Status;\n        return (\n            <div id=\"auth\" className=\"auth-step-password\">\n                <div className=\"content\">\n\n                    <h2>{__('lng_signin_title')}</h2>\n\n                    <p className=\"description\">{__('lng_signin_desc')}</p>\n\n                    <UnderlinedInput\n                        type=\"password\"\n                        value={this.state.password} \n                        onChange={this.handlePasswordFieldChange}\n                        autoFocus={true} \n                        title={__('lng_signin_password')}\n                        onEnterKeyPressed={this.handleContinueButton}\n                        disableCopy={true}\n                        invalid={this.state.invalid}/>\n\n                    <div className=\"hint\">\n                        {this.props.info.password_hint?__fmt('lng_signin_hint', {password_hint: this.props.info.password_hint}):<span>&nbsp;</span>}\n                    </div>\n\n                    <div className=\"forgot-password\">\n                        <LinkButton>{__('lng_signin_recover')}</LinkButton>\n                    </div>\n\n                    <Status/>\n\n                    <BigHighlightedButton \n                        onClick={this.handleContinueButton}>\n                        {__('lng_intro_submit')}\n                    </BigHighlightedButton>\n\n                </div>\n                <Provider store={connectionStore}>\n                    <ConnectionState/>\n                </Provider>\n            </div>\n        );\n    }\n}","import React from 'react';\nimport RippleEffect, { handleMyMouseEventsFunction, RippleEffectProps_AutoSettable } from '../../../ui/elements/ripple-effect';\nimport { new_chat_photo } from '../../../ui/icon/icons';\nimport './signup-profile-photo.scss';\nimport { blobToUrl } from '../../../TdWeb/file';\n\ntype SignUpProfilePicProps= {\n    image: Blob|null,\n    onChange: React.ChangeEventHandler<HTMLInputElement>\n}\n\nexport default function SignUpProfilePic({image, onChange}: SignUpProfilePicProps): React.ReactElement {\n    const ripple= React.useState<RippleEffectProps_AutoSettable>({state: 'off'});\n    const rippleEvents= handleMyMouseEventsFunction(ripple);\n    return (\n        <div className={'icon-button sign-up-profile-pic' + (image? ' has-image' : '')} {...rippleEvents}>\n\n            {image && <img src={blobToUrl(image)} alt=\"profile\"/>}\n            <RippleEffect {...ripple[0]} color=\"var(--theme-color-activeButtonBgRipple)\" small={true}/>\n            <span dangerouslySetInnerHTML={{__html: new_chat_photo}} />\n            <label>\n                <input type=\"file\" accept=\"image/*\" onChange={onChange} />\n            </label>\n        </div>\n    );\n}\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport Auth from '../../../TdWeb/auth';\nimport connectionStore from '../../../TdWeb/connectionStore';\nimport ConfirmDialog from '../../../ui/dialog/confirm-dialog';\nimport { addDialog } from '../../../ui/dialog/dialogs';\nimport BigHighlightedButton from '../../../ui/elements/highlighted-button';\nimport UnderlinedInput from '../../../ui/elements/underlined-input';\nimport ConnectionState from '../../../ui/components/connecting';\nimport TdLib from '../../../TdWeb/tdlib';\nimport LinkButton from '../../../ui/elements/link-button';\nimport SignUpProfilePic from './signup-profile-photo';\nimport './register.scss';\nimport __, { __fmt } from '../../../language-pack/language-pack';\nimport TdApi from '../../../TdWeb/td_api';\n\ntype AuthWindowStepRegisterProps = {\n    tos: TdApi.termsOfService\n}\n\ntype AuthWindowStepRegisterState = {\n    firstName: string,\n    lastName: string,\n    statusContent: React.ReactNode|React.ReactNode[],\n    statusVisible: boolean,\n    image: Blob|null,\n    textUnderField: string,\n}\n\n/**\n * Render sign up step of authorization screen\n */\nexport default class AuthWindowStepRegister extends React.Component<AuthWindowStepRegisterProps, AuthWindowStepRegisterState> {    \n    state= {\n        firstName: '',\n        lastName: '',\n        statusContent: '',\n        statusVisible: false,\n        image: null,\n        textUnderField: '',\n    };\n    handleFirstNameFieldChange= (event: React.ChangeEvent<HTMLInputElement>): void => {\n        this.setState({firstName: event.target.value});\n    }\n    handleLastNameFieldChange= (event: React.ChangeEvent<HTMLInputElement>): void => {\n        this.setState({lastName: event.target.value});\n    }\n    handleContinueButton= (): void => {\n        Auth.registerNewAccount(this.state.firstName, this.state.lastName).catch(reason=> {\n            this.setState({textUnderField: reason.message});\n        }).then(()=> {\n            if(this.state.image) {\n                TdLib.sendQuery({\n                    '@type': 'setProfilePhoto',\n                    photo: {\n                        '@type': 'inputChatPhotoStatic',\n                        photo: {\n                            '@type': 'inputFileBlob',\n                            data: this.state.image,\n                        }\n                    }\n                });\n            }\n        });\n    }\n\n    showTos= (): void => {\n        addDialog('signup-tos-dialog', (\n            <ConfirmDialog id=\"signup-tos-dialog\" width=\"364px\"\n                hideCancelButton={true} title={__('lng_terms_header')}>\n                \n                {this.props.tos.text.text}\n            </ConfirmDialog>\n        ));\n    }\n\n    render (): JSX.Element {\n        return (\n            <div className=\"auth-container\">\n                <div id=\"auth\" className=\"auth-step-signup\">\n                    <div className=\"content\">\n\n                        <h2>{__('lng_signup_title')}</h2>\n\n                        <p className=\"description\">{__('lng_signup_desc')}</p>\n\n                        <SignUpProfilePic image={this.state.image} onChange={(e: React.ChangeEvent<HTMLInputElement>)=> this.setState({\n                            image: e.target.files?.[0] || null\n                        })}/>\n\n                        <UnderlinedInput\n                            type=\"text\" \n                            title={__('lng_signup_firstname')}\n                            value={this.state.firstName} \n                            onChange={this.handleFirstNameFieldChange}\n                            autoFocus={true} />\n\n                        <UnderlinedInput \n                            type=\"text\" \n                            title={__('lng_signup_lastname')}\n                            value={this.state.lastName} \n                            onChange={this.handleLastNameFieldChange} />\n\n                        <div className=\"status\">\n                            {this.state.textUnderField || ''}\n                        </div>\n\n                        <BigHighlightedButton\n                            onClick={this.handleContinueButton}>\n                            {__('lng_intro_finish')}\n                        </BigHighlightedButton>\n\n                    </div>\n                    <Provider store={connectionStore}>\n                        <ConnectionState/>\n                    </Provider>\n                </div>\n                <div className=\"tos-notice\">\n                    {__fmt('lng_terms_signup', {link: <LinkButton onClick={this.showTos}>{__('lng_terms_signup_link')}</LinkButton>})} \n                </div>\n            </div>\n        );\n    }\n}","import React from 'react';\nimport TdLib from '../TdWeb/tdlib';\nimport {MessengerWindow} from '../messenger/messengerWindow';\nimport Dialogs, { dialogStore } from '../ui/dialog/dialogs';\nimport './auth.scss';\nimport { connect, Provider } from 'react-redux';\nimport AuthWindowStepPhoneNumber from './auth-step/phone-number/phone-number';\nimport AuthWindowStepCode from './auth-step/verification-code/verification-code';\nimport AuthWindowStepPassword from './auth-step/cloud-password/cloud-password';\nimport AuthWindowStepRegister from './auth-step/register/register';\nimport { createStore } from 'redux';\nimport { themeStore } from '../ui/themes/theme';\nimport { _s__ } from '../language-pack/language-pack';\nimport LoadingSpinner from '../ui/elements/loading-spinner';\nimport TdApi from '../TdWeb/td_api';\n\ntype AuthStoreState = {\n    state: TdApi.AuthorizationState | null;\n}\n\ntype AuthStoreAction_SetState = {\n    type: 'SET_STATE';\n    state: TdApi.AuthorizationState;\n}\n\nexport const authStore = createStore<AuthStoreState, AuthStoreAction_SetState, any, any>(\n    (state= { 'state': null }, action) => {\n        switch (action.type) {\n            case 'SET_STATE':\n                return {\n                    ...state,\n                    'state': action.state\n                };\n            default:\n                return state;\n        }\n    }\n);\n\n\ntype ComponentWithStatusText= React.Component<unknown, {\n    statusContent: React.ReactNode|React.ReactNode[]|null;\n    statusVisible: boolean;\n}>;\n\n/**\n * Returns 2 functions that can be used for managing status text content\n * \n * @param thisClass pass `this` as this argument\n * @returns Store this function and call it to change \n */\nexport function manageStatusTextContent(thisClass: ComponentWithStatusText): [\n    ()=> JSX.Element,\n    (status: React.ReactNode|React.ReactNode[])=> void\n] {\n    return [ \n        function Status() {\n            return (\n                <div className={'status'+ (thisClass.state.statusVisible?'':' hidden')}>{thisClass.state.statusContent}</div>\n            );\n        },\n        function changeStatus(string) {\n            if(string) {\n                thisClass.setState({\n                    statusContent: string,\n                    statusVisible: true\n                });\n            } else {\n                thisClass.setState({\n                    statusVisible: false\n                });\n                setTimeout(() => {\n                    if(!thisClass.state.statusVisible) { // Prevent timeout overlapping with later status changes\n                        thisClass.setState({\n                            statusContent: null\n                        });\n                    }\n                }, 1000);\n            }\n        }\n    ];\n}\n\ntype MainAppProps= {\n    step?: TdApi.AuthorizationState;\n}\n\n/**\n * Renders the messenger or authorization screens (layer 1). Does not include dialogs and toasts\n */\nexport const MainApp= connect<MainAppProps, unknown, Record<string, never>, AuthStoreState>(state=> ({step: state.state} as MainAppProps))(\n    class MainApp extends React.Component<MainAppProps> {\n        componentDidMount(){\n            // Handle authorization state updates\n            TdLib.registerUpdateHandler<TdApi.updateAuthorizationState>('updateAuthorizationState', (update) => {\n                authStore.dispatch({\n                    type: 'SET_STATE',\n                    state: update.authorization_state\n                });\n            });\n        }\n\n        shouldComponentUpdate(nextProps: MainAppProps): boolean {\n            // Some authorization states are handled without the user knowing. We don't change what's shown to the users if that happens.\n            const states= [\n                'authorizationStateWaitPhoneNumber',\n                'authorizationStateWaitCode',\n                'authorizationStateWaitPassword',\n                'authorizationStateWaitRegistration',\n                'authorizationStateReady',\n                'authorizationStateClosed',\n            ];\n            if(states.includes(nextProps.step?.['@type'] || '')) {\n                return true;\n            }\n            return false;\n        }\n        \n        render () {\n            switch (this.props.step?.['@type']) {\n                case 'authorizationStateWaitPhoneNumber':\n                    // Enter your phone number\n                    return (\n                        <React.Fragment>\n                            <Provider store={dialogStore}>\n                                <Dialogs/>\n                            </Provider>\n                            <AuthWindowStepPhoneNumber/>\n                        </React.Fragment>\n                    );\n\n                case 'authorizationStateWaitCode':\n                    // Enter the verification code sent to you\n                    return (\n                        <React.Fragment>\n                            <Provider store={dialogStore}>\n                                <Dialogs/>\n                            </Provider>\n                            <AuthWindowStepCode info={this.props.step.code_info}/>\n                        </React.Fragment>\n                    );\n\n                case 'authorizationStateWaitPassword':\n                    // Enter your 2-factor auth password\n                    return (\n                        <React.Fragment>\n                            <Provider store={dialogStore}>\n                                <Dialogs/>\n                            </Provider>\n                            <AuthWindowStepPassword info={this.props.step}/>\n                        </React.Fragment>\n                    );\n\n                case 'authorizationStateWaitRegistration':\n                    // There isn't an account on this number, you need to sign up\n                    return (\n                        <React.Fragment>\n                            <Provider store={dialogStore}>\n                                <Dialogs/>\n                            </Provider>\n                            <AuthWindowStepRegister tos={this.props.step.terms_of_service}/>\n                        </React.Fragment>\n                    );\n\n                case 'authorizationStateReady':\n                    // Logged in\n                    return (\n                        <Provider store={themeStore}>\n                            <MessengerWindow/>\n                        </Provider>\n                    );\n\n                case 'authorizationStateClosed':\n                    // TDLib session is closed.\n                    window.location.reload();\n                    return (\n                        <p>{_s__('lngd_auth_closed_restart')}</p>\n                    );\n                \n                default:\n                    // TDLib is still loading\n                    return (\n                        <div id=\"auth\" className=\"loading\">\n                            <LoadingSpinner size={50} lineWidth={5} progressColor=\"var(--theme-color-menuIconFg)\"/>\n                        </div>\n                    );\n            }\n        }\n    }\n);\n","import TdLib from './tdlib';\n\n/**\n * Sets initial online state\n */\nexport default function setInitialOnlineStatus(): void {\n    TdLib.sendQuery({\n        '@type': 'setOption',\n        name: 'online',\n        value: {\n            '@type': 'optionValueBoolean',\n            value: document.hasFocus()\n        }\n    });\n}\n\nwindow.onfocus = () => { // Become online when tab/window focuses\n    TdLib.sendQuery({\n        '@type': 'setOption',\n        name: 'online',\n        value: {\n            '@type': 'optionValueBoolean',\n            value: true\n        }\n    });\n};\n\nwindow.onblur = () => { // Become offline when switching tabs/windows\n    TdLib.sendQuery({\n        '@type': 'setOption',\n        name: 'online',\n        value: {\n            '@type': 'optionValueBoolean',\n            value: false\n        }\n    });\n};","import React from 'react';\nimport { Provider } from 'react-redux';\nimport {authStore, MainApp} from './dibgram/auth/auth-screen';\nimport { initLanguagePack } from './dibgram/language-pack/language-pack';\nimport setInitialOnlineStatus from './dibgram/TdWeb/online-handler';\nimport TdLib from './dibgram/TdWeb/tdlib';\nimport TdApi from './dibgram/TdWeb/td_api';\nimport ConfirmDialog from './dibgram/ui/dialog/confirm-dialog';\nimport {addDialog} from './dibgram/ui/dialog/dialogs';\nimport { toastStore, Toasts } from './dibgram/ui/dialog/toast';\nimport './dibgram/ui/main.scss';\nimport { ContextMenus, contextMenusStore } from './dibgram/ui/menu/context-menu';\nimport { ThemeProvider, themeStore } from './dibgram/ui/themes/theme';\n\nTdLib.initializeTdLib().then(function () {\n    setInitialOnlineStatus();\n    initLanguagePack();\n});\n\nif(process.env.NODE_ENV== 'development') {\n    //eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (window as any)['sendQuery']= TdLib.sendQuery;\n}\n\n/**\n * Renders the whole React app\n */\nfunction App(): JSX.Element {\n    React.useEffect(() => { // A fatal error occurred in TdLib\n        TdLib.registerUpdateHandler<TdApi.updateFatalError>('updateFatalError', function (update) {\n            console.error('Fatal error:', update.error);\n            \n            addDialog( 'tdlib_fatal_error',\n                <ConfirmDialog \n                    width=\"400px\" \n                    hideCancelButton={true} \n                    id=\"tdlib_fatal_error\" \n                    thirdButton=\"Refresh\"\n                    onThirdButtonClick={window.location.reload.bind(window.location)}\n                    thirdButtonClosesDialog={false}\n                    title=\"Fatal Error\">\n                    \n                    A fatal error occurred in TdLib.<br/> \n                    Try refreshing, clearing site data or opening \n                    DIBgram in a private window. <br/>\n                    If none of these helped, report this to the developers \n                    by <a href=\"https://github.com/DIBgram/DIBgram/issues/new/choose\" rel=\"noreferrer\" target=\"_blank\"\n                        style={{color: 'var(--theme-color-windowActiveTextFg)'}}>filing an issue.</a>\n                    <br/><br/>\n                    <pre>{update.error.toString()}</pre>\n                </ConfirmDialog>\n            );\n        });\n    }, []);\n\n    return (\n        <Provider store={themeStore}>\n            <ThemeProvider id=\"app\">\n                <Provider store={toastStore}>\n                    <Toasts/>\n                </Provider>\n                <Provider store={authStore}>\n                    <MainApp/>\n                </Provider>\n                <Provider store={contextMenusStore}>\n                    <ContextMenus/>\n                </Provider>\n            </ThemeProvider>\n        </Provider>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\n/* eslint-disable indent */\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}