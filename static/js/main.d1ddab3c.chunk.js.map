{"version":3,"sources":["remove-item-from-array.js","dibgram/TdWeb/tdlib.js","dibgram/TdWeb/config.js","version.js","dibgram/TdWeb/auth.js","dibgram/ui/icon/chat_filters/chat-filters.js","dibgram/ui/elements/ripple-effect.js","dibgram/ui/elements/icon-button.js","dibgram/ui/icon/icons.js","dibgram/messenger/sections/navigation-menu/hamburger-menu/menu-button.js","dibgram/messenger/chat-store.js","dibgram/ui/scroll/scrollbar.js","dibgram/messenger/sections/navigation-menu/chat-folders.js","dibgram/ui/elements/loading-spinner.js","dibgram/ui/components/connecting.js","dibgram/TdWeb/file.js","dibgram/TdWeb/options.js","dibgram/ui/img/TgLogo.png","dibgram/ui/components/profile-photo.js","dibgram/messenger/users-store.js","dibgram/messenger/payments/currency-tostring.js","dibgram/messenger/message/message-summary-noicon.js","dibgram/ui/elements/link-button.js","dibgram/messenger/supergroup-store.js","dibgram/time-tostring.js","dibgram/ui/menu/menu.js","dibgram/ui/menu/context-menu.js","dibgram/ui/dialog/dialogs.js","dibgram/ui/dialog/toast.js","dibgram/ui/elements/small-button.js","dibgram/ui/dialog/confirm-dialog.js","dibgram/messenger/sections/navigation-menu/chat-list.js","dibgram/messenger/chat-misc.js","dibgram/messenger/message-misc.js","dibgram/messenger/sections/navigation-menu/search/search-box.js","dibgram/TdWeb/connectionStore.js","dibgram/messenger/sections/navigation-menu/chat-list-bar.js","dibgram/ui/tool-strip/tool-strip.js","dibgram/ui/tool-strip/button.js","dibgram/ui/tool-strip/section.js","dibgram/messenger/sections/navigation-menu/hamburger-menu/menu.js","dibgram/messenger/messengerWindow.js","dibgram/ui/elements/highlighted-button.js","dibgram/ui/elements/underlined-input.js","dibgram/auth/auth-screen.js","dibgram/ui/themes/dibgram-theme-to-css.js","dibgram/ui/themes/theme.js","App.js","index.js"],"names":["Array","prototype","remove","item","i","this","length","splice","getUseTestDc","urlPar","URL","window","location","href","searchParams","get","TdLib","log","use_test_dc","log_updates","log_queries","TdClient","useDatabase","instanceName","onUpdate","update","console","forEach","h","sendQuery","type","handler","undefined","push","query","Promise","resolve","reject","send","then","result","error","registerUpdateHandler","credentials","api_id","api_hash","auth_state","version","Auth","number","code","pass","first","last","chatFilerIcons","All","Bots","Channels","Custom","Groups","Private","Setup","Unread","Cat","Crown","Favorite","Flower","Game","Home","Love","Mask","Party","Sport","Study","Trade","Travel","Work","RippleEffect","props","small","X","Y","width","rX","rY","height","Math","hypot","abs","max","state","className","style","getMaxRadius","backgroundColor","color","React","Component","handleMyMouseEvents","This","e","ripple","setState","setTimeout","nativeEvent","offsetX","offsetY","target","clientWidth","clientHeight","bind","mouseUp","handleMyMouseEventsFunction","setRipple","up","IconButton","icon","rest","useState","onMouseDown","onMouseUp","onMouseLeave","dangerouslySetInnerHTML","__html","archive_userpic","HamburgerMenuButton","WithFolders","mouseDown","mouseLeave","id","onClick","PureComponent","WithoutFolders","chatStore","createStore","currentChatList","archiveState","archiveButtonState","localStorage","getItem","chats","filters","unread","main","archive","action","chatList","chat_list","unread_messages_count","unread_count","unread_unmuted_messages_count","unread_unmuted_count","chat_filter_id","total_chats_count","total_count","unread_chats_count","unread_unmuted_chats_count","marked_as_unread_chats_count","marked_as_unread_count","marked_as_unread_unmuted_chats_count","marked_as_unread_unmuted_count","chat","map","chat_id","changed","newChat","positions","position","compareChatList","list","filter","payload","property","value","photo","title","last_message","__REDUX_DEVTOOLS_EXTENSION__","dispatch","action_bar","default_disable_notification","draft_message","chat_filters","has_scheduled_messages","is_blocked","is_marked_as_unread","notification_settings","online_member_count","permissions","last_read_inbox_message_id","last_read_outbox_message_id","reply_markup_message_id","unread_mention_count","list1","list2","ScrollView","mouseEntered","setMouseEntered","timeoutId","setTimeoutId","scrollBarWidth","propsRest","data-mouse-entered","renderTrackHorizontal","renderTrackVertical","renderThumbHorizontal","renderThumbVertical","onMouseEnter","clearTimeout","autoHide","autoHideTimeout","hideTracksWhenNotNeeded","ChatFolder","folder","active","icon_name","iconName","setIconName","useEffect","text","data-muted","connect","folders","currentFolder","onHamburgerMenuOpened","LoadingSpinner","percentage","percent","caps","trackColor","spin","transitionDuration","intervalNum","setInterval","clearInterval","size","PropTypes","isRequired","lineWidth","progressColor","string","includes","downloadCallbacks","getFileContent","file","priority","local","is_downloading_completed","is_downloading_active","callback","catch","file_id","onReject","downloadFile","options","name","profileNameToInitials","words","replace","toUpperCase","split","ProfilePhoto","customIcon","setPhoto","photoObj","setPhotoObj","isServiceMessages","isSavedMessages","isReplies","mounted","blob","data","webkitURL","createObjectURL","disableSavedMessages","tgLogo","Initials","Fragment","src","getChatTypeId","supergroup_id","basic_group_id","user_id","usersStore","user","currencyAmountToString","currency","total_amount","currencyObject","currencies","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","format","exp","MessageSummaryWithoutIcon","users","message","content","MayHaveCaption","caption","audio","file_name","performer","SenderFullName","is_outgoing","discard_reason","members","member_user_ids","last_name","first_name","slice","join","sender","is_channel_post","deletedMember","includeYou","86400","604800","2678400","ttl","emoji","document","game","noGameTitleFallback","score","GameScoreWithTitle","lazy","message_id","game_message_id","default","Suspense","fallback","passportDataTypeToString","passportDataTypes","types","noInvoiceTitleFallback","PaymentInfoWithInvoiceTitle","invoice_message_id","is_secret","poll","question","sticker","venue","domain_name","MessageSummarySender","part1","LinkButton","children","click","open","supergroupStore","supergroup","smallDateTimeToString","date","TdLibDateToDate","now","Date","yesterday","getTime","lastWeek","hours","getHours","minutes","getMinutes","ampm","timeToString","getDay","weekdayToString","day","getDate","month","getMonth","year","String","getFullYear","dateToString","tdLibDate","Menu","ContextMenu","x","y","MenuContents","MenuItem","propTypes","node","contextMenusStore","menu","ContextMenus","menus","createContextMenu","preventDefault","pageX","pageY","onAnywhereClicked","dialogStore","dialog","addDialog","element","removeDialog","Dialogs","dialogs","el","Toast","closed","setClosed","SmallButton","data-attention","attention","ConfirmDialog","closing","handleOK","closeDialog","onOK","handleCancel","onCancel","handleButton","data-id","thirdButton","thirdButtonClosesDialog","onThirdButtonClick","hideCancelButton","OKButtonText","getChatsFromList","order","sort","a","b","order1","order2","ChatList","connectionState","nextProps","array","store","EmptyChatList","ChatListItem","nextState","is_pinned","chatType","is_channel","getState","isChatWithDeletedAccount","isVerified","is_verified","isChatVerified","messageStatus","sending_state","getMessageStatus","unreadBadge","unreadBadgeClass","mute_for","onContextMenu","ChatContextMenu","input_message_text","movableChatLists","setMovableChatLists","chat_lists","ArchivedChatsItem","chatsInList","onArchiveOpen","setButtonState","moveToMainMenuToast","setItem","SearchBox","placeholder","onChange","data-visible","connectionStore","connection","ChatListBar","useFolders","searchText","setSearchText","ToolStrip","Button","Section","HamburgerMenu","visible","onClose","me","setMe","phone_number","phone_number_prefix","info","country_calling_code","formatted_phone_number","ref","useRef","current","focus","showArchivedChats","onKeyDown","key","tabIndex","profile_photo","newState","MessengerWindow","isMenuOpen","setIsMenuOpen","BigHighlightedButton","UnderlinedInput","args","handleFocus","inactive","titleClass","getTitleClass","handleBlur","mouseX","handleMouseDown","handleKeyDown","onEnterKeyPressed","autoFocus","invalid","onFocus","onBlur","maxLength","onCopy","disableCopy","initialAuthState","setInitialAuthState","manageStatusTextContent","thisClass","Status","statusVisible","statusContent","changeStatus","MainApp","step","handleAuthStateUpdate","code_info","reload","AuthWindowStepPhoneNumber","handlePNFieldChange","event","submitNumber","givePhoneNumber","reason","AuthWindowStepCode","handleCodeFieldChange","handleContinueButton","checkAuthCode","AuthWindowStepPassword","password","handlePasswordFieldChange","check2FACode","body","password_hint","AuthWindowStepRegister","firstName","lastName","handleFirstNameFieldChange","handleLastNameFieldChange","registerNewAccount","textUnderField","convertThemeToCSS","theme","css","obj","equals","themes","classic","tinted","night","ThemeProvider","data-theme-is-dark","isThemeDark","isDark","initializeTdLib","res","App","simulateFatalError","rel","toString","ReactDOM","render","StrictMode","getElementById"],"mappings":"8o2MAKAA,MAAMC,UAAUC,OAAS,SAAUC,GAC/B,IAAK,IAAIC,EAAI,EAAGA,EAAIC,KAAKC,OAAQF,IACxBC,KAAKD,KAAOD,GACbE,KAAKE,OAAOH,EAAG,IAKZJ,MAAMC,UAArB,OAAeD,I,qICVR,SAASQ,IACZ,IAAIC,EAAO,IAAIC,IAAIC,OAAOC,SAASC,MAAMC,aAAaC,IAAI,QAC1D,QAAGN,IACiB,MAATA,GAAyB,SAATA,G,8DAYVO,E,2IASjB,2FACWC,EC5B8H,CAACC,aAAa,EAAMD,IAAK,CAACE,aAAa,EAAKC,aAAa,ID4BvLH,IACP,YAAAD,EAAK,GAAL,GAAiB,IAAIK,IAAS,CAC1BC,aAAa,EACbC,cAnBD,IAAIb,IAAIC,OAAOC,SAASC,MAAMC,aAAaC,IAAI,YAAc,MAmBjBP,IAAiB,OAAS,cACrEgB,SAAU,SAAUC,GACbR,EAAIE,aACHO,QAAQT,IAAI,WAAWQ,GAExB,YAAAT,EAAK,GAAL,GAAsBS,EAAO,WAC5B,YAAAT,EAAK,GAAL,GAAsBS,EAAO,UAAUE,SAAQ,SAAAC,GAAC,OAAIA,EAAEH,SAVtE,SAciBT,EAAMa,UAAU,CAAC,QAAS,0BAd3C,mF,yFAsBA,SAA6BC,EAAMC,QACEC,IAA9B,YAAAhB,EAAK,GAAL,GAAsBc,KACrB,YAAAd,EAAK,GAAL,GAAsBc,GAAO,IAEjC,YAAAd,EAAK,GAAL,GAAsBc,GAAMG,KAAKF,K,qCAQrC,SAA+BD,EAAMC,QACAC,IAA9B,YAAAhB,EAAK,GAAL,GAAsBc,IAGzB,YAAAd,EAAK,GAAL,GAAsBc,GAAM5B,OAAO6B,K,uBASvC,SAAiBG,GACb,IAAOjB,EC3E8H,CAACC,aAAa,EAAMD,IAAK,CAACE,aAAa,EAAKC,aAAa,ID2EvLH,IAIP,OAHGA,EAAIG,aACHM,QAAQT,IAAI,UAAUiB,GAEnB,IAAIC,SAAQ,SAACC,EAASC,GACzB,YAAArB,EAAK,GAAL,GAAgBsB,KAAKJ,GAAOK,MAAK,SAAAC,GAC1BvB,EAAIG,aACHM,QAAQT,IAAI,iBAAkBuB,GAElCJ,EAAQI,MACT,SAAAC,GACIxB,EAAIG,aACHM,QAAQe,MAAM,iBAAkBA,GAEpCJ,EAAOI,a,2BAvEFzB,E,oDAAAA,E,qBAIM,KEtBZ,oBCKfA,EAAM0B,sBAAsB,4BAA2B,SAAUjB,GAC7D,IAAMkB,EFN+B,CAACC,OAAQ,QAAQC,SAAU,oCEO1DC,EAAYrB,EAAM,oBAEC,wCAAtBqB,EAAW,UACV9B,EAAMa,UAAU,CAAC,QAAS,6BAA8B,eAAkB,KAErD,0CAAtBiB,EAAW,UACV9B,EAAMa,UAAU,CACZ,QAAS,qBACT,WAAc,CACV,mBAAsB,QACtB,sBAAwB,EACxB,kBAAoB,EACpB,OAAUc,EAAYC,OACtB,SAAYD,EAAYE,SACxB,qBAAwB,KACxB,aAAgB,MAChB,oBAAuBE,EACvB,0BAA4B,EAC5B,YAAevC,U,IASVwC,E,2IAMjB,WAA6BC,GAA7B,iFACiBjC,EAAMa,UAAU,CAAC,QAAS,+BAAgC,aAAgBoB,IAD3F,mF,yHAQA,WAA2BC,GAA3B,iFACiBlC,EAAMa,UAAU,CAAC,QAAS,0BAA2B,KAAQqB,IAD9E,mF,wHAQA,WAA0BC,GAA1B,iFACiBnC,EAAMa,UAAU,CAAC,QAAS,8BAA+B,SAAYsB,IADtF,mF,8HASA,WAAgCC,EAAOC,GAAvC,iFACiBrC,EAAMa,UAAU,CAAC,QAAS,eAAgB,WAAcuB,EAAO,UAAaC,IAD7F,mF,8ECpCWC,EAzBM,CACjBC,IAAU,CAAC,+7EAAD,wiGACVC,KAAU,CAAC,2+EAAD,u9DACVC,SAAU,CAAC,oxEAAD,oxCACVC,OAAU,CAAC,ogDAAD,m2BACVC,OAAU,CAAC,ygEAAD,u3CACVC,QAAU,CAAC,66CAAD,2iCACVC,MAAU,CAAC,i6CACXC,OAAU,CAAC,4lEAAD,45CAEVC,IAAU,CAAC,6gIAAD,2uFACVC,MAAU,CAAC,0hGAAD,o6DACVC,SAAU,CAAC,8rLAAD,msGACVC,OAAU,CAAC,irFAAD,wmEACVC,KAAU,CAAC,6zHAAD,k6EACVC,KAAU,CAAC,24DAAD,gwCACVC,KAAU,CAAC,2xCAAD,69BACVC,KAAU,CAAC,s5DAAD,o2CACVC,MAAU,CAAC,k3CAAD,8gDACVC,MAAU,CAAC,i1FAAD,2pGACVC,MAAU,CAAC,u7KAAD,o7EACVC,MAAU,CAAC,y5FACXC,OAAU,CAAC,svLAAD,wsHACVC,KAAU,CAAC,qxDAAD,83C,OCjBOC,E,kKAmBjB,WACI,GAAIxE,KAAKyE,MAAMC,MAgBR,CACH,MAA8B1E,KAAKyE,MAA5BE,EAAP,EAAOA,EAAGC,EAAV,EAAUA,EAAGC,EAAb,EAAaA,MACNC,EAAWH,EAAIE,EAAQ,EAAnBE,EAAsBH,EADjC,EAAoBI,OAC0B,EAE9C,OADwBC,KAAKC,MAAMD,KAAKE,IAAIL,GAAKG,KAAKE,IAAIJ,IAC/BF,EAAQ,EAVnC,OAAOI,KAAKG,IACAH,KAAKC,MAAMlF,KAAKyE,MAAME,EAAwB3E,KAAKyE,MAAMG,GACzDK,KAAKC,MAAMlF,KAAKyE,MAAMI,MAAQ7E,KAAKyE,MAAME,EAAK3E,KAAKyE,MAAMG,GACzDK,KAAKC,MAAMlF,KAAKyE,MAAME,EAAwB3E,KAAKyE,MAAMO,OAAShF,KAAKyE,MAAMG,GAC7EK,KAAKC,MAAMlF,KAAKyE,MAAMI,MAAQ7E,KAAKyE,MAAME,EAAK3E,KAAKyE,MAAMO,OAAShF,KAAKyE,MAAMG,M,oBASjG,WACI,MAAqB,OAAlB5E,KAAKyE,MAAMY,MAAqB,KAE/B,qBACIC,UAAW,UAAUtF,KAAKyE,MAAMY,OAAQrF,KAAKyE,MAAMC,MAAO,SAAS,IACnEa,MAAO,CACH,SAAUvF,KAAKyE,MAAMG,GAAK,GAAG,KAC7B,UAAW5E,KAAKyE,MAAME,GAAK,GAAG,KAC9B,WAAY3E,KAAKwF,eAAe,KAChCC,gBAAiBzF,KAAKyE,MAAMiB,a,GApDNC,IAAMC,WA2DzC,SAASC,EAAoBC,GAChC,MAAO,CAEF,SAASC,GAAI,IAAD,OAET,GAA4B,OAAzB/F,KAAKqF,MAAMW,OAAOX,MAejB,OAdArF,KAAKiG,SAAS,CACVD,OAAQ,CAAEX,MAAO,cAErBa,YAAW,WACP,EAAKD,SAAS,CACVD,OAAQ,CACJX,MAAO,UACPV,EAAGoB,EAAEI,YAAYC,QACjBxB,EAAGmB,EAAEI,YAAYE,QACjBxB,MAAOkB,EAAEO,OAAOC,YAChBvB,OAAQe,EAAEO,OAAOE,kBAG1B,IAGPxG,KAAKiG,SAAS,CACVD,OAAQ,CACJX,MAAO,UACPV,EAAGoB,EAAEI,YAAYC,QACjBxB,EAAGmB,EAAEI,YAAYE,QACjBxB,MAAOkB,EAAEO,OAAOC,YAChBvB,OAAQe,EAAEO,OAAOE,iBAG1BC,KAAKX,GAEP,SAASC,GACN/F,KAAKiG,SAAS,CACVD,OAAQ,CACJX,MAAO,WACPV,EAAGoB,EAAEI,YAAYC,QACjBxB,EAAGmB,EAAEI,YAAYE,QACjBxB,MAAOkB,EAAEO,OAAOC,YAChBvB,OAAQe,EAAEO,OAAOE,iBAG1BC,KAAKX,GAEP,SAASC,GACsB,WAAzB/F,KAAKqF,MAAMW,OAAOX,OACjBrF,KAAK0G,QAAQX,IAElBU,KAAKX,IAIT,SAASa,EAAT,GAA2D,IAAD,mBAApBX,EAAoB,KAAZY,EAAY,KAyB7D,SAASC,EAAGd,GACRa,EAAW,CACPvB,MAAO,WACPV,EAAGoB,EAAEI,YAAYC,QACjBxB,EAAGmB,EAAEI,YAAYE,QACjBxB,MAAOkB,EAAEO,OAAOC,YAChBvB,OAAQe,EAAEO,OAAOE,eAUzB,MAAO,CAxCP,SAAcT,GAEV,GAAiB,OAAdC,EAAOX,MAWN,OAVAuB,EAAU,CAAEvB,MAAO,aACnBa,YAAW,WACPU,EAAW,CACPvB,MAAO,UACPV,EAAGoB,EAAEI,YAAYC,QACjBxB,EAAGmB,EAAEI,YAAYE,QACjBxB,MAAOkB,EAAEO,OAAOC,YAChBvB,OAAQe,EAAEO,OAAOE,iBAEtB,IAGPI,EAAW,CACPvB,MAAO,UACPV,EAAGoB,EAAEI,YAAYC,QACjBxB,EAAGmB,EAAEI,YAAYE,QACjBxB,MAAOkB,EAAEO,OAAOC,YAChBvB,OAAQe,EAAEO,OAAOE,gBAoBXK,EANd,SAAed,GACM,WAAdC,EAAOX,OACNwB,EAAGd,K,+BC1JA,SAASe,EAAT,GAAsC,IAAjBC,EAAgB,EAAhBA,KAASC,EAAO,iBAC1ChB,EAAQL,IAAMsB,SAAS,CAAC5B,MAAO,QACrC,EAA8CsB,EAA4BX,GAA1E,mBAAOkB,EAAP,KAAoBC,EAApB,KAA+BC,EAA/B,KACA,OACI,iDAAQ9B,UAAU,eAAkB0B,GAApC,IAA+CE,cAAaC,YAAWC,eAAvE,UACI,sBAAMC,wBAAyB,CAACC,OAAQP,KACxC,cAAC,EAAD,2BAAkBf,EAAO,IAAzB,IAA6BN,MAAM,kCAAkChB,OAAO,SCPjF,IAAM6C,EAAe,+yDCGxBC,G,MAAqB,IAKzBA,EAAoBC,YAApB,kDASI,aAAe,IAAD,uBACV,gBANJpC,MAAO,CACHW,OAAQ,CACJX,MAAO,QAGD,MAEuCQ,EAAoB,gBAF3D,0BAET,EAAK6B,UAFI,KAEO,EAAKhB,QAFZ,KAEqB,EAAKiB,WAF1B,OATlB,0CAaI,WACI,OACI,yBAAQC,GAAG,wBAAwBtC,UAAU,eACzC4B,YAAalH,KAAK0H,UAClBP,UAAWnH,KAAK0G,QAChBU,aAAcpH,KAAK2H,WACnBE,QAAS7H,KAAKyE,MAAMoD,QAJxB,UAKI,sBAAKD,GAAG,OAAR,UAAe,yBAAa,yBAAa,4BACzC,cAAC,EAAD,2BAAkB5H,KAAKqF,MAAMW,QAA7B,IAAqCN,MAAM,+CArB3D,GAA2DC,IAAMmC,eA8BjEN,EAAoBO,eAAgB,SAAyBtD,GACzD,OACI,cAACqC,EAAD,aACIC,KD9Ba,6NC+Bba,GAAG,wBACHtC,UAAU,0BACNb,KAID+C,Q,gCCjDTQ,EAAWC,aAGjB,WAWY,IAXK5C,EAWN,uDAXa,CACpB6C,gBAAiB,CAAC,QAAS,gBAC3BC,aAAc,SACdC,mBAAoBC,aAAaC,QAAQ,sCACzCC,MAAO,GACPC,QAAS,GACTC,OAAQ,CACJC,KAAM,GACNC,QAAS,GACTH,QAAS,KAEdI,EAAQ,uCACP,OAAQA,EAAOnH,MACf,IAAK,wBACD,OAAO,2BACA4D,GADP,IAEI6C,gBAAiBU,EAAOC,WAEhC,IAAK,oBACD,OAAO,2BACAxD,GADP,IAEI8C,aAAcS,EAAOT,eAE7B,IAAK,8BACD,MAAiC,iBAA9BS,EAAOE,UAAU,SACT,2BACAzD,GADP,IAEIoD,OAAO,2BACApD,EAAMoD,QADP,IAEFC,KAAK,2BACErD,EAAMoD,OAAOC,MADhB,IAEAK,sBAAuBH,EAAOI,aAC9BC,8BAA+BL,EAAOM,2BAId,oBAA9BN,EAAOE,UAAU,SAChB,2BACAzD,GADP,IAEIoD,OAAO,2BACApD,EAAMoD,QADP,IAEFE,QAAQ,2BACDtD,EAAMoD,OAAOE,SADb,IAEHI,sBAAuBH,EAAOI,aAC9BC,8BAA+BL,EAAOM,2BAId,mBAA9BN,EAAOE,UAAU,SAChB,2BACAzD,GADP,IAEIoD,OAAO,2BACApD,EAAMoD,QADP,IAEFD,QAAQ,2BACDnD,EAAMoD,OAAOD,SADb,kBAEFI,EAAOE,UAAUK,eAFf,2BAGI9D,EAAMoD,OAAOD,QAAQI,EAAOE,UAAUK,iBAH1C,IAICJ,sBAAuBH,EAAOI,aAC9BC,8BAA+BL,EAAOM,6BAMnD7D,EACX,IAAK,2BACD,MAAiC,iBAA9BuD,EAAOE,UAAU,SACT,2BACAzD,GADP,IAEIoD,OAAO,2BACApD,EAAMoD,QADP,IAEFC,KAAK,2BACErD,EAAMoD,OAAOC,MADhB,IAEAU,kBAAmBR,EAAOS,YAC1BC,mBAAoBV,EAAOI,aAC3BO,2BAA4BX,EAAOM,qBACnCM,6BAA8BZ,EAAOa,uBACrCC,qCAAsCd,EAAOe,qCAIrB,oBAA9Bf,EAAOE,UAAU,SAChB,2BACAzD,GADP,IAEIoD,OAAO,2BACApD,EAAMoD,QADP,IAEFE,QAAQ,2BACDtD,EAAMoD,OAAOE,SADb,IAEHS,kBAAmBR,EAAOS,YAC1BC,mBAAoBV,EAAOI,aAC3BO,2BAA4BX,EAAOM,qBACnCM,6BAA8BZ,EAAOa,uBACrCC,qCAAsCd,EAAOe,qCAIrB,mBAA9Bf,EAAOE,UAAU,SAChB,2BACAzD,GADP,IAEIoD,OAAO,2BACApD,EAAMoD,QADP,IAEFD,QAAQ,2BACDnD,EAAMoD,OAAOD,SADb,kBAEFI,EAAOE,UAAUK,eAFf,2BAGI9D,EAAMoD,OAAOD,QAAQI,EAAOE,UAAUK,iBAH1C,IAICC,kBAAmBR,EAAOS,YAC1BC,mBAAoBV,EAAOI,aAC3BO,2BAA4BX,EAAOM,qBACnCM,6BAA8BZ,EAAOa,uBACrCC,qCAAsCd,EAAOe,uCAM1DtE,EAEX,IAAK,2BACD,OAAO,2BACAA,GADP,IAEI+C,mBAAoBQ,EAAOR,qBAEnC,IAAK,WACD,OAAO,2BACA/C,GADP,IAEIkD,MAAM,GAAD,mBACElD,EAAMkD,OADR,CAEDK,EAAOgB,SAGnB,IAAK,uBACD,OAAO,2BACAvE,GADP,IAEIkD,MAAOlD,EAAMkD,MAAMsB,KAAI,SAACD,GACpB,GAAIA,EAAKhC,KAAOgB,EAAOkB,QAAS,CAC5B,IAAIC,GAAQ,EACRC,EAAO,2BACJJ,GADI,IAEPK,UAAWL,EAAKK,UAAUJ,KAAI,SAACK,GAC3B,OAAIC,EAAgBD,EAASE,KAAMxB,EAAOsB,SAASE,OAC/CL,GAAQ,EACDnB,EAAOsB,UAEXA,OAGf,OAAIH,EASGC,EARI,2BACAJ,GADP,IAEIK,UAAU,GAAD,mBACFL,EAAKK,WADH,CAELrB,EAAOsB,aAMvB,OAAON,OAGnB,IAAK,cACD,OAAO,2BACAvE,GADP,IAEIkD,MAAOlD,EAAMkD,MAAM8B,QAAO,SAAAT,GAAI,OAAIA,EAAKhC,KAAOgB,EAAOgB,KAAKhC,QAElE,IAAK,uBACD,OAAO,2BACAvC,GADP,IAEImD,QAASI,EAAO0B,UAExB,IAAK,uBACD,OAAO,2BACAjF,GADP,IAEIkD,MAAOlD,EAAMkD,MAAMsB,KAAI,SAACD,GACpB,OAAIA,EAAKhC,KAAOgB,EAAOkB,QACZ,2BACAF,GADP,kBAEKhB,EAAO2B,SAAW3B,EAAO4B,QAG3BZ,OAGnB,IAAK,oBACD,OAAO,2BACAvE,GADP,IAEIkD,MAAOlD,EAAMkD,MAAMsB,KAAI,SAACD,GACpB,OAAIA,EAAKhC,KAAOgB,EAAOkB,QACZ,2BACAF,GADP,IAEIa,MAAO7B,EAAO6B,QAGfb,OAGnB,IAAK,oBACD,OAAO,2BACAvE,GADP,IAEIkD,MAAOlD,EAAMkD,MAAMsB,KAAI,SAACD,GACpB,OAAIA,EAAKhC,KAAOgB,EAAOkB,QACZ,2BACAF,GADP,IAEIc,MAAO9B,EAAO8B,QAGfd,OAGnB,IAAK,2BACD,OAAO,2BACAvE,GADP,IAEIkD,MAAOlD,EAAMkD,MAAMsB,KAAI,SAACD,GACpB,OAAIA,EAAKhC,KAAOgB,EAAOkB,QACZ,2BACAF,GADP,IAEIe,aAAc/B,EAAO+B,eAGtBf,OAGnB,QACI,OAAOvE,KAjOX/E,OAAOsK,8BAAgCtK,OAAOsK,gCAqOlDjK,EAAM0B,sBAAsB,yBAAyB,SAACjB,GAClD4G,EAAU6C,SAAV,aACIpJ,KAAM,4BACHL,OAIXT,EAAM0B,sBAAsB,4BAA4B,SAACjB,GACrD4G,EAAU6C,SAAV,aACIpJ,KAAM,+BACHL,OAIXT,EAAM0B,sBAAsB,iBAAiB,SAAAjB,GACzC4G,EAAU6C,SAAS,CACfpJ,KAAM,WACNmI,KAAMxI,EAAOwI,UAIrBjJ,EAAM0B,sBAAsB,uBAAuB,SAAAjB,GAC/C4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,aACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAO0J,gBAItBnK,EAAM0B,sBAAsB,wCAAwC,SAAAjB,GAChE4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,+BACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAO2J,kCAItBpK,EAAM0B,sBAAsB,0BAA0B,SAAAjB,GAClD4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,gBACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAO4J,gBAL0C,oBAOvC5J,EAAO6I,WAPgC,IAO5D,2BAAuC,CAAC,IAA/BC,EAA8B,QACnClC,EAAU6C,SAAS,CACfpJ,KAAM,uBACNqI,QAAS1I,EAAO0I,QAChBI,SAAUA,KAX0C,kCAgBhEvJ,EAAM0B,sBAAsB,qBAAqB,SAAAjB,GAC1CA,EAAO6J,cACNjD,EAAU6C,SAAS,CACfpJ,KAAM,uBACN6I,QAASlJ,EAAO6J,kBAK5BtK,EAAM0B,sBAAsB,kCAAkC,SAAAjB,GAC1D4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,yBACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAO8J,4BAItBvK,EAAM0B,sBAAsB,uBAAuB,SAAAjB,GAC/C4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,aACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAO+J,gBAItBxK,EAAM0B,sBAAsB,8BAA8B,SAAAjB,GACtD4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,sBACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAOgK,yBAItBzK,EAAM0B,sBAAsB,yBAAyB,SAAAjB,GACjD4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,eACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAOuJ,eALyC,oBAOtCvJ,EAAO6I,WAP+B,IAO3D,2BAAuC,CAAC,IAA/BC,EAA8B,QACnClC,EAAU6C,SAAS,CACfpJ,KAAM,uBACNqI,QAAS1I,EAAO0I,QAChBI,SAAUA,KAXyC,kCAgB/DvJ,EAAM0B,sBAAsB,kCAAkC,SAAAjB,GAC1D4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,wBACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAOiK,2BAItB1K,EAAM0B,sBAAsB,+BAA+B,SAAAjB,GACvD4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,sBACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAOkK,yBAItB3K,EAAM0B,sBAAsB,yBAAyB,SAAAjB,GACjD4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,cACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAOmK,iBAItB5K,EAAM0B,sBAAsB,mBAAmB,SAAAjB,GAC3C4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,QACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAOqJ,WAItB9J,EAAM0B,sBAAsB,sBAAsB,SAAAjB,GAC9C4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACNqI,QAAS1I,EAAO0I,QAChBI,SAAU9I,EAAO8I,cAIzBvJ,EAAM0B,sBAAsB,uBAAuB,SAAAjB,GAC/C4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,eACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAO4H,eAElBhB,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,6BACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAOoK,gCAItB7K,EAAM0B,sBAAsB,wBAAwB,SAAAjB,GAChD4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,8BACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAOqK,iCAItB9K,EAAM0B,sBAAsB,yBAAyB,SAAAjB,GACjD4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,0BACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAOsK,6BAItB/K,EAAM0B,sBAAsB,mBAAmB,SAAAjB,GAC3C4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,QACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAOsJ,WAItB/J,EAAM0B,sBAAsB,gCAAgC,SAAAjB,GACxD4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,uBACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAOuK,0BAItBhL,EAAM0B,sBAAsB,4BAA4B,SAAAjB,GACpD4G,EAAU6C,SAAS,CACfpJ,KAAM,uBACN8I,SAAU,uBACVT,QAAS1I,EAAO0I,QAChBU,MAAOpJ,EAAOuK,0BAIP3D,QAER,SAASmC,EAAgByB,EAAOC,GACnC,OAAID,EAAM,UAAYC,EAAM,WAGN,kBAAlBD,EAAM,UACCA,EAAMzC,gBAAkB0C,EAAM1C,gB,yCC9b9B,SAAS2C,EAAWrH,GAC/B,MAAwCkB,IAAMsB,UAAS,GAAvD,mBAAO8E,EAAP,KAAqBC,EAArB,KACA,EAAkCrG,IAAMsB,SAAS,MAAjD,mBAAOgF,EAAP,KAAkBC,EAAlB,KACOC,EAAgC1H,EAAhC0H,eAAmBC,EAA1B,YAAuC3H,EAAvC,GACA,OACI,cAAC,aAAD,aACIa,UAAU,YACVC,MAAQ,CAAE,eAAgB4G,GAAkB,GAAG,MAC/CE,qBAAoBN,EACpBO,sBAAuB,SAAA7H,GAAK,OAAI,+CAASA,GAAT,IAAgBa,UAAU,uBAC1DiH,oBAAqB,SAAA9H,GAAK,OAAI,+CAASA,GAAT,IAAgBa,UAAU,qBACxDkH,sBAAuB,SAAA/H,GAAK,OAAI,+CAASA,GAAT,IAAgBa,UAAU,uBAC1DmH,oBAAqB,SAAAhI,GAAK,OAAI,+CAASA,GAAT,IAAgBa,UAAU,qBACxDoH,aAAc,WACVV,GAAgB,GAChBE,EAAahG,YAAW,WACpB8F,GAAgB,KACjB,OAEP5E,aAAc,WACV4E,GAAgB,GAChBW,aAAaV,IAEjBW,UAAQ,EACRC,gBAAiB,IACjBC,yBAAyB,GACrBV,I,MCjBT,SAASW,EAAT,GAAwD,IAAnCC,EAAkC,EAAlCA,OAAQC,EAA0B,EAA1BA,OAAQpF,EAAkB,EAAlBA,QAASY,EAAS,EAATA,OAC3CzC,EAAQL,IAAMsB,SAAS,CAAC5B,MAAO,QACrC,EAAwCsB,EAA4BX,GAApE,mBAAO0B,EAAP,KAAkBhB,EAAlB,KAA2BiB,EAA3B,KACA,EAA+BhC,IAAMsB,SAAS+F,EAAOE,WAArD,mBAAOC,EAAP,KAAiBC,EAAjB,KAEAzH,IAAM0H,WAAU,WACZ1M,EAAMa,UAAU,CACZ,QAAS,WACT,UAAa,CACT,QAAS,iBACT,eAAkBwL,EAAOpF,IAE7B,aAAgB,sBAChB,eAAkB,EAClB,MAAS,OAEd,IAEHjC,IAAM0H,WAAU,WACRL,EAAOE,WACPvM,EAAMa,UAAU,CACZ,QAAS,gBACT,eAAkBwL,EAAOpF,KAC1B1F,MAAK,SAAA8K,GACJrM,EAAMa,UAAU,CACZ,QAAS,+BACT,OAAUwL,IACX9K,MAAK,SAAAC,GAAM,OAAGiL,EAAYjL,EAAOmL,cAG7C,CAACN,IAEJ,IAAIjG,EAAOyB,EAAQ2E,IAAa3E,EAAO,OAEvC,OADAzB,EAAMA,EAAKkG,EAAO,IAAMlG,EAAK,GAEzB,sBAAKzB,UAAW2H,EAAS,cAAgB,OAAzC,UACI,cAAC,EAAD,2BAAkBjH,EAAO,IAAzB,IAA6BN,MAAM,wCACnC,yBACIwB,YAAaQ,EACbP,UAAWT,EACXU,aAAcO,EACdE,QAASA,EAJb,UAMI,qBAAKvC,UAAU,OAAO+B,wBAAyB,CAACC,OAAQP,KACxD,qBAAKzB,UAAU,QAAf,SAAwB0H,EAAOtC,SACxB,OAANjC,QAAM,IAANA,OAAA,EAAAA,EAAQa,oBACL,qBAAKhE,UAAU,eACXiI,aAAiD,IAA9B,OAAN9E,QAAM,IAANA,OAAA,EAAAA,EAAQc,4BAAiC,OAAS,QADnE,SAEI,sCAAOd,QAAP,IAAOA,OAAP,EAAOA,EAAQa,uBAEpB,WA2DJkE,mBAAQ,SAAAnI,GAAK,MAAG,CAC3BoI,QAAQpI,EAAMmD,QACdkF,cAAerI,EAAM6C,gBACrBO,OAAQpD,EAAMoD,UAHH+E,EAvCf,YAA4F,IAAnEC,EAAkE,EAAlEA,QAASC,EAAyD,EAAzDA,cAAejF,EAA0C,EAA1CA,OAAQoC,EAAkC,EAAlCA,SAAU8C,EAAwB,EAAxBA,sBAC/D,OAAIF,GAA2B,GAAhBA,EAAQxN,OAEnB,sBAAK2H,GAAG,oBAAR,UACI,cAAC,EAAoBH,YAArB,CAAiCI,QAAS8F,IAC1C,eAAC7B,EAAD,CAAYK,eAAe,IAAI7G,UAAU,2BAAzC,UACI,cAACyH,EAAD,CACIE,OAAQ9C,EAAgBuD,EAAe,CAAC,QAAS,iBACjDV,OAAQ,CAAEtC,MAAO,YAAawC,UAAW,OACzCzE,OAAQA,EAAOC,KACfb,QAAS,kBAAKgD,EAAS,CACnBpJ,KAAM,wBACNoH,SAAU,CAAE,QAAS,qBAG5B4E,EAAQ5D,KAAI,SAAAmD,GAAM,OACf,cAACD,EAAD,CAAYC,OAAQA,EAChBvE,OAAQA,EAAOD,QAAQwE,EAAOpF,IAC9BqF,OAAQ9C,EAAgBuD,EACpB,CAAC,QAAS,iBAAkB,eAAkBV,EAAOpF,KACzDC,QAAS,kBAAKgD,EAAS,CACnBpJ,KAAM,wBACNoH,SAAU,CACN,QAAS,iBACTM,eAAgB6D,EAAOpF,QARFoF,EAAOpF,aAff,Q,iCC7ExBgG,G,4MAMjBvI,MAAO,CACHwI,WAAY,I,4CAEhB,WACI,OACI,qBAAKvI,UAAU,kBAAf,SACI,cAAC,IAAD,yBACIwI,QAAS9N,KAAKqF,MAAMwI,WACpBE,KAAK,QACLC,WAAW,cACXC,KAAK,QACDjO,KAAKyE,OALb,IAMIyJ,mBAAmB,c,+BAKnC,WAAsB,IAAD,OACjBlO,KAAKmO,YAAaC,aAAY,WAC1B,EAAKnI,SAAS,CACV4H,WAAa,GAAK,EAAKxI,MAAMwI,eAElC,O,kCAGP,WACIQ,cAAcrO,KAAKmO,iB,GAhCiBxI,IAAMC,WAA7BgI,GACVnJ,MAAO,CACV6J,KAAMC,IAAU3L,OAAO4L,WACvBC,UAAWF,IAAU3L,OAAO4L,WAC5BE,cAAeH,IAAUI,OAAOH,YCLzBhB,oBAAQ,SAAAnI,GAAK,MAAI,CAACA,MAAOA,KAAzBmI,EAAmC,YAAmC,IAATnI,EAAQ,EAARA,MACxE,OACI,qBAAKC,UAAW,mBAAoB,CAChC,4BACA,mCACA,oCACFsJ,SAASvJ,GAAS,GAAK,cAJzB,SAKI,cAAC,GAAD,CACIqJ,cAAc,gCACdJ,KAAK,KACLG,UAAU,W,MCI1B,IAAII,GAAoB,GASjB,SAASC,GAAeC,EAAMC,GACjC,OAAGD,EAAKE,MAAMC,yBACHvO,EAAMa,UAAU,CACnB,QAAS,eACT,QAAWuN,EAAKnH,GAChB,OAAU,EACV,MAAS,IAEPmH,EAAKE,MAAME,sBACV,IAAIrN,SAAQ,SAACC,EAASC,GACzB,IAAMoN,EAAWP,GAAkBE,EAAKnH,IACxCiH,GAAkBE,EAAKnH,IAAM,SAACzF,GAC1BiN,EAASjN,GACTxB,EAAMa,UAAU,CACZ,QAAS,eACT,QAAWuN,EAAKnH,GAChB,OAAU,EACV,MAAS,IACV1F,KAAKH,GAASsN,MAAMrN,OAIxB,IAAIF,SAAQ,SAACC,EAASC,IAlD9B,SAAuBsN,EAASN,GACnC,IAAIO,EAUJ,OATA5O,EAAMa,UAAU,CACZ,QAAS,eACT,QAAW8N,EACX,SAAYN,EACZ,OAAU,EACV,MAAS,EACT,aAAe,IAChBK,MAAME,GAEF,IAAIzN,SAAQ,SAACC,EAASC,GACzB6M,GAAkBS,GAAS,SAAAnN,GACvBJ,EAAQI,UACD0M,GAAkBS,IAE7BC,EAASvN,MAmCLwN,CAAaT,EAAKnH,GAAIoH,GAAU9M,MAAK,WACjCvB,EAAMa,UAAU,CACZ,QAAS,eACT,QAAWuN,EAAKnH,GAChB,OAAU,EACV,MAAS,IACV1F,KAAKH,GAASsN,MAAMrN,MACxBqN,MAAMrN,MArCrBrB,EAAM0B,sBAAsB,cAAc,SAAUjB,GACD,IAAD,EAA3CA,EAAO2N,KAAKE,MAAMC,2BACjB,UAAAL,GAAkBzN,EAAO2N,KAAKnH,WAA9B,cAAAiH,GAAoCzN,EAAO2N,UCpBnD,IAAIU,GAAQ,GAEZ9O,EAAM0B,sBAAsB,gBAAgB,SAAUjB,GAClDqO,GAAQrO,EAAOsO,MAAMtO,EAAOoJ,MAAMA,SAGvBiF,UCXA,I,MAAA,IAA0B,oCCQlC,SAASE,GAAsBD,GAClC,IAAME,EAAMF,EAAKG,QAAQ,0DAA0D,IAAIC,cAAcC,MAAM,KAC3G,OAAoB,GAAjBH,EAAM,GAAG3P,OACD,GACc,IAAf2P,EAAM3P,OACL2P,EAAM,GAAG,GAETA,EAAM,GAAG,GAAKA,EAAMA,EAAM3P,OAAO,GAAG,GAIpC,SAAS+P,GAAcvL,GAClC,IAyBIwL,EAzBJ,EAA0BtK,IAAMsB,SAAS,MAAzC,mBAAOwD,EAAP,KAAcyF,EAAd,KACA,EAAgCvK,IAAMsB,SAAS,MAA/C,mBAAOkJ,EAAP,KAAiBC,EAAjB,KACMC,EAAmB5L,EAAMmD,IAAI6H,GAAO,uCACpCa,EAAiB7L,EAAMmD,IAAI6H,GAAO,MAClCc,EAAW9L,EAAMmD,IAAI6H,GAAO,oBA+BlC,OA7BA9J,IAAM0H,WAAU,WACZ,IAAImD,GAAQ,EAeZ,OAdG/L,EAAMgG,MACF0F,GAAU1L,EAAMgG,OACfqE,GAAerK,EAAMgG,MAAO,GAAGvI,MAAK,SAAA6M,GHmC7C,IAAoB0B,EGlCHD,IACJN,GHiCOO,EGjCY1B,EAAK2B,MHkChCpQ,OAAOD,KAAOC,OAAOqQ,WAAWC,gBAAgBH,KGjCxCL,EAAY3L,EAAMgG,WAIvBA,GAAS0F,IACRD,EAAS,MACTE,EAAY,OAGb,kBAAKI,GAAQ,KACrB,CAAC/L,EAAMgG,QAGP6F,KAAoB,OAAC7L,QAAD,IAACA,OAAD,EAACA,EAAOoM,wBAC3BZ,EAAY,CAAC,EV7BM,6SU+BpBM,IACCN,EAAY,CAAC,EVjCO,qrCUmCnBxL,EAAMgG,OAAU4F,IACjBJ,EAAa,CAAC,EAAGa,KAGjB,sBAAKxL,UAAU,gBAAf,UACI,cAACyL,GAAD,CAAUnJ,GAAInD,EAAMmD,GAAI8H,KAAMjL,EAAMiL,OAEhCO,EACIA,EAAW,GACP,eAAC,IAAMe,SAAP,WACI,cAACD,GAAD,CAAUnJ,GAAInD,EAAMmD,GAAI8H,KAAMjL,EAAMiL,OACpC,qBAAKuB,IAAKhB,EAAW,QAGzB,qBAAK3K,UAAU,MAAM+B,wBAAyB,CAACC,OAAQ2I,EAAW,MAErExL,EAAMgG,OAASA,GAAU,qBAAKwG,IAAKxG,OAaxD,SAASsG,GAAT,GAA+B,IAAZnJ,EAAW,EAAXA,GAAI8H,EAAO,EAAPA,KACnB,OACI,sBAAMpK,UAAW,mBAAqBL,KAAKE,IAAIyC,GAAM,GAAK,EAAK,GAA/D,SACK+H,GAAsBD,KAS5B,SAASwB,GAActH,GAAO,IAAD,EAChC,cAAQA,QAAR,IAAQA,GAAR,UAAQA,EAAMnI,YAAd,aAAQ,EAAa,UACrB,IAAK,qBAAuB,IAAD,EACvB,cAAOmI,QAAP,IAAOA,GAAP,UAAOA,EAAMnI,YAAb,aAAO,EAAY0P,cAEvB,IAAK,qBAAuB,IAAD,EACvB,cAAOvH,QAAP,IAAOA,GAAP,UAAOA,EAAMnI,YAAb,aAAO,EAAY2P,eAEvB,IAAK,kBACL,IAAK,iBAAmB,IAAD,EACnB,cAAOxH,QAAP,IAAOA,GAAP,UAAOA,EAAMnI,YAAb,aAAO,EAAY4P,QAGvB,OAAO,KCvGX,IAAMC,GAAarJ,aAAY,WAAyB,IAAxB5C,EAAuB,uDAAf,GAAIuD,EAAW,uCACnD,OAAQA,EAAOnH,MACf,IAAK,WACD,OAAO,2BACA4D,GADP,kBAEKuD,EAAO2I,KAAK3J,GAAKgB,EAAO2I,OAEjC,QACI,OAAOlM,KAEZ/E,OAAOsK,8BAAgCtK,OAAOsK,gCAEjDjK,EAAM0B,sBAAsB,cAAc,SAACjB,GACvCkQ,GAAWzG,SAAS,CAChBpJ,KAAM,WACN8P,KAAMnQ,EAAOmQ,UAIND,U,SCpBA,SAASE,GAAwBC,EAAUC,GACtD,IAAMC,EAAgBC,GAAWH,GAQjC,OAPgB,IAAII,KAAKC,aAAa,QAAS,CAC3CvM,MAAO,WACPkM,SAAUA,EAEVM,sBAAuB,EACvBC,sBAAuB,IAEVC,OAAOP,EAAY,SAAG,GAAIC,EAAeO,MCK9D,IAwceC,GAxckB3E,aAAQ,SAAAnI,GAAK,MAAI,CAAC+M,MAAO/M,KAAzBmI,EAC7B,YAAuE,IAAD,gBAAlC6E,EAAkC,EAAlCA,QAAS/M,EAAyB,EAAzBA,UAAW8M,EAAc,EAAdA,MAAOxI,EAAO,EAAPA,KAC3D,IAAIyI,EAAS,OAAO,KACpB,OAAOA,EAAQC,QAAQ,UAEvB,IAAK,mBACD,OACI,cAACC,GAAD,CACI9Q,KAAK,MACL+Q,QAAO,UAAEH,EAAQC,QAAQE,eAAlB,aAAE,EAAyBlF,KAClChI,UAAWA,EACX+M,QAASA,EACTzI,KAAMA,EACNwI,MAAOA,IAGnB,IAAK,eACD,IAAI1H,EAAO2H,EAAQC,QAAQG,MAAM/H,OAAS2H,EAAQC,QAAQG,MAAMC,UAGhE,OAFGL,EAAQC,QAAQG,MAAME,YACrBjI,EAAO2H,EAAQC,QAAQG,MAAME,UAAW,mBAAUjI,GAElD,cAAC6H,GAAD,CACI9Q,KAAMiJ,EACN8H,QAAO,UAAEH,EAAQC,QAAQE,eAAlB,aAAE,EAAyBlF,KAClChI,UAAWA,EACX+M,QAASA,EACTzI,KAAMA,EACNwI,MAAOA,IAGnB,IAAK,8BACD,OACI,sBAAM9M,UAAWA,EAAjB,SACI,uBAAMA,UAAU,SAAhB,UAAyB,cAACsN,GAAD,CAAgBhJ,KAAMA,EAAMyI,QAASA,EAASD,MAAOA,IAA9E,0BAA2GC,EAAQC,QAAQ5H,MAA3H,YAIZ,IAAK,cACD,IAAI4C,EAAK,GACT,GAAG+E,EAAQQ,YACP,iBAAOR,EAAQC,QAAQQ,sBAAvB,aAAO,EAAiC,UACxC,IAAK,0BACDxF,EAAM,iBACN,MACJ,QACIA,EAAM,qBAGV,iBAAO+E,EAAQC,QAAQQ,sBAAvB,aAAO,EAAiC,UACxC,IAAK,4BACDxF,EAAM,gBACN,MACJ,IAAK,0BACDA,EAAM,cACN,MACJ,QACIA,EAAM,gBAGd,OACI,uBAAMhI,UAAWA,EAAjB,UACI,cAAC,GAAD,CAAsB+M,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAC3D,sBAAM9M,UAAU,SAAhB,SAA0BgI,OAItC,IAAK,wBACD,IAAIyF,EAASV,EAAQC,QAAQU,gBAAgBnJ,KAAI,SAAAjC,GAAE,OAC/CwK,EAAMxK,GAAIqL,UAAab,EAAMxK,GAAIsL,WAAW,IAAKd,EAAMxK,GAAIqL,UAAab,EAAMxK,GAAIsL,cAMtF,OAJIH,EADDA,EAAQ9S,OAAO,EACL8S,EAAQI,MAAM,EAAGJ,EAAQ9S,OAAS,GAAImT,KAAK,MAAQ,QAAUL,EAAQA,EAAQ9S,OAAS,GAEtF8S,EAAQ,GAElBV,EAAQC,QAAQU,gBAAgB,KAAhC,UAAsCX,EAAQgB,cAA9C,aAAsC,EAAgBhC,SAEjD,sBAAM/L,UAAWA,EAAjB,SACI,uBAAMA,UAAU,SAAhB,UAAyB,cAACsN,GAAD,CAAgBP,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAA9E,yBAKR,sBAAM9M,UAAWA,EAAjB,SACI,uBAAMA,UAAU,SAAhB,UAAyB,cAACsN,GAAD,CAAgBP,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAA9E,UAA8FW,OAI1G,IAAK,yBACD,OACI,sBAAMzN,UAAWA,EAAjB,SACI,sBAAMA,UAAU,SAAhB,qBAIZ,IAAK,yBACD,OAAG+M,EAAQiB,gBAEH,sBAAMhO,UAAWA,EAAjB,SACI,uBAAMA,UAAU,SAAhB,6CAAuD+M,EAAQC,QAAQ5H,MAAvE,YAKJ,sBAAMpF,UAAWA,EAAjB,SACI,uBAAMA,UAAU,SAAhB,UAAyB,cAACsN,GAAD,CAAgBP,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAA9E,iCAC8BC,EAAQC,QAAQ5H,MAD9C,YAMhB,IAAK,0BACD,IAAI6I,EAAenB,EAAMC,EAAQC,QAAQjB,SACzC,OACI,sBAAM/L,UAAWA,EAAjB,SACI,uBAAMA,UAAU,SAAhB,UAAyB,cAACsN,GAAD,CAAgBP,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAA9E,eACemB,EAAcL,WAAW,IAAKK,EAAcN,eAIvE,IAAK,yBACD,OAAGZ,EAAQiB,gBAEH,sBAAMhO,UAAWA,EAAjB,SACI,sBAAMA,UAAU,SAAhB,qCAKJ,sBAAMA,UAAWA,EAAjB,SACI,uBAAMA,UAAU,SAAhB,UAAyB,cAACsN,GAAD,CAAgBP,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAA9E,+BAMhB,IAAK,wBACD,OACI,sBAAM9M,UAAWA,EAAjB,SACI,uBAAMA,UAAU,SAAhB,UAAyB,cAACsN,GAAD,CAAgBP,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAA9E,4CAKZ,IAAK,oBAGD,OACI,sBAAM9M,UAAWA,EAAjB,SACI,uBAAMA,UAAU,SAAhB,UAAyB,cAACsN,GAAD,CAAgBP,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,EAAOoB,YAAY,IAAjG,qCAHiB,CAACC,MAAO,MAAOC,OAAQ,OAAQC,QAAS,SAGsGtB,EAAQC,QAAQsB,UAI3L,IAAK,yBACL,IAAK,uBACD,OACI,sBAAMtO,UAAWA,EAAjB,SACI,sBAAMA,UAAU,SAAhB,mDAIZ,IAAK,iBACD,OACI,uBAAMA,UAAWA,EAAjB,UACI,cAAC,GAAD,CAAsB+M,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAC3D,sBAAM9M,UAAU,SAAhB,wBAIZ,IAAK,2BACD,OACI,sBAAMA,UAAWA,EAAjB,SACI,uBAAMA,UAAU,SAAhB,UAAyB,cAACsN,GAAD,CAAgBP,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAA9E,2BAKZ,IAAK,6BACD,OACI,sBAAM9M,UAAWA,EAAjB,SACI,sBAAMA,UAAU,SAAhB,SAA0B+M,EAAQC,QAAQhF,SAItD,IAAK,cACD,OACI,uBAAMhI,UAAWA,EAAjB,UACI,cAAC,GAAD,CAAsB+M,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAC3D,sBAAM9M,UAAU,SAAhB,SAA0B+M,EAAQC,QAAQuB,WAItD,IAAK,kBACD,OACI,cAACtB,GAAD,CACI9Q,KAAM4Q,EAAQC,QAAQwB,SAASpB,UAC/BF,QAAO,UAAEH,EAAQC,QAAQE,eAAlB,aAAE,EAAyBlF,KAClChI,UAAWA,EACX+M,QAASA,EACTzI,KAAMA,EACNwI,MAAOA,IAKnB,IAAK,cACD,OACI,uBAAM9M,UAAWA,EAAjB,UACI,cAAC,GAAD,CAAsB+M,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAC3D,uBAAM9M,UAAU,SAAhB,0BAA6B+M,EAAQC,QAAQyB,KAAKrJ,YAI9D,IAAK,mBACD,IAAIsJ,EACA,sBAAM1O,UAAWA,EAAjB,SAA4B,uBAAMA,UAAU,SAAhB,UACxB,cAACsN,GAAD,CAAgBP,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,EAAOoB,YAAY,IADhD,WACgEnB,EAAQC,QAAQ2B,WAK5GC,EAAoBvO,IAAMwO,MAAK,kBAAI,IAAIrS,SAAQ,SAAAC,GAC/CpB,EAAMa,UAAU,CACZ,QAAS,aACTsI,QAASF,EAAKhC,GACdwM,WAAY/B,EAAQC,QAAQ+B,kBAC7BnS,MACC,SAAAC,GAEIJ,EAAQ,CAAEuS,QAAS,kBACf,sBAAMhP,UAAWA,EAAjB,SAA4B,uBAAMA,UAAU,SAAhB,UACxB,cAACsN,GAAD,CAAgBP,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,EAAOoB,YAAY,IADhD,WACgEnB,EAAQC,QAAQ2B,MADhF,OAC2F9R,EAAOmQ,QAAQyB,KAAKrJ,iBAInJ,WAEI3I,EAAQ,CAAEuS,QAAS,kBAAKN,cAKpC,OACI,cAAC,IAAMO,SAAP,CAAgBC,SAAUR,EAA1B,SACI,cAACE,EAAD,MAIZ,IAAK,iBAQL,IAAK,kBACD,OACI,uBAAM5O,UAAWA,EAAjB,UACI,cAAC,GAAD,CAAsB+M,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAC3D,sBAAM9M,UAAU,SAAhB,SAA0B+M,EAAQC,QAAQ5H,WAItD,IAAK,0BACD,IAAI+J,EAA0B,CAC1B,2BAA8B,UAC9B,iCAAoC,iBACpC,iCAAoC,iBACpC,gCAAmC,gBACnC,gCAAmC,gBACnC,oCAAuC,oBACvC,4BAA+B,WAC/B,wCAA2C,wBAC3C,mCAAsC,mBACtC,+BAAkC,eAClC,mCAAsC,mBACtC,yCAA4C,yBAC5C,+BAAkC,gBAElCC,EAAmBrC,EAAQC,QAAQqC,MAAM9K,KAAI,SAAApI,GAAI,OAAGgT,EAAyBhT,EAAK,aACtF,OACI,sBAAM6D,UAAWA,EAAjB,SACI,uBAAMA,UAAU,SAAhB,UACKsE,EAAKc,MADV,sCACoDgK,EAAkBtB,KAAK,WAKvF,IAAK,2BACD,IAAIwB,EACA,sBAAMtP,UAAWA,EAAjB,SACI,uBAAMA,UAAU,SAAhB,yCAEKkM,GAAuBa,EAAQC,QAAQb,SAAUY,EAAQC,QAAQZ,cAFtE,MAGQ9H,EAAKc,WAMjBmK,EAA6BlP,IAAMwO,MAAK,kBAAI,IAAIrS,SAAQ,SAAAC,GACxDpB,EAAMa,UAAU,CACZ,QAAS,aACTsI,QAASF,EAAKhC,GACdwM,WAAY/B,EAAQC,QAAQwC,qBAC7B5S,MACC,SAAAC,GAEIJ,EAAQ,CAAEuS,QAAS,kBACf,sBAAMhP,UAAWA,EAAjB,SACI,uBAAMA,UAAU,SAAhB,yCAEKkM,GAAuBa,EAAQC,QAAQb,SAAUY,EAAQC,QAAQZ,cAFtE,MAGQ9H,EAAKc,MAHb,QAGyBvI,EAAOmQ,QAAQ5H,iBAKpD,WACI3I,EAAQ,CAAEuS,QAAS,kBAAKM,cAKpC,OACI,cAAC,IAAML,SAAP,CAAgBC,SAAUI,EAA1B,SACI,cAACC,EAAD,MAIZ,IAAK,eACD,OAAGxC,EAAQC,QAAQyC,UACZ1C,EAAQQ,YAEH,sBAAMvN,UAAWA,EAAjB,SACI,sBAAMA,UAAU,SAAhB,iDAKJ,sBAAMA,UAAWA,EAAjB,SAA4B,uBAAMA,UAAU,SAAhB,UACxB,cAACsN,GAAD,CAAgBP,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAD7B,0EAOhC,cAACG,GAAD,CACI9Q,KAAK,QACL+Q,QAAO,UAAEH,EAAQC,QAAQE,eAAlB,aAAE,EAAyBlF,KAClChI,UAAWA,EACX+M,QAASA,EACTzI,KAAMA,EACNwI,MAAOA,IARX,IAAD,EAaX,IAAK,cACD,OACI,sBAAM9M,UAAWA,EAAjB,SACI,sBAAMA,UAAU,SAAhB,SAA0B+M,EAAQC,QAAQ0C,KAAKC,aAM3D,IAAK,iBACD,OACI,uBAAM3P,UAAWA,EAAjB,UACI,cAAC,GAAD,CAAsB+M,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAC3D,uBAAM9M,UAAU,SAAhB,UAA0B+M,EAAQC,QAAQ4C,QAAQrB,MAAlD,iBAIZ,IAAK,8BACD,OAAGxB,EAAQiB,gBAEH,sBAAMhO,UAAWA,EAAjB,SACI,sBAAMA,UAAU,SAAhB,+BAKJ,sBAAMA,UAAWA,EAAjB,SACI,uBAAMA,UAAU,SAAhB,UAAyB,cAACsN,GAAD,CAAgBhJ,KAAMA,EAAMyI,QAASA,EAASD,MAAOA,IAA9E,0BAA2GC,EAAQC,QAAQ5H,MAA3H,YAKhB,IAAK,cACD,OACI,uBAAMpF,UAAWA,EAAjB,UACI,cAAC,GAAD,CAAsB+M,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAC3D,sBAAM9M,UAAU,SAAhB,SAA0B+M,EAAQC,QAAQhF,KAAKA,KAAKuC,QAAQ,qBAAsB,UAI9F,IAAK,qBACD,OACI,uBAAMvK,UAAWA,EAAjB,UACI,cAAC,GAAD,CAAsB+M,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAC3D,sBAAM9M,UAAU,SAAhB,+GAIZ,IAAK,eACD,OACI,uBAAMA,UAAWA,EAAjB,UACI,cAAC,GAAD,CAAsB+M,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAC3D,sBAAM9M,UAAU,SAAhB,wBACA,sBAAMA,UAAU,SAAhB,SAA0B+M,EAAQC,QAAQ6C,MAAMzK,WAI5D,IAAK,eACD,OACI,cAAC6H,GAAD,CACI9Q,KAAK,QACL+Q,QAAO,UAAEH,EAAQC,QAAQE,eAAlB,aAAE,EAAyBlF,KAClChI,UAAWA,EACX+M,QAASA,EACTzI,KAAMA,EACNwI,MAAOA,IAGnB,IAAK,mBACD,OACI,uBAAM9M,UAAWA,EAAjB,UACI,cAAC,GAAD,CAAsB+M,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAC3D,sBAAM9M,UAAU,SAAhB,8BAIZ,IAAK,mBACD,OACI,cAACiN,GAAD,CACI9Q,KAAK,gBACL+Q,QAAO,UAAEH,EAAQC,QAAQE,eAAlB,aAAE,EAAyBlF,KAClChI,UAAWA,EACX+M,QAASA,EACTzI,KAAMA,EACNwI,MAAOA,IAGnB,IAAK,0BACD,OACI,sBAAM9M,UAAWA,EAAjB,SACI,uBAAMA,UAAU,SAAhB,uEAAoF+M,EAAQC,QAAQ8C,iBAIhH,QACI,OAAO,SAWnB,SAAS7C,GAAT,GAA2E,IAAlD9Q,EAAiD,EAAjDA,KAAM+Q,EAA2C,EAA3CA,QAASlN,EAAkC,EAAlCA,UAAW+M,EAAuB,EAAvBA,QAASzI,EAAc,EAAdA,KAAMwI,EAAQ,EAARA,MAE9D,OADGI,IAAS/Q,GAAM,KAEd,uBAAM6D,UAAWA,EAAjB,UACI,cAAC,GAAD,CAAsB+M,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAC3D,sBAAM9M,UAAU,SAAhB,SAA0B7D,IAF9B,IAE2C,sBAAM6D,UAAU,SAAhB,SAA0BkN,EAAQ3C,QAAQ,qBAAsB,UAanH,SAAS+C,GAAT,GAA6D,IAApCP,EAAmC,EAAnCA,QAASzI,EAA0B,EAA1BA,KAAMwI,EAAoB,EAApBA,MACpC,GADwD,EAAboB,WAEvC,OAAOnB,EAAQQ,YAAc,MAAQ,cAACD,GAAD,CAAgBP,QAASA,EAASzI,KAAMA,EAAMwI,MAAOA,IAE9F,IAAMiB,EAAOhB,EAAQgB,OACf9B,EAAKa,EAAMiB,EAAOhC,SACxB,MAAoB,qBAAjBgC,EAAO,SACC9B,EAAK0B,UAAa1B,EAAK2B,WAAY,IAAK3B,EAAK0B,UAAa1B,EAAK2B,WAC/C,qBAAjBG,EAAO,SACNzJ,EAAKc,WADT,EAKJ,IAAM2K,GACT,YAAwD,IAEhDC,EAFwBjD,EAAuB,EAAvBA,QAASzI,EAAc,EAAdA,KAAMwI,EAAQ,EAARA,MAC3C,OAAIC,GAEDzI,IAAUyI,EAAQiB,kBACdjB,EAAQQ,YACPyC,EAAO,QACD,CAAC,qBAAsB,sBAAsB1G,SAAShF,EAAKnI,KAAK,WAC1C,qBAAzB4Q,EAAQgB,OAAO,WACdiC,EAAOlD,EAAMC,EAAQgB,OAAOhC,SAAS6B,WAAa,MAG9B,qBAAzBb,EAAQgB,OAAO,WACdiC,EAAO1L,EAAKc,MAAM,OAGnB4K,EAAO,sBAAMhQ,UAAU,SAAhB,SAA0BgQ,IAAgB,MAdpC,M,yCC7fb,SAASC,GAAT,GAAyD,IAApC/U,EAAmC,EAAnCA,KAAMgV,EAA6B,EAA7BA,SAAU3N,EAAmB,EAAnBA,QAAYb,EAAO,kBAC7DyO,EAAOjV,EAAO,kBAAKF,OAAOoV,KAAKlV,IAAQqH,EAC7C,OACI,gDAAQvC,UAAU,cAAcuC,QAAS4N,GAAWzO,GAApD,aAA2DwO,KCQnE,IAAMG,GAAiB1N,aAZvB,SAAiB5C,EAAOuD,GACpB,OAAQA,EAAOnH,MACf,IAAK,iBACD,OAAO,2BACA4D,GADP,kBAEKuD,EAAOgN,WAAWhO,GAAKgB,EAAOgN,aAEvC,QACI,OAAOvQ,MAKAsQ,MCRR,SAASE,GAAsBC,GAChB,iBAARA,IAAkBA,EAAMC,GAAgBD,IAClD,IAAME,EAAM,IAAIC,KACVC,EAAY,IAAID,KAAKD,EAAIG,UAAY,MACrCC,EAAW,IAAIH,KAAKD,EAAIG,UAAY,QAE1C,OAAIL,EAAKK,WAAaD,EAAUC,UAa7B,SAAsBL,GACP,iBAARA,IAAkBA,EAAMC,GAAgBD,IAClD,IAAIO,EAAQP,EAAKQ,WACbC,EAAUT,EAAKU,aACbC,EAAOJ,GAAS,GAAK,KAAO,KAIlC,OAFAA,GADAA,GAAgB,KACQ,GACxBE,EAAUA,EAAU,GAAV,WAAmBA,GAAYA,EACnC,GAAN,OAAUF,EAAV,YAAmBE,EAAnB,YAA8BE,GApBnBC,CAAaZ,GACbA,EAAKK,WAAaC,EAASD,UA0BnC,SAAyBL,GACV,iBAARA,IAAkBA,EAAMC,GAAgBD,IAElD,MADiB,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC5CA,EAAKa,UA5BVC,CAAgBd,GAmCxB,SAAsBA,GACP,iBAARA,IAAkBA,EAAMC,GAAgBD,IAClD,IAAIe,EAAMf,EAAKgB,UACXC,EAAQjB,EAAKkB,WAAa,EACxBC,EAAOC,OAAOpB,EAAKqB,eAAehE,MAAM,GAC1C0D,EAAM,KACNA,EAAG,WAAOA,IAEVE,EAAQ,KACRA,EAAK,WAAOA,IAEhB,MAAM,GAAN,OAAUF,EAAV,YAAiBE,EAAjB,YAA0BE,GA5CfG,CAAatB,GA+CrB,SAASC,GAAgBsB,GAC5B,OAAO,IAAIpB,KAAiB,IAAZoB,GDjDpB1W,EAAM0B,sBAAsB,oBAAoB,SAACjB,GAC7CuU,GAAgB9K,SAAS,CACrBpJ,KAAM,iBACNmU,WAAYxU,EAAOwU,gB,0BEjBZ,SAAS0B,GAAK7S,GACzB,OACI,iCAAKa,UAAU,QAAWb,ICA3B,SAAS8S,GAAT,GAAwC,IAAlBC,EAAiB,EAAjBA,EAAGC,EAAc,EAAdA,EAAGjC,EAAW,EAAXA,SAC/B,OACI,qBAAKlQ,UAAU,eAAeC,MAAO,CAAC,MAAOiS,EAAE,KAAM,MAAOC,EAAE,MAA9D,SACI,cAACH,GAAD,UACK9B,MDAjB8B,GAAKI,aAAc,SAAsBjT,GACrC,OACI,iCAAKa,UAAU,iBAAoBb,KAI3C6S,GAAKK,SAAU,YAAwC,IAArBnC,EAAoB,EAApBA,SAAaxO,EAAO,kBAClD,OACI,6CAAK1B,UAAU,aAAgB0B,GAA/B,aACKwO,MAIb8B,GAAKK,SAASC,UAAY,CACtBpC,SAAUjH,IAAUsJ,MCHjB,IAAMC,GAAoB7P,aAAY,WAAiC,IAAvB5C,EAAsB,uDAAd,KAAMuD,EAAQ,uCACzE,MAAoB,qBAAhBA,EAAOnH,KACAmH,EAAOmP,KAEO,yBAAhBnP,EAAOnH,KACL,KAEJ4D,KAGE2S,GAAcxK,aAAQ,SAAAnI,GAAK,MAAG,CAAC4S,MAAM5S,KAAvBmI,EAAgC,qBAAEyK,SAOtD,SAASC,GAAkBnS,EAAGgS,GACjChS,EAAEoS,iBACFjS,YAAW,WACP4R,GAAkBjN,SAAS,CACvBpJ,KAAM,mBACNsW,KAAM,cAACR,GAAD,CAAaC,EAAGzR,EAAEI,YAAYiS,MAAOX,EAAG1R,EAAEI,YAAYkS,MAAtD,SAA8DN,QAEzE,IAGA,SAASO,KACZR,GAAkBjN,SAAS,CACvBpJ,KAAM,yBC3CP,IAAI8W,GAAatQ,aAKpB,WAA8B,IAApB5C,EAAmB,uDAAZ,GAAIuD,EAAQ,uCACzB,OAAQA,EAAOnH,MACf,IAAK,aACD,MAAM,GAAN,mBACO4D,GADP,CAEIuD,EAAO4P,SAGf,IAAK,gBACD,OAAOnT,EAAMgF,QAAO,SAAAG,GAAK,OAAIA,EAAM5C,IAAIgB,EAAOhB,SAMtDtH,OAAOsK,8BAAgCtK,OAAOsK,gCAO3C,SAAS6N,GAAU7Q,EAAI4Q,GAC1BD,GAAY1N,SAAS,CACjBpJ,KAAM,aACN+W,OAAQ,CACJE,QAASF,EACT5Q,GAAIA,KAST,SAAS+Q,GAAa/Q,GACzB2Q,GAAY1N,SAAS,CACjBpJ,KAAM,gBACNmG,GAAIA,IAOZ,IAMegR,GANCpL,aAAQ,SAAUnI,GAC9B,MAAO,CAACwT,QAASxT,GAAS,MADdmI,EAEb,SAAiB/I,GAChB,OAAOA,EAAMoU,QAAQhP,KAAI,SAAAiP,GAAE,OAAI,cAAC,IAAM9H,SAAP,UAA6B8H,EAAGJ,SAAXI,EAAGlR,QAAsC,Q,MCxDlF,SAASmR,GAAT,GAAgC,IAAhBnR,EAAe,EAAfA,GAAI4N,EAAW,EAAXA,SAC/B,EAA4B7P,IAAMsB,UAAS,GAA3C,mBAAO+R,EAAP,KAAeC,EAAf,KASA,OARAtT,IAAM0H,WAAU,WACZnH,YAAW,WACP+S,GAAU,GACV/S,YAAW,WACPyS,GAAa/Q,KACd,OACJ,OACJ,IAEC,qBAAKtC,UAAW,SAAW0T,EAAQ,UAAU,IAA7C,SACI,qBAAK1T,UAAU,gBAAf,SACKkQ,M,oBCXI0D,G,kDAcjB,WAAYzU,GAAQ,IAAD,uBACf,cAAMA,IANVY,MAAO,CACHW,OAAQ,CACJX,MAAO,QAGI,MAEkCQ,EAAoB,gBAFtD,mBAEd,EAAK6B,UAFS,KAEE,EAAKhB,QAFP,KAEgB,EAAKiB,WAFrB,KAGf,IAHe,EAIa,CADHlD,EAApB+Q,SAAL,YAAyB/Q,EAAzB,KAHe,OAId,EAAK+Q,SAJS,KAIC,EAAKxO,KAJN,O,0CAMnB,WACI,OACI,iDACI1B,UAAU,eACV6T,iBAAgBnZ,KAAKyE,MAAM2U,UAAW,OAAQ,QAC9ClS,YAAalH,KAAK0H,UAClBP,UAAWnH,KAAK0G,QAChBU,aAAcpH,KAAK2H,YACf3H,KAAKgH,MANb,cAQI,cAAC,EAAD,2BAAkBhH,KAAKqF,MAAMW,QAA7B,IAAqCN,MAAM,4CAE3C,qBAAKJ,UAAU,gBAAf,SACKtF,KAAKwV,WAEV,qBAAKlQ,UAAU,UAAf,SACKtF,KAAKwV,mB,GApCe7P,IAAMC,WCA1ByT,G,4MA0BjBhU,MAAO,CACHiU,SAAS,G,EAEbC,SAAU,WACN,EAAKC,cACL,EAAK/U,MAAMgV,MAAQ,EAAKhV,MAAMgV,Q,EAElCC,aAAc,WACV,EAAKF,cACL,EAAK/U,MAAMkV,UAAY,EAAKlV,MAAMkV,Y,EAEtCC,aAAc,SAAClY,GACX,EAAK8X,cACL9X,GAAWA,K,EAuCf8X,YAAa,WACT,EAAKvT,SAAS,CACVqT,SAAS,IAEbpT,YAAW,WACPyS,GAAa,EAAKlU,MAAMmD,MACzB,M,4CA3CP,WAAU,IAAD,OACL,OACI,qBAAKtC,UAAW,+BAAkCtF,KAAKqF,MAAMiU,QAAW,WAAa,IAArF,SACI,sBAAK/T,MAAO,CACR,MAASvF,KAAKyE,MAAMI,OAAS,SAEjCgV,UAAS7Z,KAAKyE,MAAMmD,GAHpB,UAII,6BAAK5H,KAAKyE,MAAMiG,OAAS,KACzB,qBAAKpF,UAAU,UAAf,SACKtF,KAAKyE,MAAM+Q,WAEhB,sBAAKlQ,UAAU,UAAf,UACKtF,KAAKyE,MAAMqV,YACR,cAAC,GAAD,CACIxU,UAAU,oBACVC,MAAO,CAAC,MAAS,QACjBsC,QACI7H,KAAKyE,MAAMsV,wBACP,kBAAI,EAAKH,aAAa,EAAKnV,MAAMuV,qBAC/Bha,KAAKyE,MAAMuV,mBANzB,SAOKha,KAAKyE,MAAMqV,cAEhB,KACH9Z,KAAKyE,MAAMwV,iBAAmB,KAC3B,cAAC,GAAD,CAAapS,QAAS,kBAAI,EAAK+R,aAAa,EAAKnV,MAAMkV,WAAvD,oBAIJ,cAAC,GAAD,CAAa9R,QAAS,kBAAI,EAAK+R,aAAa,EAAKnV,MAAMgV,OAAOL,UAAWpZ,KAAKyE,MAAM2U,UAApF,SACKpZ,KAAKyE,MAAMyV,cAAgB,mB,GAtEbvU,IAAMC,WCuB1C,SAASuU,GAAiB5R,EAAO6B,GACpC,OAAO7B,EAAMsB,KAAI,SAAAD,GAAS,IAAD,gBACEA,EAAKK,WADP,IACrB,IAAI,EAAJ,qBAAwC,CAAC,IAA9BC,EAA6B,QACpC,GAAIC,EAAgBC,EAAMF,EAASE,MAC/B,MAAoB,KAAhBF,EAASkQ,OACN,2BACAxQ,GADP,IAEIM,SAAUA,KAND,8BAUrB,OAAON,KAENS,QAAO,SAAAT,GAAI,QAAMA,EAAKM,YACtBmQ,MAAK,SAACC,EAAGC,GACN,IAAIC,EAAQF,EAAEpQ,SAASkQ,MAAOK,EAAQF,EAAErQ,SAASkQ,MAEjD,OAAII,GAAUC,EACH,EAEPD,EAASC,EACF,GAEH,KAIpB,IA0DeC,GA1DClN,aAAQ,SAAAnI,GAAK,MAAI,CAACsV,gBAAiBtV,KAAnCmI,CAAA,2KAaR,SAAsBoN,GAClB,OAAQA,EAAUrS,QAAUvI,KAAKyE,MAAM8D,OAChCqS,EAAUxQ,OAASpK,KAAKyE,MAAM2F,MAC9BwQ,EAAUD,kBAAoB3a,KAAKyE,MAAMkW,kBACZ,2BAA7BC,EAAUD,kBAjBb,oBAoBR,WACI,IAAME,EAAOV,GAAiBna,KAAKyE,MAAM8D,MAAOvI,KAAKyE,MAAM2F,MAAMP,KAAI,SAAAD,GAAI,OAAE,cAAC,GAAD,CAA4BA,KAAMA,GAAfA,EAAKhC,OACnG,OACI,eAACkE,EAAD,CAAYlE,GAAG,YAAYuE,eAAe,IAA1C,UAC+B,gBAA1BnM,KAAKyE,MAAM2F,KAAK,UACb,cAAC,IAAD,CAAU0Q,MAAO9S,EAAjB,SACI,cAAC,GAAD,CAAmBO,MAAOvI,KAAKyE,MAAM8D,UAG7C,cAAC,IAAD,CAAUuS,MAAOxJ,GAAjB,SACKuJ,EAAM5a,OAAS4a,EAAS,cAACE,GAAD,CAAe3Q,KAAMpK,KAAKyE,MAAM2F,KAAMuQ,gBAAiB3a,KAAKyE,MAAMkW,yBA9BnG,+BAoCR,WACIha,EAAMa,UAAU,CACZ,QAAS,WACT,UAAa,CACT,QAAS,gBAEb,aAAgB,sBAChB,eAAkB,EAClB,MAAS,KAEbb,EAAMa,UAAU,CACZ,QAAS,WACT,UAAa,CACT,QAAS,mBAEb,aAAgB,sBAChB,eAAkB,EAClB,MAAS,SArDT,GACWmE,IAAMC,YA2DpBoV,GAAb,kDACI,WAAYvW,GAAQ,IAAD,uBACf,cAAMA,IAGVY,MAAO,CACHW,OAAQ,CACJX,MAAO,QANI,MAEkCQ,EAAoB,gBAFtD,0BAEd,EAAK6B,UAFS,KAEE,EAAKhB,QAFP,KAEgB,EAAKiB,WAFrB,OADvB,yDAUI,SAAsBiT,EAAWK,GAAY,IAAD,QACxC,OAAOL,EAAUhR,KAAKhC,KAAO5H,KAAKyE,MAAMmF,KAAKhC,IACtCgT,EAAUhR,KAAKe,eAAiB3K,KAAKyE,MAAMmF,KAAKe,cAChDiQ,EAAUhR,KAAKoB,gBAAkBhL,KAAKyE,MAAMmF,KAAKoB,eACjD4P,EAAUhR,KAAKZ,eAAiBhJ,KAAKyE,MAAMmF,KAAKZ,cAChD4R,EAAUhR,KAAK+B,uBAAyB3L,KAAKyE,MAAMmF,KAAK+B,sBACxDiP,EAAUhR,KAAKwB,sBAAwBpL,KAAKyE,MAAMmF,KAAKwB,qBACvDwP,EAAUhR,KAAKM,SAASgR,YAAclb,KAAKyE,MAAMmF,KAAKM,SAASgR,YAC/D,UAAAN,EAAUhR,KAAKa,aAAf,mBAAsB/F,aAAtB,eAA6BkD,OAA7B,UAAoC5H,KAAKyE,MAAMmF,KAAKa,aAApD,iBAAoC,EAAuB/F,aAA3D,aAAoC,EAA8BkD,KAClEgT,EAAUhR,KAAKc,QAAU1K,KAAKyE,MAAMmF,KAAKc,OACzCkQ,EAAUhR,KAAK6B,8BAAgCzL,KAAKyE,MAAMmF,KAAK6B,6BAC/DwP,EAAUjV,SAAWhG,KAAKqF,MAAMW,SArB/C,oBAuBI,WAAS,IAAD,wBACE4D,EAAK,eAAK5J,KAAKyE,MAAMmF,MACvBuR,EAAU,GACc,uBAAxB,UAAAvR,EAAKnI,YAAL,eAAY,WACiB,uBAAxB,UAAAmI,EAAKnI,YAAL,eAAY,WACY,IAAzB,UAAAmI,EAAKnI,YAAL,eAAW2Z,YAEfD,EvB5Ia,i6HuB8IgB,uBAAxB,UAAAvR,EAAKnI,YAAL,eAAY,WACY,IAAzB,UAAAmI,EAAKnI,YAAL,eAAW2Z,YACfD,EvBjJgB,8vpBuBmJc,oBAAxB,UAAAvR,EAAKnI,YAAL,eAAY,WACiD,gBAA9D,UAAA6P,GAAW+J,WAAX,UAAsBzR,EAAKnI,YAA3B,aAAsB,EAAW4P,gBAAjC,mBAA2C5P,YAA3C,eAAkD,YACvD0Z,EvBtJY,yvHuBwJZvR,EAAKhC,IAAI6H,GAAO,sBAChB0L,EAAU,IC3Jf,SAAkCvR,GAAO,IAAD,EAC3C,OAAQA,EAAKnI,KAAK,UAClB,IAAK,qBACL,IAAK,qBACD,OAAO,EAEX,IAAK,iBACL,IAAK,kBACD,IAAI8P,EAAI,UAAED,GAAW+J,kBAAb,aAAE,EAAwBzR,EAAKnI,KAAK4P,SAC5C,OAAOE,GAA+B,oBAAvBA,EAAK9P,KAAK,SAE7B,OAAO,EDmJA6Z,CAAyB1R,KACxBA,EAAKc,MAAO,mBAGhB,IAAM6Q,ECpJP,SAAwB3R,GAAM,IAAD,IAChC,OAAQA,EAAKnI,KAAK,UAClB,IAAK,qBACD,OAAO,EAEX,IAAK,qBAED,OADc,UAAEkU,GAAgB0F,kBAAlB,aAAE,EAA6BzR,EAAKnI,KAAK0P,gBACrCqK,YAEtB,IAAK,iBACL,IAAK,kBAED,OADQ,UAAElK,GAAW+J,kBAAb,aAAE,EAAwBzR,EAAKnI,KAAK4P,UAChCmK,YAEhB,OAAO,EDsIeC,CAAe7R,GAE7BA,EAAKhC,IAAI6H,GAAO,QAChB7F,EAAKc,MAAO,kBAGhB,IAAIgR,EAAgB,KACpB,OElKD,SAA0B9R,EAAMyI,GACnC,GAAIzI,GAASyI,EACb,OAAGA,EAAQQ,YACJR,EAAQsJ,cACA,UAER/R,EAAK6B,6BAA+B4G,EAAQzK,GACpC,OAEJ,OAERgC,EAAK4B,4BAA8B6G,EAAQzK,GACnC,OAEJ,SFoJIgU,CAAiBhS,EAAMA,EAAKe,eACnC,IAAK,UACD+Q,EAAgB,sBAAMpW,UAAU,8BAA8B+B,wBAAyB,CAACC,OvBlKxE,8hIuBmKhB,MACJ,IAAK,OACDoU,EAAgB,sBAAMpW,UAAU,2BAA2B+B,wBAAyB,CAACC,OvBpKxE,s0DuBqKb,MACJ,IAAK,OACDoU,EAAgB,sBAAMpW,UAAU,2BAA2B+B,wBAAyB,CAACC,OvBtKpE,wqEuB0KrB,IAAIuU,EAAc,KACZC,EAAkBlS,EAAKyB,sBAAsB0Q,SAAW,qBAAuB,eAqBrF,OAnBiC,GAA7BnS,EAAK+B,sBAA6B/B,EAAKZ,cAAgBY,EAAK+B,qBAC5DkQ,EAAc,sBAAMvW,UAAU,uBAAhB,eAGTsE,EAAK+B,qBAAuB,GAAK/B,EAAKZ,aAAe,EAC1D6S,EAAc,eAAC,IAAM7K,SAAP,WACV,sBAAM1L,UAAU,uBAAhB,eACA,sBAAMA,UAAWwW,EAAjB,SAAoClS,EAAKZ,kBAIxCY,EAAKZ,aAAe,GAAkC,GAA7BY,EAAK+B,qBACnCkQ,EAAc,sBAAMvW,UAAWwW,EAAjB,SAAoClS,EAAKZ,eAGlDY,EAAKwB,sBACVyQ,EAAc,sBAAMvW,UAAWwW,KAI/B,sBAAKxW,UAAU,OAAO0W,cAAe,SAAAjW,GAAC,OAAGmS,GAAkBnS,EAAG,cAACkW,GAAD,CAAiBrS,KAAMA,MACjF1C,YAAalH,KAAK0H,UAAWP,UAAWnH,KAAK0G,QAASU,aAAcpH,KAAK2H,WAD7E,UAEI,cAAC,EAAD,2BAAkB3H,KAAKqF,MAAMW,QAA7B,IAAqCN,MAAM,wCAC3C,sBAAKJ,UAAU,UAAf,UACI,cAAC0K,GAAD,CAAcN,KAAM9F,EAAKc,MAAOD,MAAK,UAAEb,EAAKa,aAAP,aAAE,EAAY/F,MAAOkD,GAAIsJ,GAActH,KAC5E,sBAAKtE,UAAU,UAAf,UACI,sBAAKA,UAAU,MAAf,UACI,sBAAKA,UAAU,OAAf,UACI,qBAAKA,UAAU,YAAY+B,wBAAyB,CAACC,OAAQ6T,KAC7D,qBAAK7V,UAAU,QAAf,SAAwBsE,EAAKc,QAC5B6Q,GAAc,uBAAMjW,UAAU,gBAAhB,UACX,sBAAMA,UAAU,qBAAqB+B,wBAAyB,CAACC,OvBjNjE,4vCuBkNE,sBAAMhC,UAAU,sBAAsB+B,wBAAyB,CAACC,OvBjNjE,05GuBoNP,sBAAKhC,UAAU,QAAf,UACKoW,GACA,UAAA9R,EAAKe,oBAAL,eAAmBmL,OAAQ,sBAAMxQ,UAAU,OAAhB,SAAwBuQ,GAAsBjM,EAAKe,aAAamL,cAGpG,sBAAKxQ,UAAU,SAAf,UACI,qBAAKA,UAAU,OAAf,SACMsE,EAAKoB,gBAAkB6Q,EACrB,uBAAMvW,UAAU,eAAhB,UACI,sBAAMA,UAAU,QAAhB,oBADJ,IAC0C,sBAAMA,UAAU,SAAhB,SAA0BsE,EAAKoB,cAAckR,mBAAmB5O,KAAKA,UAG/G,cAAC,GAAD,CAA2B+E,QAASzI,EAAKe,aAAcf,KAAMA,EAAMtE,UAAU,mBAGrF,qBAAKA,UAAU,QAAf,SACKuW,IACG,UAAAjS,EAAKM,gBAAL,eAAegR,YAAa,sBAAM5V,UAAU,cAAc+B,wBAAyB,CAACC,OvBvO7F,s+CuB6G3B,GAAkC3B,IAAMC,WAwIxC,SAASqW,GAAT,GAAkC,IAARrS,EAAO,EAAPA,KACtB,EAAgDjE,IAAMsB,SAAS,IAA/D,mBAAOkV,EAAP,KAAyBC,EAAzB,KAyCA,OAvCAzW,IAAM0H,WAAU,WACZ1M,EAAMa,UAAU,CACZ,QAAS,wBACTsI,QAASF,EAAKhC,KACf1F,MAAK,SAAAC,GACJia,EAAoBja,EAAOka,WAAWxS,KAAI,SAAAhB,GACtC,IAAMyE,EAAM,CAAC,aAAgB,iBAAkB,gBAAmB,gBAAgBzE,EAAS,UAC3F,GAAIyE,EACJ,OACI,cAACgK,GAAKK,SAAN,CAAkE9P,QAAS,WACvElH,EAAMa,UAAU,CACZ,QAAS,gBACTsI,QAASF,EAAKhC,GACdkB,UAAWD,IACZ3G,MAAK,WACoB,gBAArB2G,EAAS,SACR4P,GAAU,yBACN,cAACM,GAAD,CAAOnR,GAAG,yBAAV,+CAKqB,mBAArBiB,EAAS,UACb4P,GAAU,sBACN,eAACM,GAAD,CAAOnR,GAAG,sBAAV,4BACmB,uBADnB,8DAfhB,SAuBK0F,GAvBezE,EAASM,gBAAkBN,EAAS,mBA4BrE,IAGC,eAACyO,GAAKI,aAAN,WACKyE,EACD,cAAC7E,GAAKK,SAAN,CAAe9P,QAAS,WACpBlH,EAAMa,UAAU,CACZ,QAAS,qBACTsH,UAAWc,EAAKM,SAASE,KACzBN,QAASF,EAAKhC,GACdsT,WAAYtR,EAAKM,SAASgR,YAC3B7L,OAAM,SAAAjN,GACL,GAAiB,KAAdA,EAAMS,KAAa,CAClB,IAAMuC,EAAoC,gBAA/BwE,EAAKM,SAASE,KAAK,SAA4BqF,GAAO,sBAA4BA,GAAO,+BACpGgJ,GAAU,+BACN,eAAC,GAAD,CAAe7Q,GAAG,+BAA+BqS,kBAAkB,EAAnE,qCAC6B7U,EAD7B,8BAVhB,SAiBKwE,EAAKM,SAASgR,UAAW,iBAAmB,kBAS7D,IAAMoB,GAAmB9O,aAAQ,SAAAnI,GAAK,MAAI,CACtC+C,mBAAoB/C,EAAM+C,mBAC1BK,OAAQpD,EAAMoD,OAAOE,WAFA6E,EAGpB,YAAiE,IAArCjF,EAAoC,EAApCA,MAAOE,EAA6B,EAA7BA,OAAQL,EAAqB,EAArBA,mBACtCmU,EAAcpC,GAAiB5R,EAAO,CAAC,QAAS,oBACtD,IAAIgU,EAAYtc,OAAQ,OAAO,KAE/B,IAAM+F,EAAQL,IAAMsB,SAAS,CAAC5B,MAAO,QACrC,EAAwCsB,EAA4BX,GAApE,mBAAO0B,EAAP,KAAkBhB,EAAlB,KAA2BiB,EAA3B,KAEA,SAAS6U,IACLxU,EAAU6C,SAAS,CACfpJ,KAAM,oBACN0G,aAAc,SAItB,SAASsU,EAAepX,GACpB2C,EAAU6C,SAAS,CACfpJ,KAAM,2BACN2G,mBAAoB/C,IAI5B,IAAMqX,EAAqB,eAAC3D,GAAD,CAAOnR,GAAG,sBAAV,6CACS,uBADT,oEAK3B,OAAOQ,GACP,IAAK,WACL,QACI,OACI,sBACI9C,UAAU,gBAAgBuC,QAAS2U,EACnCtV,YAAaQ,EAAWP,UAAWT,EAASU,aAAcO,EAC1DqU,cAAe,SAAAjW,GAAC,OAAGmS,GAAkBnS,EACjC,eAACuR,GAAKI,aAAN,WACI,cAACJ,GAAKK,SAAN,CAAe9P,QAAS,WACpB4U,EAAe,aACfpU,aAAasU,QAAQ,qCAAsC,cAF/D,sBAMA,cAACrF,GAAKK,SAAN,CAAe9P,QAAS,WACpB4U,EAAe,mBACfpU,aAAasU,QAAQ,qCAAsC,mBAC3DlE,GAAU,sBAAuBiE,IAHrC,oCAXZ,UAoBI,cAAC,EAAD,2BAAkB1W,EAAO,IAAzB,IAA6BN,MAAM,wCACnC,sBAAKJ,UAAU,UAAf,UACI,qBAAKA,UAAU,gBAAf,SACI,qBAAKA,UAAU,MAAM+B,wBAAyB,CAACC,OAAQC,OAE3D,sBAAKjC,UAAU,UAAf,UACI,qBAAKA,UAAU,MAAf,SACI,qBAAKA,UAAU,OAAf,SACI,qBAAKA,UAAU,QAAf,gCAGR,sBAAKA,UAAU,SAAf,UACI,qBAAKA,UAAU,OAAf,SACI,sBAAKA,UAAU,eAAf,UACI,sBAAMA,UAAU,SAAhB,SACKiX,EACIlS,QAAO,SAAAT,GAAI,OAAGA,EAAKZ,aAAe,KAClCa,KAAI,SAAAD,GAAI,OAAKA,EAAKc,OAAS,mBAAqB,QAChD0I,KAAK,MAEd,sBAAM9N,UAAU,SAAhB,SACKiX,EACIlS,QAAO,SAAAT,GAAI,OAAwB,GAArBA,EAAKZ,gBACnBa,KAAI,SAAAD,GAAI,OAAIA,EAAKc,OAAS,qBAC1B0I,KAAK,aAIrB3K,EAAOM,sBACJ,qBAAKzD,UAAU,QAAf,SACI,sBAAMA,UAAU,qBAAhB,SAAsCmD,EAAOM,0BAEjD,iBAO5B,IAAK,YACD,OACI,sBACIzD,UAAU,0BAA0BuC,QAAS2U,EAC7CtV,YAAaQ,EAAWP,UAAWT,EAASU,aAAcO,EAC1DqU,cAAe,SAAAjW,GAAC,OAAGmS,GAAkBnS,EACjC,eAACuR,GAAKI,aAAN,WACI,cAACJ,GAAKK,SAAN,CAAe9P,QAAS,WACpB4U,EAAe,YACfpU,aAAasU,QAAQ,qCAAsC,aAF/D,oBAMA,cAACrF,GAAKK,SAAN,CAAe9P,QAAS,WACpB4U,EAAe,oBACfpU,aAAasU,QAAQ,qCAAsC,oBAC3DlE,GAAU,sBAAuBiE,IAHrC,oCAXZ,UAoBI,cAAC,EAAD,2BAAkB1W,EAAO,IAAzB,IAA6BN,MAAM,wCACnC,sBAAKJ,UAAU,UAAf,2BAEKmD,EAAOM,sBACJ,qBAAKzD,UAAU,UAAf,SACI,sBAAMA,UAAU,qBAAhB,SAAsCmD,EAAOM,0BAEjD,WAIpB,IAAK,kBACL,IAAK,mBACD,OAAO,SAOf,SAASgS,GAAT,GAAiD,IAAzB3Q,EAAwB,EAAxBA,KACpB,MAAoB,wBADwB,EAAlBuQ,gBAGlB,qBAAKrV,UAAU,QAAf,SACI,+CAIM,kBAAf8E,EAAK,SAEA,sBAAK9E,UAAU,QAAf,UACI,4EACA,cAACiQ,GAAD,6BAKJ,sBAAKjQ,UAAU,QAAf,UACI,0DACA,cAACiQ,GAAD,6B,MGrdD,SAASqH,GAAUnY,GAC9B,OACI,sBAAKmD,GAAG,aAAR,UACI,mCACIiV,YAAY,SACZrS,MAAO/F,EAAM+F,MACbsS,SAAUrY,EAAMqY,UACZrY,IACR,wBACIa,UAAU,QACVuC,QAAS,kBAAKpD,EAAMqY,UAAYrY,EAAMqY,SAAS,CAACxW,OAAQ,CAACkE,MAAO,OAChEuS,gBAAetY,EAAM+F,OAAS,IAAIvK,OAClCoH,wBAAyB,CAACC,O1BJnB,w3C2BbvB,IAAM0V,GAAkB/U,aACpB,WAAkD,IAAjD5C,EAAgD,uDAAxC,4BAA6BuD,EAAW,uCAC7C,OAAQA,EAAOnH,MACf,IAAK,iBACD,OAAQmH,EAAOqU,WACnB,QACI,OAAO5X,MAKnB1E,EAAM0B,sBAAsB,yBAAyB,SAACjB,GAClD4b,GAAgBnS,SAAS,CACrBpJ,KAAM,iBACNwb,WAAY7b,EAAOiE,MAAM,cAGlB2X,UCgDAE,I,MArDK1P,aAAQ,SAAUnI,GAClC,MAAO,CACH8X,WAA4C,IAA/B9X,EAAMmD,SAAW,IAAIvI,OAClCsI,MAAOlD,EAAMkD,MACb6B,KAAM/E,EAAM6C,gBACZC,aAAc9C,EAAM8C,aACpBM,OAAQpD,EAAMoD,UANF+E,EAQjB,YAA8F,IAAxE2P,EAAuE,EAAvEA,WAAY5U,EAA2D,EAA3DA,MAAO6B,EAAoD,EAApDA,KAAMjC,EAA8C,EAA9CA,aAAcM,EAAgC,EAAhCA,OAAQkF,EAAwB,EAAxBA,sBAChE,EAA8BhI,IAAMsB,SAAS,IAAjD,mBAAKmW,EAAL,KAAiBC,EAAjB,KAiBA,OACI,sBAAKzV,GAAG,gBAAgBtC,UAA2B,QAAhB6C,EAAyB,eAAiB,GAA7E,UACI,sBAAK7C,UAAU,mBAAf,WACO6X,GAAe,cAAC,EAAoBpV,eAArB,CAAoCF,QAAS8F,IAC/D,cAACiP,GAAD,CAAWpS,MAAO4S,EAAYN,SAAU,SAAA/W,GAAC,OAAIsX,EAActX,EAAEO,OAAOkE,aAExE,eAAC,IAAD,CAAUsQ,MAAOkC,GAAjB,UACI,cAAC,GAAD,CAAUzU,MAAOA,EAAO6B,KAAMA,IACb,UAAhBjC,GACG,sBAAK7C,UAAU,iBAAf,UACI,sBAAKA,UAAU,mBAAf,UACI,cAACwB,EAAD,CAAYC,K5BhClB,uiC4BgCmCc,QA1BrD,WACIG,EAAU6C,SAAS,CACfpJ,KAAM,oBACN0G,aAAc,YAElBjC,YAAW,WACiC,WAArC8B,EAAUqT,WAAWlT,cACpBH,EAAU6C,SAAS,CACfpJ,KAAM,oBACN0G,aAAc,aAGvB,QAekBM,EAAOC,KAAKO,8BACT,qBAAK3D,UAAU,eAAf,SACI,+BAAOmD,EAAOC,KAAKO,kCAExB,KACH,qBAAK3D,UAAU,QAAf,+BAEJ,cAAC,GAAD,CAAUiD,MAAOA,EAAO6B,KAAM,CAAC,QAAS,wBAGhD,cAAC,GAAD,c,wDCpDhB,IAIekT,GAJG,CACdC,OCPW,YAA2D,IAAjCxW,EAAgC,EAAhCA,KAAMuG,EAA0B,EAA1BA,KAAMkI,EAAoB,EAApBA,SAAaxO,EAAO,kBAC/DhB,EAASL,IAAMsB,SAAS,CAAC5B,MAAO,QACtC,EAAwCsB,EAA4BX,GAApE,mBAAO0B,EAAP,KAAkBhB,EAAlB,KAA2BiB,EAA3B,KACA,OACI,8CAAKrC,UAAU,qBAAwB0B,GAAvC,IACIE,YAAaQ,EAAWP,UAAWT,EAASU,aAAcO,EAD9D,UAEI,cAAC,EAAD,2BAAkB3B,EAAO,IAAzB,IAA6BN,MAAM,uCACnC,sBAAKJ,UAAU,UAAf,UACI,qBAAKA,UAAU,OAAO+B,wBAAyB,CAACC,OAAQP,KACxD,qBAAKzB,UAAU,QAAf,SAAwBgI,IACvBkI,GACG,qBAAKlQ,UAAU,QAAf,SACKkQ,YDJrBgI,QEVW,SAAiB/Y,GAC5B,OAAO,iCAAKa,UAAU,sBAAyBb,MCoKpCgZ,GAtJMjQ,aAAQ,SAAAnI,GAAK,MAAI,CAClCkD,MAAOlD,EAAMkD,MACbH,mBAAoB/C,EAAM+C,sBAFToF,EAIjB,YAAwE,IAAD,EAA9CkQ,EAA8C,EAA9CA,QAASC,EAAqC,EAArCA,QAASpV,EAA4B,EAA5BA,MAAOH,EAAqB,EAArBA,mBAC9C,EAAoBzC,IAAMsB,SAAS,MAAnC,mBAAO2W,EAAP,KAAWC,EAAX,KACAlY,IAAM0H,WAAU,WACZ1M,EAAMa,UAAU,CACZ,QAAS,UACVU,MAAK,SAAAC,GACDA,EAAO2b,aACNnd,EAAMa,UAAU,CACZ,QAAS,qBACTuc,oBAAqB5b,EAAO2b,eAC7B5b,MAAK,SAAA8b,GACDA,EAAKC,uBACJ9b,EAAO2b,aAAP,WAAyBE,EAAKC,qBAA9B,YAAsDD,EAAKE,yBAE/DL,EAAM1b,MAGT0b,EAAM1b,QAEhB,IAQH,IAAIgc,EAAMxY,IAAMyY,OAAO,MACvBzY,IAAM0H,WAAU,WACTqQ,GACCS,EAAIE,QAAQC,UAEjB,CAACZ,IAEJ,IAAMa,EAAoBpE,GAAiB5R,EAAO,CAAC,QAAS,oBAAoBtI,OAAS,EAEzF,OACI,sBAAK2H,GAAG,iBAAiBuW,IAAKA,EAAK7Y,UAAWoY,EAAU,UAAY,GAChEc,UAhBR,SAAoBzY,GACH,WAAVA,EAAE0Y,KACDd,KAcsBe,SAAU,EADpC,UAEI,sBAAKpZ,UAAU,UAAf,UACI,sBAAKA,UAAU,SAAf,UACI,sBAAKA,UAAU,QAAf,UACI,cAAC0K,GAAD,CACIpI,IAAM,OAAFgW,QAAE,IAAFA,OAAA,EAAAA,EAAIhW,KAAM,EACd8H,OAAS,OAAFkO,QAAE,IAAFA,OAAA,EAAAA,EAAI1K,aAAc,MAAS,OAAF0K,QAAE,IAAFA,OAAA,EAAAA,EAAI3K,WAAY,IAAM2K,EAAG3K,UAAa,IACtExI,MAAK,OAAEmT,QAAF,IAAEA,GAAF,UAAEA,EAAIe,qBAAN,aAAE,EAAmBja,MAC1BmM,sBAAsB,IAC1B,qBAAKvL,UAAU,UAAf,SACMiZ,GAAsB,CAAC,mBAAoB,mBAAmB3P,SAASxG,IACrE,wBACI9C,UAAU,SACV+B,wBAAyB,CAACC,OAAQC,GAClCM,QAAS,WACLG,EAAU6C,SAAS,CACfpJ,KAAM,oBACN0G,aAAc,SAElBwV,KAEJ3B,cAAe,SAAAjW,GAAC,OAAGmS,GAAkBnS,EACjC,cAACuR,GAAKI,aAAN,UACI,cAACJ,GAAKK,SAAN,CAAe9P,QAAS,WACpB,IAAM+W,EAAU,CAAC,mBAAoB,YAAa,kBAAmB,YAAYxW,GACjFJ,EAAU6C,SAAS,CACfpJ,KAAM,2BACN2G,mBAAoBwW,IAExBvW,aAAasU,QAAQ,qCAAsCiC,GAC3DjB,KAPJ,2CAcxB,sBAAKrY,UAAU,QAAf,UACI,sBAAKA,UAAU,OAAf,iBACKsY,QADL,IACKA,OADL,EACKA,EAAI1K,WADT,KACwB,OAAF0K,QAAE,IAAFA,OAAA,EAAAA,EAAI3K,YAAa,MAEvC,qBAAK3N,UAAU,eAAf,gBACKsY,QADL,IACKA,OADL,EACKA,EAAIE,qBAIjB,cAAChS,EAAD,UACI,sBAAKxG,UAAU,iBAAf,UACI,qBAAKA,UAAU,UAAf,SACI,cAAC,GAAUkY,QAAX,UACI,cAAC,GAAUD,OAAX,CAAkBxW,KhCzF5B,kyTgCyFiDuG,KAAM,UAAWzF,QAAS,WAC7D8V,IACAlF,GAAU,wCACN,cAAC,GAAD,CACI7Q,GAAG,wCACHsS,aAAa,UAAUT,KAAM,WACzB9Y,EAAMa,UAAU,CACZ,QAAS,YAEd4X,WAAW,EANlB,uDAahB,sBAAK9T,UAAU,QAAf,UACI,qBAAKA,UAAU,QAAf,SACI,cAACiQ,GAAD,CAAY/U,KAAK,qCAAjB,uBAEJ,sBAAK8E,UAAU,QAAf,UACI,eAACiQ,GAAD,CAAY/U,KAAK,+CAAjB,qBAAyEkC,KAD7E,eACsG,cAAC6S,GAAD,CAAY1N,QAAS,WACnH8V,IACAlF,GAAU,iCACN,eAAC,GAAD,CAAe7Q,GAAG,iCACd/C,MAAM,QAAQ6F,MAAM,UAAUwP,aAAa,QAC3CD,kBAAkB,EAFtB,UAII,eAAC1E,GAAD,CAAYjQ,UAAU,sBAClBC,MAAO,CAACG,MAAO,sCACflF,KAAK,+CAFT,qBAGiBkC,KAGjB,kEAAoC,cAAC6S,GAAD,CAAY/U,KAAK,kCAAjB,mBAApC,8BAEA,iEAAmC,cAAC+U,GAAD,CAAY/U,KAAK,uDAAjB,qBAAnC,cAA0I,uBAA1I,+BAC4B,cAAC+U,GAAD,CAAY/U,KAAK,qCAAjB,oBAD5B,OAGA,2CAAa,cAAC+U,GAAD,CAAY/U,KAAK,2BAAjB,0BAAb,0BAlBsF,iCA6BtH,qBAAK8E,UAAU,SAASuC,QAAS8V,UCrJ1C,SAASkB,KAEZ,MAAoClZ,IAAMsB,UAAS,GAAnD,mBAAO6X,EAAP,KAAmBC,EAAnB,KAEA,OACI,sBAAKnX,GAAG,mBAAR,UACI,eAAC,IAAD,CAAUkT,MAAO9S,EAAjB,UACI,cAAC,GAAD,CAAe0V,QAASoB,EAAYnB,QAAS,kBAAKoB,GAAc,MAChE,cAAC,EAAD,CAAiBpR,sBAAuB,kBAAKoR,GAAc,MAC3D,cAAC,GAAD,CAAapR,sBAAuB,kBAAKoR,GAAc,SAE3D,qBAAKnX,GAAG,sB,ICfCoX,G,kDAYjB,aAAe,IAAD,uBACV,gBANJ3Z,MAAO,CACHW,OAAQ,CACJX,MAAO,QAGD,MAEuCQ,EAAoB,gBAF3D,0BAET,EAAK6B,UAFI,KAEO,EAAKhB,QAFZ,KAEqB,EAAKiB,WAF1B,O,0CAKd,WACI,OACI,yBACIrC,UAAU,yBACVuC,QAAS7H,KAAKyE,MAAMoD,QACpBX,YAAalH,KAAK0H,UAClBP,UAAWnH,KAAK0G,QAChBU,aAAcpH,KAAK2H,WALvB,UAOI,cAAC,EAAD,2BAAkB3H,KAAKqF,MAAMW,QAA7B,IAAqCN,MAAM,6CAC3C,qBAAKJ,UAAU,UAAf,SACKtF,KAAKyE,MAAM+Q,kB,GA5BkB7P,IAAMC,WCDnCqZ,G,kDACjB,WAAYC,GAAO,IAAD,8BACd,cAAMA,IAkDVC,YAAa,WACT,EAAKlZ,SAAS,CACVmZ,UAAU,EACVC,WAAY,EAAKC,eAAc,MAtDrB,EAyDlBC,WAAY,WACR,EAAKtZ,SAAS,CACVmZ,UAAU,EACVI,OAAQ,MACRH,WAAY,EAAKC,eAAc,MA7DrB,EAgElBG,gBAAiB,SAAC1Z,GACd,EAAKE,SAAS,CACVuZ,OAAQzZ,EAAEI,YAAYC,QAAQ,QAlEpB,EAqElBsZ,cAAe,SAAC3Z,GACF,SAAPA,EAAE0Y,KACD,EAAKha,MAAMkb,mBAAqB,EAAKlb,MAAMkb,qBApE/C,EAAKta,MAAO,CACR+Z,UAAU,EACVI,OAAQ,MACRH,WAAY,EAAKC,cAAc,EAAK7a,MAAMmb,YANhC,E,iDAUlB,SAAetB,GACX,OAAQA,GAAYte,KAAKyE,MAAM+F,MAAU,YAAc,sB,oBAG3D,WAAW,IAAD,OACFlF,EAAU,mBAUd,OATGtF,KAAKqF,MAAM+Z,WACV9Z,GAAW,aAEZtF,KAAKyE,MAAMmb,YACVta,GAAW,cAEZtF,KAAKyE,MAAMob,UACVva,GAAW,YAGX,sBAAKA,UAAWA,EACZC,MAAO,CAAC,eAAgBvF,KAAKqF,MAAMma,QAAU,OADjD,UAEMxf,KAAKyE,MAAMiG,MACT,qBAAKpF,UAAWtF,KAAKqF,MAAMga,WAA3B,SAAwCrf,KAAKyE,MAAMiG,QACnD,KACJ,uBACIjJ,KAAMzB,KAAKyE,MAAMhD,KACjBqb,SAAU9c,KAAKyE,MAAMqY,SACrBtS,MAAOxK,KAAKyE,MAAM+F,MAClBtD,YAAalH,KAAKyf,gBAClBK,QAAS9f,KAAKmf,YACdY,OAAQ/f,KAAKuf,WACbK,UAAW5f,KAAKyE,MAAMmb,YAAa,EACnCpB,UAAWxe,KAAK0f,cAChBM,UAAWhgB,KAAKyE,MAAMub,UACtBC,OAAQ,SAAAla,GACD,EAAKtB,MAAMyb,aACVna,EAAEoS,oBAGd,qBAAK7S,UAAU,qB,GA/CcK,IAAMC,WCU/Cua,I,MAAmB,CAAC,aAASxe,IAC1B,SAASye,GAAoB/a,GAChC8a,GAAiB9a,EAarB,SAASgb,GAAwBC,GAC7BA,EAAUC,OAAQ,WACd,OACI,qBAAKjb,UAAW,UAAWgb,EAAUjb,MAAMmb,cAAc,GAAG,WAA5D,SAAyEF,EAAUjb,MAAMob,iBAGjGH,EAAUI,aAAc,SAAS/R,GAC1BA,EACC2R,EAAUra,SAAS,CACfwa,cAAe9R,EACf6R,eAAe,KAGnBF,EAAUra,SAAS,CACfua,eAAe,IAEnBta,YAAW,WACPoa,EAAUra,SAAS,CACfwa,cAAe,SAEpB,OAQR,IAAME,GAAb,4MACItb,MAAO,CACHub,KAAMT,IAFd,EAcIU,sBAAuB,SAAAzf,GACnB,IAQMiE,EAAMjE,EAAM,oBARJ,CACV,oCACA,6BACA,iCACA,qCACA,0BACA,4BAGMwN,SAASvJ,EAAM,WACrB,EAAKY,SAAS,CAAC2a,KAAMvb,KAzBjC,uDAKI,WAAoB,IAAD,OAEf+a,GAAqB,SAAA/a,GACjB,EAAKY,SAAS,CAAC2a,KAAMvb,KAGzB1E,EAAM0B,sBAAsB,2BAA4BrC,KAAK6gB,yBAXrE,oBA6BI,WACI,OAAQ7gB,KAAKqF,MAAMub,KAAK,UACxB,IAAK,oCACD,OACI,cAAC,GAAD,IAGR,IAAK,6BACD,OACI,cAAC,GAAD,CAAoB5C,KAAMhe,KAAKqF,MAAMub,KAAKE,YAGlD,IAAK,iCACD,OACI,cAAC,GAAD,CAAwB9C,KAAMhe,KAAKqF,MAAMub,OAGjD,IAAK,qCACD,OACI,cAAC,GAAD,IAGR,IAAK,0BACD,OACI,cAAC/B,GAAD,IAGR,IAAK,2BAED,OADAve,OAAOC,SAASwgB,SAEZ,0GAGR,QACI,OAAO,gDA/DnB,GAA6Bpb,IAAMC,WAuE7Bob,G,kDACF,WAAY9B,GAAO,IAAD,8BACd,cAAMA,IAGV7Z,MAAO,CACHzC,OAAQ,GACRid,SAAS,EACTY,cAAe,GACfD,eAAe,GARD,EAUlBS,oBAAsB,SAACC,GACnB,EAAKjb,SAAS,CACVrD,OAAQse,EAAM5a,OAAOkE,MACrBqV,SAAS,IAEb,EAAKa,aAAa,KAfJ,EAiBlBS,aAjBkB,sBAiBJ,sBAAA7G,EAAA,sDACV3X,EAAKye,gBAAgB,EAAK/b,MAAMzC,QAAQyM,OAAM,SAAAgS,GAC1C,OAAOA,EAAOhP,SACd,IAAK,qBACDoG,GAAW,2BACP,eAAC,GAAD,CAAe5T,MAAM,QAAQoV,kBAAkB,EAAMrS,GAAG,2BAAxD,yFACgF,uBADhF,0DAKJ,EAAK8Y,aAAa,IAClB,MACJ,IAAK,uBACD,EAAKza,SAAS,CAAC4Z,SAAS,IACxB,EAAKa,aAAa,2CAElB,MACJ,IAAK,0CACD,MACJ,QACI,EAAKza,SAAS,CAAC4Z,SAAS,IACxB,EAAKa,aAAaW,EAAOhP,aArBvB,2CAfVgO,GAAwB,gBAFV,E,0CA2ClB,WACI,IAAME,EAAOvgB,KAAKugB,OAClB,OACI,sBAAK3Y,GAAG,OAAOtC,UAAU,wBAAzB,UAEI,mDAEA,mBAAGA,UAAU,cAAb,kFAIA,cAAC,GAAD,CACI7D,KAAK,OACL+I,MAAOxK,KAAKqF,MAAMzC,OAClBgd,WAAW,EACX9C,SAAU9c,KAAKihB,oBACftB,kBAAmB3f,KAAKmhB,aACxBtB,QAAS7f,KAAKqF,MAAMwa,UAExB,cAACU,EAAD,IAEA,cAAC,GAAD,CACI1Y,QAAS7H,KAAKmhB,aADlB,kBAKA,cAAC,IAAD,CAAUrG,MAAOkC,GAAjB,SACI,cAAC,GAAD,a,GAvEoBrX,IAAMC,WAiFxC0b,G,kDAIF,WAAYpC,GAAO,IAAD,8BACd,cAAMA,IAGV7Z,MAAO,CACHxC,KAAM,GACNgd,SAAS,EACTY,cAAe,GACfD,eAAe,GARD,EAUlBe,sBAAuB,SAACL,GACpB,EAAKjb,SAAS,CACVpD,KAAMqe,EAAM5a,OAAOkE,MACnBqV,SAAS,IAEb,EAAKa,aAAa,IACfQ,EAAM5a,OAAOkE,MAAMvK,QAAQ,EAAKwE,MAAMuZ,KAAKvc,KAAKxB,QAC/C,EAAKuhB,qBAAqBN,EAAM5a,OAAOkE,QAjB7B,EAoBlBgX,qBAAsB,SAAC3e,GACD,iBAARA,IACNA,OAAMlB,IAEVkB,EAAOA,GAAQ,EAAKwC,MAAMxC,MAClB5C,QAAQ,EAAKwE,MAAMuZ,KAAKvc,KAAKxB,QAErC0C,EAAK8e,cAAc5e,GAAMwM,OAAM,SAAAgS,GACP,uBAAjBA,EAAOhP,SACN,EAAKpM,SAAS,CAAC4Z,SAAS,IACxB,EAAKa,aAAa,uCAGlB,EAAKza,SAAS,CAAC4Z,SAAS,IACxB,EAAKa,aAAaW,EAAOhP,cAhCjCgO,GAAwB,gBAFV,E,0CAsClB,WACI,IAAME,EAASvgB,KAAKugB,OAEhBlO,EAAyC,6BAA/BrS,KAAKyE,MAAMuZ,KAAKvc,KAAK,SAC9B,oBAAG6D,UAAU,cAAb,0DACqD,uBADrD,4BAKA,oBAAGA,UAAU,cAAb,6BACmB,kDADnB,wDAIL,OACI,sBAAKsC,GAAG,OAAOtC,UAAU,iBAAzB,UAEI,6BAAKtF,KAAKyE,MAAMuZ,KAAKF,eAEpBzL,EAED,cAAC,GAAD,CACI5Q,KAAK,OACL+I,MAAOxK,KAAKqF,MAAMxC,KAClBia,SAAU9c,KAAKuhB,sBACf3B,WAAW,EACXlV,MAAM,OACNsV,UAAWhgB,KAAKyE,MAAMuZ,KAAKvc,KAAKxB,OAChC0f,kBAAmB3f,KAAKwhB,qBACxB3B,QAAS7f,KAAKqF,MAAMwa,UAExB,cAACU,EAAD,IAEA,cAAC,GAAD,CACI1Y,QAAS7H,KAAKwhB,qBADlB,kBAKA,cAAC,IAAD,CAAU1G,MAAOkC,GAAjB,SACI,cAAC,GAAD,a,GAhFarX,IAAMC,WA0FjC8b,G,kDACF,WAAYxC,GAAO,IAAD,8BACd,cAAMA,IAMV7Z,MAAO,CACHsc,SAAU,GACV9B,SAAS,EACTY,cAAe,GACfD,eAAe,GAXD,EAalBoB,0BAA2B,SAACV,GACxB,EAAKjb,SAAS,CACV0b,SAAUT,EAAM5a,OAAOkE,MACvBqV,SAAS,IAEb,EAAKa,aAAa,KAlBJ,EAoBlBc,qBApBkB,sBAoBI,sBAAAlH,EAAA,sDAClB3X,EAAKkf,aAAa,EAAKxc,MAAMsc,UAAUtS,OAAM,SAAAgS,GACtB,yBAAhBA,EAAOhP,SACN,EAAKpM,SAAS,CAAC4Z,SAAS,IACxB,EAAKa,aAAa,wCAGlB,EAAKza,SAAS,CAAC4Z,SAAS,IACxB,EAAKa,aAAaW,EAAOhP,aARf,2CAlBlBgO,GAAwB,gBAFV,E,0CAgClB,WACI,IAAME,EAAOvgB,KAAKugB,OAClB,OACI,qBAAK3Y,GAAG,OAAOtC,UAAU,qBAAzB,SACI,sBAAKA,UAAU,UAAf,UAEI,sDAEA,mBAAGA,UAAU,cAAb,+CAIA,cAAC,GAAD,CACI7D,KAAM,uBAAwBqS,SAASgO,KAAKvc,MAAQ,OAAS,WAC7DiF,MAAOxK,KAAKqF,MAAMsc,SAClB7E,SAAU9c,KAAK4hB,0BACfhC,WAAW,EACXlV,MAAM,sBACNiV,kBAAmB3f,KAAKwhB,qBACxBtB,aAAa,EACbL,QAAS7f,KAAKqF,MAAMwa,UAExB,sBAAKva,UAAU,OAAf,UACKtF,KAAKyE,MAAMuZ,KAAK+D,cAAc,SAAS,wCAAqB/hB,KAAKyE,MAAMuZ,KAAK+D,iBAGjF,qBAAKzc,UAAU,kBAAf,SACI,mBAAG9E,KAAK,IAAR,gCAGJ,cAAC+f,EAAD,IAEA,cAAC,GAAD,CACI1Y,QAAS7H,KAAKwhB,qBADlB,oBAKA,cAAC,IAAD,CAAU1G,MAAOkC,GAAjB,SACI,cAAC,GAAD,e,GAvEarX,IAAMC,WAkFrCoc,G,4MACF3c,MAAO,CACH4c,UAAW,GACXC,SAAU,GACVzB,cAAe,GACfD,eAAe,G,EAEnB2B,2BAA4B,SAACjB,GACzB,EAAKjb,SAAS,CAACgc,UAAWf,EAAM5a,OAAOkE,S,EAE3C4X,0BAA2B,SAAClB,GACxB,EAAKjb,SAAS,CAACic,SAAUhB,EAAM5a,OAAOkE,S,EAE1CgX,qB,sBAAsB,sBAAAlH,EAAA,sEACZ3X,EAAK0f,mBAAmB,EAAKhd,MAAM4c,UAAW,EAAK5c,MAAM6c,UAAU7S,OAAM,SAAAgS,GAC3E,EAAKpb,SAAS,CAACqc,eAAgBjB,EAAOhP,aAFxB,2C,4CAKtB,WACI,OACI,qBAAKzK,GAAG,OAAOtC,UAAU,mBAAzB,SACI,sBAAKA,UAAU,UAAf,UAEI,2CAEA,mBAAGA,UAAU,cAAb,wDAIA,cAAC,GAAD,CACI7D,KAAK,OACL+I,MAAOxK,KAAKqF,MAAM4c,UAClBnF,SAAU9c,KAAKmiB,2BACfvC,WAAW,IAEf,cAAC,GAAD,CACIne,KAAK,OACL+I,MAAOxK,KAAKqF,MAAM6c,SAClBpF,SAAU9c,KAAKoiB,4BAEnB,qBAAK9c,UAAU,SAAf,SACKtF,KAAKqF,MAAMid,gBAAkB,KAGlC,cAAC,GAAD,CACIza,QAAS7H,KAAKwhB,qBADlB,qBAKA,cAAC,IAAD,CAAU1G,MAAOkC,GAAjB,SACI,cAAC,GAAD,e,GAlDarX,IAAMC,W,4CC7XpC,SAAS2c,GAAkBC,GAC9B,IAAIC,EAAI,GACR,IAAI,IAAM/S,KAAQ8S,EAAM,CACpB,IAAIE,EAAKF,EAAM9S,GACQ,iBAAbgT,EAAIlY,MACViY,EAAI,iBAAmB/S,GAAOgT,EAAIlY,MACR,iBAAbkY,EAAIlY,QACjBiY,EAAI,iBAAmB/S,GAAvB,4BAAmDgT,EAAIlY,MAAMmY,OAA7D,MAGR,OAAOF,ECLX,IAAMG,GAAS,CAAE/L,OAAKgM,WAASC,UAAQC,UAGhC,SAASC,GAAcve,GAC1B,OACI,6CACIwe,qBAAoBC,IAChBze,GAFR,IAGIc,MAAOgd,GAAkB,2BAAIM,IAAYD,GAAM,WAK3D,IAAMM,GAAYN,GAAM,MAAeO,OAAO3Y,MCV9C7J,EAAMyiB,kBAAkBlhB,MAAK,SAAUmhB,GACnCjD,GAAoBiD,MA+CTC,OAzCf,WA4BI,OA3BA3d,IAAM0H,WAAU,WACZ1M,EAAM0B,sBAAsB,mBAAoB/B,OAAOijB,mBAAqB,SAAUniB,GAClFC,QAAQe,MAAM,eAAgBhB,EAAOgB,OAErCqW,GAAW,oBACP,eAAC,GAAD,CACI5T,MAAM,QACNoV,kBAAkB,EAClBrS,GAAG,oBACHkS,YAAY,UACZE,mBAAoB1Z,OAAOC,SAASwgB,OAAOta,KAAKnG,OAAOC,UACvDwZ,yBAAyB,EACzBrP,MAAM,cAPV,6CASoC,uBATpC,8EAWiC,uBAXjC,6DAaO,mBAAGlK,KAAK,uDAAuDgjB,IAAI,aAAald,OAAO,SACtFf,MAAO,CAACG,MAAO,yCADhB,8BAEH,uBAAK,uBACL,8BAAMtE,EAAOgB,MAAMqhB,qBAIhC,IAGC,eAACT,GAAD,CAAepb,GAAG,MAAMC,QAASyQ,GAAjC,UACI,cAAC,IAAD,CAAUwC,MAAOvC,GAAjB,SACI,cAAC,GAAD,MAEJ,cAAC,GAAD,IACA,cAAC,IAAD,CAAUuC,MAAOhD,GAAjB,SACI,cAACE,GAAD,UC9ChB0L,IAASC,OACL,cAAC,IAAMC,WAAP,UACI,cAAC,GAAD,MAEJ9P,SAAS+P,eAAe,W","file":"static/js/main.d1ddab3c.chunk.js","sourcesContent":["// https://love2dev.com/blog/javascript-remove-from-array/#remove-from-array-splice\n/**\n * Removes an item from an array\n * @param {*} item The item to remove\n */\nArray.prototype.remove = function (item) {\n    for( var i = 0; i < this.length; i++){ \n        if ( this[i] === item) { \n            this.splice(i, 1); \n        }\n    }\n};\n\nexport default Array.prototype.remove;","import TdClient from 'tdweb';\nimport {getConfig} from './config';\n\nexport function getUseTestDc() {\n    var urlPar=new URL(window.location.href).searchParams.get('test');\n    if(urlPar){\n        return urlPar==='1' || urlPar==='true';\n    }\n    return false;\n}\n\nexport function getCurrentSessionId() {\n    return new URL(window.location.href).searchParams.get('account') || '1';\n}\n\n/**\n * Provides options to communicate with the Tdweb library\n */\nexport default class TdLib {\n    /** @type TdClient */\n    static #tdClient;\n    /** @type {[string: Array<Function>]} */\n    static #updateHandlers={};\n\n    /**\n     * Creates the instance of Tdweb\n     */\n    static async initializeTdLib() {\n        const {log}= getConfig();\n        TdLib.#tdClient= new TdClient({\n            useDatabase: true,\n            instanceName: ( getCurrentSessionId() ) + (getUseTestDc() ? 'test' : 'production'),\n            onUpdate: function (update) {\n                if(log.log_updates) {\n                    console.log('Update: ',update);\n                }\n                if(TdLib.#updateHandlers[update['@type']]){\n                    TdLib.#updateHandlers[update['@type']].forEach(h => h(update));\n                }\n            }\n        });\n        return await TdLib.sendQuery({'@type': 'getAuthorizationState'});\n    }\n\n    /**\n     * Listen for updates from TdLib\n     * @param {string} type The type of the update to listen to. Look for TdLib API docs for types\n     * @param {Function} handler The function that gets called with the update object when the update is received\n     */\n    static registerUpdateHandler(type, handler) {\n        if(TdLib.#updateHandlers[type]===undefined){\n            TdLib.#updateHandlers[type]= [];\n        }\n        TdLib.#updateHandlers[type].push(handler);\n    }\n\n    /**\n     * Remove an existing update handler\n     * @param {string} type The type of the update to remove handler from. Look for TdLib API docs for types\n     * @param {Function} handler The handler to remove\n     */\n    static unRegisterUpdateHandler(type, handler) {\n        if(TdLib.#updateHandlers[type]===undefined){\n            return;\n        }\n        TdLib.#updateHandlers[type].remove(handler);\n    }\n\n    /**\n     * Send a request to the TdLib instance\n     * If the query contains an `@extra` field, the same field will be added to the result\n     * @param {import('tdweb').TdObject} query The request to send. Consult TdLib & JSON interface API for help.\n     * @returns {Promise<import('tdweb').TdObject | import('tdweb').TdError>} The result of the request\n     */\n    static sendQuery(query) {\n        const {log}= getConfig();\n        if(log.log_queries) {\n            console.log('Query: ',query);\n        }\n        return new Promise((resolve, reject) => {\n            TdLib.#tdClient.send(query).then(result=> {\n                if(log.log_queries) {\n                    console.log('Query result: ', result);\n                }\n                resolve(result);\n            }, error=> {\n                if(log.log_queries) {\n                    console.error('Query failed: ', error);\n                }\n                reject(error);\n            }\n            );\n        });\n    }\n}","export function getCredentials() {return {api_id: 3022678,api_hash: 'd7b7676a82906a6182f4a5e5e9555673'};}export function getConfig() {return {use_test_dc: false,log: {log_updates: true,log_queries: true}};}\n","export default '0.0.2-beta1';","import TdLib from './tdlib';\nimport {getCredentials} from './config';\nimport {getUseTestDc} from './tdlib';\nimport version from '../../version';\n\nTdLib.registerUpdateHandler('updateAuthorizationState',function (update) {\n    const credentials= getCredentials();\n    const auth_state= update['authorization_state'];\n    \n    if(auth_state['@type']==='authorizationStateWaitEncryptionKey'){\n        TdLib.sendQuery({'@type': 'checkDatabaseEncryptionKey', 'encryption_key': ''});\n    }\n    if(auth_state['@type']==='authorizationStateWaitTdlibParameters'){\n        TdLib.sendQuery({\n            '@type': 'setTdlibParameters',\n            'parameters': {\n                'database_directory': 'tdlib',\n                'use_message_database': true,\n                'use_secret_chats': true,\n                'api_id': credentials.api_id,\n                'api_hash': credentials.api_hash,\n                'system_language_code': 'en',\n                'device_model': 'Web',\n                'application_version': version,\n                'enable_storage_optimizer': true,\n                'use_test_dc': getUseTestDc(),\n            }\n        });\n    }\n});\n\n/**\n * Provides functions to pass required authorization data to Telegram\n */\nexport default class Auth {\n    /**\n     * Pass phone number of the account to be logged in to\n     * @param {string} number The phone number the user entered\n     * @returns TdLib query result\n     */\n    static async givePhoneNumber(number) {\n        return await TdLib.sendQuery({'@type': 'setAuthenticationPhoneNumber', 'phone_number': number});\n    }\n    /**\n     * Pass authorization code the user has received\n     * @param {string} code The code the user entered\n     * @returns TdLib query result\n     */\n    static async checkAuthCode(code) {\n        return await TdLib.sendQuery({'@type': 'checkAuthenticationCode', 'code': code});\n    }\n    /**\n     * Pass 2FA password of the account\n     * @param {string} pass The password the user entered\n     * @returns TdLib query result\n     */\n    static async check2FACode(pass) {\n        return await TdLib.sendQuery({'@type': 'checkAuthenticationPassword', 'password': pass});\n    }\n    /**\n     * Sign up to Telegram\n     * @param {string} first The first name to be used in the new account\n     * @param {string} last Tha last name to be used in the new account\n     * @returns TdLib query result\n     */\n    static async registerNewAccount(first, last) {\n        return await TdLib.sendQuery({'@type': 'registerUser', 'first_name': first, 'last_name': last});\n    }\n}","// All icons are from Telegram Desktop, converted to SVG using https://pngtosvg.com/\n\nimport raw from 'raw.macro';\n\nvar chatFilerIcons = {\n    All     : [raw('./all.svg'     ), raw('./all_active.svg'     )],\n    Bots    : [raw('./bots.svg'    ), raw('./bots_active.svg'    )],\n    Channels: [raw('./channels.svg'), raw('./channels_active.svg')],\n    Custom  : [raw('./custom.svg'  ), raw('./custom_active.svg'  )],\n    Groups  : [raw('./groups.svg'  ), raw('./groups_active.svg'  )],\n    Private : [raw('./private.svg' ), raw('./private_active.svg' )],\n    Setup   : [raw('./setup.svg'   )                              ],\n    Unread  : [raw('./unread.svg'  ), raw('./unread_active.svg'  )],\n\n    Cat     : [raw('./cat.svg'     ), raw('./cat_active.svg'     )],\n    Crown   : [raw('./crown.svg'   ), raw('./crown_active.svg'   )],\n    Favorite: [raw('./favorite.svg'), raw('./favorite_active.svg')],\n    Flower  : [raw('./flower.svg'  ), raw('./flower_active.svg'  )],\n    Game    : [raw('./game.svg'    ), raw('./game_active.svg'    )],\n    Home    : [raw('./home.svg'    ), raw('./home_active.svg'    )],\n    Love    : [raw('./love.svg'    ), raw('./love_active.svg'    )],\n    Mask    : [raw('./mask.svg'    ), raw('./mask_active.svg'    )],\n    Party   : [raw('./party.svg'   ), raw('./party_active.svg'   )],\n    Sport   : [raw('./sport.svg'   ), raw('./sport_active.svg'   )],\n    Study   : [raw('./study.svg'   ), raw('./study_active.svg'   )],\n    Trade   : [raw('./trade.svg'   ),                             ],\n    Travel  : [raw('./travel.svg'  ), raw('./travel_active.svg'  )],\n    Work    : [raw('./work.svg'    ), raw('./work_active.svg'    )],\n};\nexport default chatFilerIcons;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * Adds a ripple effect to a button.\n * \n * Insert at the beginning of the button.\n * \n * **Note:** The button needs `position: relative;` and `overflow: hidden;`\n */\nexport default class RippleEffect extends React.Component {\n    static propTypes= {\n        /** \n         * - Change to `pressed` on `mouseDown`\n         * - Change to `released` on `mouseUp`\n         * - Change to `off` 1000ms after `mouseUp`\n         */\n        state: PropTypes.oneOf(['off', 'pressed', 'released']).isRequired,\n        X: PropTypes.number,\n        Y: PropTypes.number,\n        width: PropTypes.number,\n        height: PropTypes.number,\n        /** The color to show in the ripple (same as `:active` if you used CSS) */\n        color: PropTypes.string.isRequired,\n        /** Pass true if the button is small to make animation faster */\n        small: PropTypes.bool\n    }\n\n    /** Gets the smallest radius that a circle, centered at click location, needs to fill the button */\n    getMaxRadius() {\n        if(!this.props.small){\n        //  It's a bit hard to understand. Let me explain:\n        //  \n        //  1. It calculates the coordinates relative to the 4 edges of the button ────╮\n        //  2. The diagonal distance to the edges are calculated using the             │\n        //      pythagoras rule, from the results of step 1            │               │\n        //  3. The biggest distance is selected and then returned.     │               │\n        //          │                                                  │               │\n        //  ╭───────┴──────╮  ╭────────────────────────────────────────╯               │        \n        //  │           ╭──┼──┴───╮                                                    │                  \n            return Math.max(//    │╭───────────────────────────────────────────────────┴──────────────╮\n                /* ┏ */ Math.hypot(this.props.X                     , this.props.Y),//                │ \n                /* ┓ */ Math.hypot(this.props.width - this.props.X  , this.props.Y),//                │\n                /* ┗ */ Math.hypot(this.props.X                     , this.props.height - this.props.Y), \n                /* ┛ */ Math.hypot(this.props.width - this.props.X  , this.props.height - this.props.Y), \n            );\n        } else {\n            const {X, Y, width, height} = this.props;\n            const [rX, rY] = [X - width / 2, Y - height / 2]; // Click position relative to center of circle.\n            const distanceToCenter= Math.hypot(Math.abs(rX), Math.abs(rY)); // Get distance from click position to the center of circle.\n            return distanceToCenter + (width / 2); // Add circle radius to result\n        }\n    }\n    render() {\n        if(this.props.state=='off') return null;\n        return (\n            <div\n                className={'ripple '+this.props.state+ (this.props.small? ' small':'')}\n                style={{\n                    '--top': (this.props.Y || 0)+'px',\n                    '--left': (this.props.X || 0)+'px',\n                    '--radius': this.getMaxRadius()+'px',\n                    backgroundColor: this.props.color\n                }}/>\n        );\n    }\n}\n\n// Assign your `mouseDown`, `mouseUp` and `mouseLeave` to the returned functions.\nexport function handleMyMouseEvents(This) {\n    return [\n        /**@param e {React.SyntheticEvent} */\n        (function(e) {\n            // Reset the ripple effect if it's not off\n            if(this.state.ripple.state!='off'){\n                this.setState({\n                    ripple: { state: 'off' }\n                });\n                setTimeout(() => {\n                    this.setState({\n                        ripple: {\n                            state: 'pressed',\n                            X: e.nativeEvent.offsetX,\n                            Y: e.nativeEvent.offsetY,\n                            width: e.target.clientWidth,\n                            height: e.target.clientHeight\n                        }\n                    });\n                }, 10);\n                return;\n            }\n            this.setState({\n                ripple: {\n                    state: 'pressed',\n                    X: e.nativeEvent.offsetX,\n                    Y: e.nativeEvent.offsetY,\n                    width: e.target.clientWidth,\n                    height: e.target.clientHeight\n                }\n            });\n        }).bind(This),\n\n        (function(e) {\n            this.setState({\n                ripple: { \n                    state: 'released',\n                    X: e.nativeEvent.offsetX,\n                    Y: e.nativeEvent.offsetY,\n                    width: e.target.clientWidth,\n                    height: e.target.clientHeight \n                }\n            });\n        }).bind(This),\n\n        (function(e) {\n            if(this.state.ripple.state=='pressed') {\n                this.mouseUp(e);\n            }\n        }).bind(This)\n    ];\n}\n// Assign your `mouseDown`, `mouseUp` and `mouseLeave` to the returned functions.\nexport function handleMyMouseEventsFunction([ripple, setRipple]) {\n    function down(e) {\n        // Reset the ripple effect if it's not off\n        if(ripple.state!='off'){\n            setRipple({ state: 'off' });\n            setTimeout(() => {\n                setRipple ({\n                    state: 'pressed',\n                    X: e.nativeEvent.offsetX,\n                    Y: e.nativeEvent.offsetY,\n                    width: e.target.clientWidth,\n                    height: e.target.clientHeight\n                });\n            }, 10);\n            return;\n        }\n        setRipple ({\n            state: 'pressed',\n            X: e.nativeEvent.offsetX,\n            Y: e.nativeEvent.offsetY,\n            width: e.target.clientWidth,\n            height: e.target.clientHeight\n        });\n    }\n\n    function up(e) {\n        setRipple ({\n            state: 'released',\n            X: e.nativeEvent.offsetX,\n            Y: e.nativeEvent.offsetY,\n            width: e.target.clientWidth,\n            height: e.target.clientHeight \n        });\n    }\n\n    function leave(e) {\n        if(ripple.state=='pressed') {\n            up(e);\n        }\n    }\n    \n    return [down, up, leave];\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport RippleEffect, {handleMyMouseEventsFunction} from '../../ui/elements/ripple-effect';\nimport './icon-button.scss';\n\nexport default function IconButton({icon, ...rest}) {\n    const ripple= React.useState({state: 'off'});\n    const [onMouseDown, onMouseUp, onMouseLeave]= handleMyMouseEventsFunction(ripple);\n    return (\n        <button className=\"icon-button\" {...rest} {...{onMouseDown, onMouseUp, onMouseLeave}}>\n            <span dangerouslySetInnerHTML={{__html: icon}} />\n            <RippleEffect {...ripple[0]} color=\"var(--theme-color-windowBgOver)\" small={true}/>\n        </button>\n    );\n}\nIconButton.propTypes = {\n    icon: PropTypes.string.isRequired\n};\n","// All icons are from Telegram Desktop, converted to SVG using https://pngtosvg.com/\n\nimport raw from 'raw.macro';\n\nexport const archive_userpic = raw('./archive_userpic.svg');\nexport const dialogs_bot = raw('./dialogs_bot.svg');\nexport const dialogs_channel = raw('./dialogs_channel.svg');\nexport const dialogs_chat = raw('./dialogs_chat.svg');\nexport const dialogs_pinned = raw('./dialogs_pinned.svg');\nexport const dialogs_verified_star = raw('./dialogs_verified_star.svg');\nexport const dialogs_verified_check = raw('./dialogs_verified_check.svg');\n//export const dialogs_search_cancel = raw('./dialogs_search_cancel.svg');\nexport const dialogs_sending = raw('./dialogs_sending.svg');\nexport const dialogs_sent = raw('./dialogs_sent.svg');\nexport const dialogs_received = raw('./dialogs_received.svg');\nexport const dialogs_menu = raw('./dialogs_menu.svg');\nexport const info_close = raw('./info_close.svg');\nexport const replies_userpic = raw('./replies_userpic.svg');\nexport const saved_messages = raw('./saved_messages.svg');\nexport const filters_edit = raw('./chat_filters/edit.svg');\nexport const info_back = raw('./info_back.svg');\nexport const menu_settings = raw('./menu_settings.svg');\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport IconButton from '../../../../ui/elements/icon-button';\nimport RippleEffect, {handleMyMouseEvents} from '../../../../ui/elements/ripple-effect';\nimport { dialogs_menu } from '../../../../ui/icon/icons';\nimport './menu-button.scss';\n\nvar HamburgerMenuButton= {};\n\n/**\n * Renders the button which opens the hamburger menu\n */\nHamburgerMenuButton.WithFolders= class WithFolders extends React.PureComponent {\n    static propTypes= {\n        onClick: PropTypes.func,\n    };\n    state= {\n        ripple: {\n            state: 'off'\n        }\n    }\n    constructor() {\n        super();\n        [this.mouseDown, this.mouseUp, this.mouseLeave]= handleMyMouseEvents(this);\n    }\n    render() {\n        return (\n            <button id=\"hamburger-menu-button\" className=\"uses-folders\"\n                onMouseDown={this.mouseDown}\n                onMouseUp={this.mouseUp}\n                onMouseLeave={this.mouseLeave}\n                onClick={this.props.onClick}>\n                <div id=\"bars\"><span></span><span></span><span></span></div>\n                <RippleEffect {...this.state.ripple} color=\"var(--theme-color-sideBarBgRipple)\"/>\n            </button>\n        );\n    }\n};\n\n/**\n * Renders the button which opens the hamburger menu\n */\nHamburgerMenuButton.WithoutFolders= function WithoutFolders (props) {\n    return (\n        <IconButton \n            icon={dialogs_menu}\n            id=\"hamburger-menu-button\"\n            className=\"icon-button no-folders\"\n            {...props}/>\n    );\n};\n\nexport default HamburgerMenuButton;","import { createStore } from 'redux';\nimport TdLib from '../TdWeb/tdlib';\n\nconst chatStore= createStore(reducer, \n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n    \nfunction reducer(state= {\n    currentChatList: {'@type': 'chatListMain'},\n    archiveState: 'closed',\n    archiveButtonState: localStorage.getItem('dibgram-archived-chats-button-mode'),\n    chats: [],\n    filters: [],\n    unread: {\n        main: {},\n        archive: {},\n        filters: {}\n    }\n}, action) {\n    switch (action.type) {\n    case 'SET_CURRENT_CHAT_LIST':\n        return {\n            ...state,\n            currentChatList: action.chatList\n        };\n    case 'SET_ARCHIVE_STATE':\n        return {\n            ...state,\n            archiveState: action.archiveState\n        };\n    case 'UPDATE_UNREAD_MESSAGE_COUNT':\n        if(action.chat_list['@type'] === 'chatListMain') {\n            return {\n                ...state,\n                unread: {\n                    ...state.unread,\n                    main: {\n                        ...state.unread.main,\n                        unread_messages_count: action.unread_count,\n                        unread_unmuted_messages_count: action.unread_unmuted_count\n                    }\n                }\n            };\n        } else if(action.chat_list['@type'] === 'chatListArchive') {\n            return {\n                ...state,\n                unread: {\n                    ...state.unread,\n                    archive: {\n                        ...state.unread.archive,\n                        unread_messages_count: action.unread_count,\n                        unread_unmuted_messages_count: action.unread_unmuted_count\n                    }\n                }\n            };\n        } else if(action.chat_list['@type'] === 'chatListFilter') {\n            return {\n                ...state,\n                unread: {\n                    ...state.unread,\n                    filters: {\n                        ...state.unread.filters,\n                        [action.chat_list.chat_filter_id]: {\n                            ...state.unread.filters[action.chat_list.chat_filter_id],\n                            unread_messages_count: action.unread_count,\n                            unread_unmuted_messages_count: action.unread_unmuted_count\n                        }\n                    }\n                }\n            };\n        }\n        return state;\n    case 'UPDATE_UNREAD_CHAT_COUNT':\n        if(action.chat_list['@type'] === 'chatListMain') {\n            return {\n                ...state,\n                unread: {\n                    ...state.unread,\n                    main: {\n                        ...state.unread.main,\n                        total_chats_count: action.total_count,\n                        unread_chats_count: action.unread_count,\n                        unread_unmuted_chats_count: action.unread_unmuted_count,\n                        marked_as_unread_chats_count: action.marked_as_unread_count,\n                        marked_as_unread_unmuted_chats_count: action.marked_as_unread_unmuted_count\n                    }\n                }\n            };\n        } else if(action.chat_list['@type'] === 'chatListArchive') {\n            return {\n                ...state,\n                unread: {\n                    ...state.unread,\n                    archive: {\n                        ...state.unread.archive,\n                        total_chats_count: action.total_count,\n                        unread_chats_count: action.unread_count,\n                        unread_unmuted_chats_count: action.unread_unmuted_count,\n                        marked_as_unread_chats_count: action.marked_as_unread_count,\n                        marked_as_unread_unmuted_chats_count: action.marked_as_unread_unmuted_count\n                    }\n                }\n            };\n        } else if(action.chat_list['@type'] === 'chatListFilter') {\n            return {\n                ...state,\n                unread: {\n                    ...state.unread,\n                    filters: {\n                        ...state.unread.filters,\n                        [action.chat_list.chat_filter_id]: {\n                            ...state.unread.filters[action.chat_list.chat_filter_id],\n                            total_chats_count: action.total_count,\n                            unread_chats_count: action.unread_count,\n                            unread_unmuted_chats_count: action.unread_unmuted_count,\n                            marked_as_unread_chats_count: action.marked_as_unread_count,\n                            marked_as_unread_unmuted_chats_count: action.marked_as_unread_unmuted_count\n                        }\n                    }\n                }\n            };\n        }\n        return state;\n\n    case 'SET_ARCHIVE_BUTTON_STATE':\n        return {\n            ...state,\n            archiveButtonState: action.archiveButtonState\n        };\n    case 'ADD_CHAT':\n        return {\n            ...state,\n            chats: [\n                ...state.chats,\n                action.chat\n            ]\n        };\n    case 'UPDATE_CHAT_POSITION': // Replace the position property of a chat\n        return {\n            ...state,\n            chats: state.chats.map((chat) => {\n                if (chat.id === action.chat_id) {\n                    let changed=false;\n                    let newChat = {\n                        ...chat,\n                        positions: chat.positions.map((position) => {\n                            if (compareChatList(position.list, action.position.list)) {\n                                changed=true;\n                                return action.position;\n                            }\n                            return position;\n                        })\n                    };\n                    if(!changed) {\n                        return {\n                            ...chat,\n                            positions: [\n                                ...chat.positions,\n                                action.position\n                            ]\n                        };\n                    }\n                    return newChat;\n                }\n                return chat;\n            })\n        };\n    case 'REMOVE_CHAT':\n        return {\n            ...state,\n            chats: state.chats.filter(chat => chat.id !== action.chat.id)\n        };\n    case 'REPLACE_CHAT_FILTERS':\n        return {\n            ...state,\n            filters: action.payload\n        };\n    case 'UPDATE_CHAT_PROPERTY':\n        return {\n            ...state,\n            chats: state.chats.map((chat) => {\n                if (chat.id === action.chat_id) {\n                    return {\n                        ...chat,\n                        [action.property]: action.value\n                    };\n                }\n                return chat;\n            })\n        };\n    case 'UPDATE_CHAT_PHOTO':\n        return {\n            ...state,\n            chats: state.chats.map((chat) => {\n                if (chat.id === action.chat_id) {\n                    return {\n                        ...chat,\n                        photo: action.photo\n                    };\n                }\n                return chat;\n            })\n        };\n    case 'UPDATE_CHAT_TITLE':\n        return {\n            ...state,\n            chats: state.chats.map((chat) => {\n                if (chat.id === action.chat_id) {\n                    return {\n                        ...chat,\n                        title: action.title\n                    };\n                }\n                return chat;\n            })\n        };\n    case 'UPDATE_CHAT_LAST_MESSAGE':\n        return {\n            ...state,\n            chats: state.chats.map((chat) => {\n                if (chat.id === action.chat_id) {\n                    return {\n                        ...chat,\n                        last_message: action.last_message\n                    };\n                }\n                return chat;\n            })\n        };\n    default:\n        return state;\n    }\n}\n\nTdLib.registerUpdateHandler('updateUnreadChatCount', (update) => {\n    chatStore.dispatch({\n        type: 'UPDATE_UNREAD_CHAT_COUNT',\n        ...update\n    });\n});\n\nTdLib.registerUpdateHandler('updateUnreadMessageCount', (update) => {\n    chatStore.dispatch({\n        type: 'UPDATE_UNREAD_MESSAGE_COUNT',\n        ...update\n    });\n});\n\nTdLib.registerUpdateHandler('updateNewChat', update => {\n    chatStore.dispatch({\n        type: 'ADD_CHAT',\n        chat: update.chat\n    });\n});\n\nTdLib.registerUpdateHandler('updateChatActionBar', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'action_bar',\n        chat_id: update.chat_id,\n        value: update.action_bar\n    });\n});\n\nTdLib.registerUpdateHandler('updateChatDefaultDisableNotification', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'default_disable_notification',\n        chat_id: update.chat_id,\n        value: update.default_disable_notification\n    });\n});\n\nTdLib.registerUpdateHandler('updateChatDraftMessage', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'draft_message',\n        chat_id: update.chat_id,\n        value: update.draft_message\n    });\n    for (let position of update.positions) {\n        chatStore.dispatch({\n            type: 'UPDATE_CHAT_POSITION',\n            chat_id: update.chat_id,\n            position: position\n        });\n    }\n});\n\nTdLib.registerUpdateHandler('updateChatFilters', update=> {\n    if(update.chat_filters) {\n        chatStore.dispatch({\n            type: 'REPLACE_CHAT_FILTERS',\n            payload: update.chat_filters\n        });\n    }\n});\n\nTdLib.registerUpdateHandler('updateChatHasScheduledMessages', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'has_scheduled_messages',\n        chat_id: update.chat_id,\n        value: update.has_scheduled_messages\n    });\n});\n\nTdLib.registerUpdateHandler('updateChatIsBlocked', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'is_blocked',\n        chat_id: update.chat_id,\n        value: update.is_blocked\n    });\n});\n\nTdLib.registerUpdateHandler('updateChatIsMarkedAsUnread', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'is_marked_as_unread',\n        chat_id: update.chat_id,\n        value: update.is_marked_as_unread\n    });\n});\n\nTdLib.registerUpdateHandler('updateChatLastMessage', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'last_message',\n        chat_id: update.chat_id,\n        value: update.last_message\n    });\n    for (let position of update.positions) {\n        chatStore.dispatch({\n            type: 'UPDATE_CHAT_POSITION',\n            chat_id: update.chat_id,\n            position: position\n        });\n    }\n});\n\nTdLib.registerUpdateHandler('updateChatNotificationSettings', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'notification_settings',\n        chat_id: update.chat_id,\n        value: update.notification_settings\n    });\n});\n\nTdLib.registerUpdateHandler('updateChatOnlineMemberCount', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'online_member_count',\n        chat_id: update.chat_id,\n        value: update.online_member_count\n    });\n});\n\nTdLib.registerUpdateHandler('updateChatPermissions', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'permissions',\n        chat_id: update.chat_id,\n        value: update.permissions\n    });\n});\n\nTdLib.registerUpdateHandler('updateChatPhoto', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'photo',\n        chat_id: update.chat_id,\n        value: update.photo\n    });\n});\n\nTdLib.registerUpdateHandler('updateChatPosition', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_POSITION',\n        chat_id: update.chat_id,\n        position: update.position\n    });\n});\n\nTdLib.registerUpdateHandler('updateChatReadInbox', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'unread_count',\n        chat_id: update.chat_id,\n        value: update.unread_count\n    });\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'last_read_inbox_message_id',\n        chat_id: update.chat_id,\n        value: update.last_read_inbox_message_id\n    });\n});\n\nTdLib.registerUpdateHandler('updateChatReadOutbox', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'last_read_outbox_message_id',\n        chat_id: update.chat_id,\n        value: update.last_read_outbox_message_id\n    });\n});\n\nTdLib.registerUpdateHandler('updateChatReplyMarkup', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'reply_markup_message_id',\n        chat_id: update.chat_id,\n        value: update.reply_markup_message_id\n    });\n});\n\nTdLib.registerUpdateHandler('updateChatTitle', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'title',\n        chat_id: update.chat_id,\n        value: update.title\n    });\n});\n\nTdLib.registerUpdateHandler('updateChatUnreadMentionCount', update=> {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'unread_mention_count',\n        chat_id: update.chat_id,\n        value: update.unread_mention_count\n    });\n});\n\nTdLib.registerUpdateHandler('updateMessageMentionRead', update => {\n    chatStore.dispatch({\n        type: 'UPDATE_CHAT_PROPERTY',\n        property: 'unread_mention_count',\n        chat_id: update.chat_id,\n        value: update.unread_mention_count\n    });\n});\n\nexport default chatStore;\n\nexport function compareChatList(list1, list2) {\n    if (list1['@type'] != list2['@type']) {\n        return false;\n    }\n    if (list1['@type'] == 'chatListFilter') {\n        return list1.chat_filter_id == list2.chat_filter_id;\n    }\n    return true;\n}\n\n/**\n * Gets a chat from a chat ID. Has caching.\n */\nexport function getChat(id) {\n    let res;\n    for(let chat of chatStore.getState()?.chats) {\n        if(chat.id==id) res = Promise.resolve(chat);\n    }\n    if(!res){\n        res = TdLib.sendQuery({\n            '@type': 'getChat',\n            'chat_id': id\n        });\n    }\n    return res;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Scrollbars } from 'react-custom-scrollbars';\nimport './scrollbar.scss';\n\nexport default function ScrollView(props) {\n    const [mouseEntered, setMouseEntered] = React.useState(false);\n    const [timeoutId, setTimeoutId] = React.useState(null);\n    const {scrollBarWidth, ...propsRest} = props;\n    return (\n        <Scrollbars\n            className=\"scrollbar\"\n            style= {{ '--bar-width': (scrollBarWidth || 4)+'px' }}\n            data-mouse-entered={mouseEntered}\n            renderTrackHorizontal={props => <div {...props} className=\"track-horizontal\" />}\n            renderTrackVertical={props => <div {...props} className=\"track-vertical\" />}\n            renderThumbHorizontal={props => <div {...props} className=\"thumb-horizontal\" />}\n            renderThumbVertical={props => <div {...props} className=\"thumb-vertical\" />}\n            onMouseEnter={() => {\n                setMouseEntered(true);\n                setTimeoutId(setTimeout(() => {\n                    setMouseEntered(false);\n                }, 1000));\n            }}\n            onMouseLeave={() => {\n                setMouseEntered(false);\n                clearTimeout(timeoutId);\n            }}\n            autoHide\n            autoHideTimeout={1000}\n            hideTracksWhenNotNeeded={true}\n            {...propsRest}\n        />\n    );\n}\nScrollView.propTypes = {\n    scrollBarWidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport filters from '../../../ui/icon/chat_filters/chat-filters';\nimport RippleEffect, {handleMyMouseEventsFunction} from '../../../ui/elements/ripple-effect';\nimport HamburgerMenuButton from './hamburger-menu/menu-button';\nimport { compareChatList } from '../../chat-store';\nimport TdLib from '../../../TdWeb/tdlib';\nimport ScrollView from '../../../ui/scroll/scrollbar';\nimport './chat-folders.scss';\n\n/**\n * Renders a chat folder button\n */\nexport function ChatFolder({folder, active, onClick, unread}) {\n    const ripple= React.useState({state: 'off'});\n    const [mouseDown, mouseUp, mouseLeave]= handleMyMouseEventsFunction(ripple);\n    const [iconName, setIconName]= React.useState(folder.icon_name);\n\n    React.useEffect(()=> {\n        TdLib.sendQuery({\n            '@type': 'getChats',\n            'chat_list': {\n                '@type': 'chatListFilter',\n                'chat_filter_id': folder.id,\n            },\n            'offset_order': '9223372036854775807',\n            'offset_chat_id': 0,\n            'limit': 50\n        });\n    }, []);\n\n    React.useEffect(()=> {\n        if(!folder.icon_name) {\n            TdLib.sendQuery({\n                '@type': 'getChatFilter',\n                'chat_filter_id': folder.id\n            }).then(folder=> {\n                TdLib.sendQuery({\n                    '@type': 'getChatFilterDefaultIconName',\n                    'filter': folder\n                }).then(result=> setIconName(result.text));\n            });\n        }\n    }, [folder]);\n\n    var icon= (filters[iconName] || filters['Custom']);\n    icon= icon[active+0] || icon[0];\n    return (\n        <div className={active ? 'item active' : 'item'}>\n            <RippleEffect {...ripple[0]} color=\"var(--theme-color-sideBarBgRipple)\"/>\n            <button\n                onMouseDown={mouseDown}\n                onMouseUp={mouseUp}\n                onMouseLeave={mouseLeave}\n                onClick={onClick}>\n\n                <div className=\"icon\" dangerouslySetInnerHTML={{__html: icon}}></div>\n                <div className=\"title\">{folder.title}</div>\n                {unread?.unread_chats_count? (\n                    <div className=\"unread-badge\" \n                        data-muted={(unread?.unread_unmuted_chats_count==0) ? 'true' : 'false'}>\n                        <span>{unread?.unread_chats_count}</span>\n                    </div>\n                ): null}\n            </button>\n        </div>\n    );\n}\n\nChatFolder.propTypes= {\n    /** The folder object provided by TdLib */\n    folder: PropTypes.object.isRequired,\n    /** A boolean indicating if the folder is currently selected */\n    active: PropTypes.bool.isRequired,\n    /** A function to call when the folder is clicked */\n    onClick: PropTypes.func.isRequired,\n    /** An object containing unread messages and chats count, from `chatStore` */\n    unread: PropTypes.object\n};\n\n/**\n * Renders the chat folders list\n */\nfunction ChatFolderList({folders, currentFolder, unread, dispatch, onHamburgerMenuOpened}) {\n    if(!folders || folders.length==0) return null;\n    return (\n        <div id=\"chat-folders-list\">\n            <HamburgerMenuButton.WithFolders onClick={onHamburgerMenuOpened}/>\n            <ScrollView scrollBarWidth=\"4\" className=\"list scrollbar full-size\">\n                <ChatFolder \n                    active={compareChatList(currentFolder, {'@type': 'chatListMain'})} \n                    folder={{ title: 'All chats', icon_name: 'All' }}\n                    unread={unread.main}\n                    onClick={()=> dispatch({\n                        type: 'SET_CURRENT_CHAT_LIST',\n                        chatList: { '@type': 'chatListMain' }\n                    })}/>\n                \n                {folders.map(folder=> (\n                    <ChatFolder folder={folder} key={folder.id}\n                        unread={unread.filters[folder.id]}\n                        active={compareChatList(currentFolder, \n                            {'@type': 'chatListFilter', 'chat_filter_id': folder.id})}\n                        onClick={()=> dispatch({\n                            type: 'SET_CURRENT_CHAT_LIST',\n                            chatList: { \n                                '@type': 'chatListFilter',\n                                chat_filter_id: folder.id\n                            }\n                        })}/>\n                ))}\n            </ScrollView>\n        </div>\n    );\n}\nChatFolderList.propTypes={\n    folders: PropTypes.arrayOf(PropTypes.object),\n    currentFolder: PropTypes.object,\n    unread: PropTypes.object,\n    dispatch: PropTypes.func,\n    onHamburgerMenuOpened: PropTypes.func\n};\nexport default connect(state=>({\n    folders:state.filters, \n    currentFolder: state.currentChatList,\n    unread: state.unread\n}))(ChatFolderList);","import { ProgressRing } from 'progress-ring';\nimport 'progress-ring/src/styles.css';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * Renders a spinner which in addition to spinning, also changes size.\n */\nexport default class LoadingSpinner extends React.Component {\n    static props= {\n        size: PropTypes.number.isRequired,\n        lineWidth: PropTypes.number.isRequired,\n        progressColor: PropTypes.string.isRequired\n    }\n    state= {\n        percentage: 10\n    }\n    render () {\n        return (\n            <div className=\"loading-spinner\">\n                <ProgressRing\n                    percent={this.state.percentage}\n                    caps='round'\n                    trackColor=\"transparent\"\n                    spin=\"true\"\n                    {...this.props}\n                    transitionDuration=\"2000\"/>\n            </div>\n        );\n    }\n\n    componentDidMount () {\n        this.intervalNum= setInterval(() => {\n            this.setState({\n                percentage: (90 - this.state.percentage)\n            });\n        }, 2000);\n    }\n\n    componentWillUnmount () {\n        clearInterval(this.intervalNum);\n    }\n}","import React from 'react';\nimport LoadingSpinner from '../elements/loading-spinner';\nimport { connect } from 'react-redux';\n\n/**\n * Renders the connecting spinner at the bottom left corner, which is hidden when connected\n */\nexport default connect(state=> ({state: state})) (function ConnectionState({state}) {\n    return (\n        <div className={'connectionState'+(([\n            'connectionStateConnecting',\n            'connectionStateConnectingToProxy',\n            'connectionStateWaitingForNetwork'\n        ].includes(state))? '' : ' connected')}>\n            <LoadingSpinner\n                progressColor=\"var(--theme-color-menuIconFg)\"\n                size=\"20\"\n                lineWidth=\"2\"/>\n        </div>\n    );\n});\n","import TdLib from './tdlib';\n\nexport function downloadFile (file_id, priority) {\n    let onReject;\n    TdLib.sendQuery({\n        '@type': 'downloadFile',\n        'file_id': file_id,\n        'priority': priority,\n        'offset': 0,\n        'limit': 0,\n        'synchronous': false\n    }).catch(onReject);\n\n    return new Promise((resolve, reject) => {\n        downloadCallbacks[file_id]=result=> {\n            resolve(result);\n            delete downloadCallbacks[file_id];\n        };\n        onReject=reject;\n    });\n}\nvar downloadCallbacks = {};\n\nTdLib.registerUpdateHandler('updateFile', function (update) {\n    if(update.file.local.is_downloading_completed){\n        downloadCallbacks[update.file.id]?.(update.file);\n    }\n});\n\n// Downloads the file if it is not already downloaded, then reads the file and returns the file content as a blob.\nexport function getFileContent(file, priority) {\n    if(file.local.is_downloading_completed){\n        return TdLib.sendQuery({\n            '@type': 'readFilePart',\n            'file_id': file.id,\n            'offset': 0,\n            'count': 0\n        });\n    } else if(file.local.is_downloading_active){\n        return new Promise((resolve, reject) => {\n            const callback = downloadCallbacks[file.id];\n            downloadCallbacks[file.id] = (result) => {\n                callback(result);\n                TdLib.sendQuery({\n                    '@type': 'readFilePart',\n                    'file_id': file.id,\n                    'offset': 0,\n                    'count': 0\n                }).then(resolve).catch(reject);\n            };\n        });\n    } else {\n        return new Promise((resolve, reject) => {\n            downloadFile(file.id, priority).then(()=> {\n                TdLib.sendQuery({\n                    '@type': 'readFilePart',\n                    'file_id': file.id,\n                    'offset': 0,\n                    'count': 0\n                }).then(resolve).catch(reject);\n            }).catch(reject);\n        });\n    }\n}\n\nexport function blobToUrl (blob) {\n    return (window.URL || window.webkitURL).createObjectURL(blob);\n}\n","import TdLib from './tdlib';\n\n/**\n * Contains all options received from TdLib `updateOption`s\n */\nvar options={};\n\nTdLib.registerUpdateHandler('updateOption', function (update) {\n    options[update.name]=update.value.value;\n});\n\nexport default options;\n","export default __webpack_public_path__ + \"static/media/TgLogo.d1ff1195.png\";","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { blobToUrl, getFileContent } from '../../TdWeb/file';\nimport options from '../../TdWeb/options';\nimport './profile-photo.scss';\nimport tgLogo from '../../ui/img/TgLogo.png';\nimport { saved_messages, replies_userpic } from '../icon/icons';\n\nexport function profileNameToInitials(name) {\n    const words=name.replace(/[\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007F]/g,'').toUpperCase().split(' ');\n    if(words[0].length==0){\n        return '';\n    } else if(words.length===1) {\n        return words[0][0];\n    } else {\n        return words[0][0] + words[words.length-1][0];\n    }\n}\n\nexport default function ProfilePhoto (props) {\n    const [photo, setPhoto] = React.useState(null);\n    const [photoObj, setPhotoObj] = React.useState(null);\n    const isServiceMessages= props.id==options['telegram_service_notifications_chat_id'];\n    const isSavedMessages= props.id==options['my_id'];\n    const isReplies= props.id==options['replies_bot_chat_id'];\n    \n    React.useEffect(() => {\n        var mounted=true;\n        if(props.photo){\n            if(photoObj!=props.photo){\n                getFileContent(props.photo, 8).then(file=> {\n                    if(!mounted) return;\n                    setPhoto(blobToUrl(file.data));\n                    setPhotoObj(props.photo);\n                });\n            }\n        } else {\n            if(photo && photoObj){\n                setPhoto(null);\n                setPhotoObj(null);\n            }\n        }\n        return ()=> mounted=false;\n    }, [props.photo]);\n\n    var customIcon; \n    if(isSavedMessages && (!props?.disableSavedMessages)){\n        customIcon= [0, saved_messages];\n    }\n    if(isReplies){\n        customIcon= [0, replies_userpic];\n    }\n    if((!props.photo) && isServiceMessages) {\n        customIcon = [1, tgLogo];\n    }\n    return (\n        <div className=\"profile-photo\">\n            <Initials id={props.id} name={props.name}/>\n            {\n                customIcon? (\n                    customIcon[0]?\n                        <React.Fragment>\n                            <Initials id={props.id} name={props.name}/>\n                            <img src={customIcon[1]}/>\n                        </React.Fragment>\n                        :\n                        <div className=\"svg\" dangerouslySetInnerHTML={{__html: customIcon[1]}}/>\n                ) : (\n                    (props.photo && photo) && <img src={photo}/> \n                )\n            }\n        </div>\n    );\n}\nProfilePhoto.propTypes = {\n    name: PropTypes.string.isRequired,\n    id: PropTypes.number.isRequired,\n    photo: PropTypes.object,\n    disableSavedMessages: PropTypes.bool\n};\n\nfunction Initials({id, name}) {\n    return (\n        <span className={'initials color_'+ ((Math.abs(id || 0) % 7) + 1)}>\n            {profileNameToInitials(name)}\n        </span>\n    );\n}\nInitials.propTypes = {\n    name: PropTypes.string.isRequired,\n    id: PropTypes.number.isRequired\n};\n\nexport function getChatTypeId(chat) {\n    switch (chat?.type?.['@type']) {\n    case 'chatTypeSupergroup': {\n        return chat?.type?.supergroup_id;\n    }\n    case 'chatTypeBasicGroup': {\n        return chat?.type?.basic_group_id;\n    }\n    case 'chatTypePrivate':\n    case 'chatTypeSecret': {\n        return chat?.type?.user_id;\n    }\n    }\n    return null;\n}\n","import { createStore } from 'redux';\nimport TdLib from '../TdWeb/tdlib';\n\nconst usersStore = createStore((state = {}, action) => {\n    switch (action.type) {\n    case 'UPD_USER':\n        return {\n            ...state,\n            [action.user.id]: action.user\n        };\n    default:\n        return state;\n    }\n}, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n\nTdLib.registerUpdateHandler('updateUser', (update) => {\n    usersStore.dispatch({\n        type: 'UPD_USER',\n        user: update.user\n    });\n});\n\nexport default usersStore;\n","import currencies from './currencies';\n\nexport default function currencyAmountToString (currency, total_amount) {\n    const currencyObject= currencies[currency];\n    var formatter = new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: currency,\n        \n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2,\n    });\n    return formatter.format(total_amount / 10**currencyObject.exp);\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport TdLib from '../../TdWeb/tdlib';\nimport currencyAmountToString from '../payments/currency-tostring';\n\n/**\n * Gets a textual representation of the message without a thumbnail.\n * Usage examples: \n * - Last message in chat list\n * - Pinned message\n * - Replies\n * - Search results\n * @returns A span element containing a textual representation of the message. Contains span.part-1 and span.part-2\n */\n\nconst MessageSummaryWithoutIcon= connect(state=> ({users: state}))(\n    function MessageSummaryWithoutIcon({message, className, users, chat}) {\n        if(!message) return null;\n        switch(message.content['@type']) {\n        \n        case 'messageAnimation':\n            return (\n                <MayHaveCaption\n                    type=\"GIF\" \n                    caption={message.content.caption?.text} \n                    className={className} \n                    message={message} \n                    chat={chat}\n                    users={users}/>\n            );\n        \n        case 'messageAudio':\n            var title= message.content.audio.title || message.content.audio.file_name;\n            if(message.content.audio.performer)\n                title= message.content.audio.performer+ ' ­­– ' + title;\n            return (\n                <MayHaveCaption \n                    type={title} \n                    caption={message.content.caption?.text} \n                    className={className} \n                    message={message} \n                    chat={chat}\n                    users={users}/>\n            );\n\n        case 'messageBasicGroupChatCreate':\n            return (\n                <span className={className}>\n                    <span className=\"part-1\"><SenderFullName chat={chat} message={message} users={users}/> created the group «{message.content.title}»</span>\n                </span>\n            );\n\n        case 'messageCall':\n            var text='';\n            if(message.is_outgoing) {\n                switch(message.content.discard_reason?.['@type']) {\n                case 'callDiscardReasonMissed':\n                    text= 'Cancelled call';\n                    break;\n                default:\n                    text= 'Outgoing call';\n                }\n            } else {\n                switch(message.content.discard_reason?.['@type']) {\n                case 'callDiscardReasonDeclined':\n                    text= 'Declined call';\n                    break;\n                case 'callDiscardReasonMissed':\n                    text= 'Missed call';\n                    break;\n                default: \n                    text= 'Incoming call';\n                }\n            } \n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">{text}</span>\n                </span>\n            );\n\n        case 'messageChatAddMembers':\n            var members= message.content.member_user_ids.map(id=> \n                users[id].last_name ? (users[id].first_name+' '+ users[id].last_name) : users[id].first_name);\n            if(members.length>1){\n                members= members.slice(0, members.length - 1) .join(', ') + ' and ' + members[members.length - 1];\n            } else {\n                members= members[0];\n            }\n            if(message.content.member_user_ids[0] == message.sender?.user_id) {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\"><SenderFullName message={message} chat={chat} users={users}/> joined the group</span>\n                    </span>\n                );\n            }\n            return (\n                <span className={className}>\n                    <span className=\"part-1\"><SenderFullName message={message} chat={chat} users={users}/> added {members}</span>\n                </span>\n            );\n\n        case 'messageChatChangePhoto':\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">Photo</span>\n                </span>\n            );\n\n        case 'messageChatChangeTitle': // I can't believe copilot can fill these lines without having access to API docs\n            if(message.is_channel_post) {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\">Channel name was changed to «{message.content.title}»</span>\n                    </span>\n                );\n            } else {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\"><SenderFullName message={message} chat={chat} users={users}/>\n                        &nbsp;changed group name to «{message.content.title}»</span>\n                    </span>\n                );\n            }\n\n        case 'messageChatDeleteMember':\n            var deletedMember= users[message.content.user_id];\n            return (\n                <span className={className}>\n                    <span className=\"part-1\"><SenderFullName message={message} chat={chat} users={users}/>\n                    &nbsp;removed {deletedMember.first_name+' '+ deletedMember.last_name}</span>\n                </span>\n            );\n\n        case 'messageChatDeletePhoto':\n            if(message.is_channel_post) {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\">Channel photo removed</span>\n                    </span>\n                );\n            } else {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\"><SenderFullName message={message} chat={chat} users={users}/>\n                        &nbsp;removed group photo</span>\n                    </span>\n                );\n            }\n\n        case 'messageChatJoinByLink':\n            return (\n                <span className={className}>\n                    <span className=\"part-1\"><SenderFullName message={message} chat={chat} users={users}/>\n                    &nbsp;joined the group via invite link</span>\n                </span>\n            );\n\n        case 'messageChatSetTtl':\n            // seconds to day, week and month\n            var timeConversionTable= {86400: 'day', 604800: 'week', 2678400: 'month'};\n            return (\n                <span className={className}>\n                    <span className=\"part-1\"><SenderFullName message={message} chat={chat} users={users} includeYou={true}/> set messages to auto-delete in 1 {timeConversionTable[message.content.ttl]}</span>\n                </span>\n            );\n\n        case 'messageChatUpgradeFrom':\n        case 'messageChatUpgradeTo':\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">Group was upgraded to a super-group</span>\n                </span>\n            );\n\n        case 'messageContact':\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">Contact</span>\n                </span>\n            );\n\n        case 'messageContactRegistered':\n            return (\n                <span className={className}>\n                    <span className=\"part-1\"><SenderFullName message={message} chat={chat} users={users}/>\n                    &nbsp;joined Telegram</span>\n                </span>\n            );\n\n        case 'messageCustomServiceAction':\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{message.content.text}</span>\n                </span>\n            );\n\n        case 'messageDice':\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">{message.content.emoji}</span>\n                </span>\n            );\n\n        case 'messageDocument':\n            return (\n                <MayHaveCaption \n                    type={message.content.document.file_name} \n                    caption={message.content.caption?.text} \n                    className={className} \n                    message={message} \n                    chat={chat}\n                    users={users}/>\n            );\n        \n        // case 'messageExpiredPhoto':\n        // case 'messageExpiredVideo':\n        case 'messageGame':\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">🎮 {message.content.game.title}</span>\n                </span>\n            );\n\n        case 'messageGameScore':\n            var noGameTitleFallback= (\n                <span className={className}><span className=\"part-1\">\n                    <SenderFullName message={message} chat={chat} users={users} includeYou={true}/> scored {message.content.score}\n                </span></span>\n            );\n\n            // Get game message\n            var GameScoreWithTitle= React.lazy(()=>new Promise(resolve=> {\n                TdLib.sendQuery({\n                    '@type': 'getMessage',\n                    chat_id: chat.id,\n                    message_id: message.content.game_message_id\n                }).then(\n                    result=> { \n                        //eslint-disable-next-line react/display-name\n                        resolve({ default: ()=> (\n                            <span className={className}><span className=\"part-1\">\n                                <SenderFullName message={message} chat={chat} users={users} includeYou={true}/> scored {message.content.score} in {result.content.game.title}\n                            </span></span>\n                        )});\n                    },\n                    ()=> { \n                        //eslint-disable-next-line react/display-name\n                        resolve({ default: ()=> noGameTitleFallback});\n                    }\n                );\n            }));\n\n            return (\n                <React.Suspense fallback={noGameTitleFallback}>\n                    <GameScoreWithTitle/>\n                </React.Suspense>\n            );\n\n        case 'messageInvoice':\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">{message.content.title}</span>\n                </span>\n            );\n\n        case 'messageLocation':\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">{message.content.title}</span>\n                </span>\n            );\n\n        case 'messagePassportDataSent':\n            var passportDataTypeToString= {\n                'passportElementTypeAddress': 'address',\n                'passportElementTypeBankStatement': 'bank statement',\n                'passportElementTypeDriverLicense': 'driver license',\n                'passportElementTypeEmailAddress': 'email address',\n                'passportElementTypeIdentityCard': 'identity card',\n                'passportElementTypeInternalPassport': 'internal passport',\n                'passportElementTypePassport': 'passport',\n                'passportElementTypePassportRegistration': 'passport registration',\n                'passportElementTypePersonalDetails': 'personal details',\n                'passportElementTypePhoneNumber': 'phone number',\n                'passportElementTypeRentalAgreement': 'rental agreement',\n                'passportElementTypeTemporaryRegistration': 'temporary registration',\n                'passportElementTypeUtilityBill': 'utility bill',\n            };\n            var passportDataTypes= message.content.types.map(type=> passportDataTypeToString[type['@type']]);\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">\n                        {chat.title} received the following documents: {passportDataTypes.join(', ')}\n                    </span>\n                </span>\n            );\n\n        case 'messagePaymentSuccessful':\n            var noInvoiceTitleFallback= (\n                <span className={className}>\n                    <span className=\"part-1\">\n                        You successfully transferred \n                        {currencyAmountToString(message.content.currency, message.content.total_amount)} \n                        to {chat.title}\n                    </span>\n                </span>\n            );\n\n            // Get invoice message\n            var PaymentInfoWithInvoiceTitle= React.lazy(()=>new Promise(resolve=> {\n                TdLib.sendQuery({\n                    '@type': 'getMessage',\n                    chat_id: chat.id,\n                    message_id: message.content.invoice_message_id\n                }).then(\n                    result=> { \n                        //eslint-disable-next-line react/display-name\n                        resolve({ default: ()=> (\n                            <span className={className}>\n                                <span className=\"part-1\">\n                                    You successfully transferred \n                                    {currencyAmountToString(message.content.currency, message.content.total_amount)} \n                                    to {chat.title} for {result.content.title}\n                                </span>\n                            </span>\n                        )});\n                    },\n                    ()=> {\n                        resolve({ default: ()=> noInvoiceTitleFallback});\n                    }\n                );\n            }));\n\n            return (\n                <React.Suspense fallback={noInvoiceTitleFallback}>\n                    <PaymentInfoWithInvoiceTitle/>\n                </React.Suspense>\n            );\n\n        case 'messagePhoto':\n            if(message.content.is_secret) {\n                if(message.is_outgoing) {\n                    return (\n                        <span className={className}>\n                            <span className=\"part-1\">You sent a self-destructing photo</span>\n                        </span>\n                    );\n                } else {\n                    return (\n                        <span className={className}><span className=\"part-1\">\n                            <SenderFullName message={message} chat={chat} users={users}/> sent you a self-destructing photo. Please view it on your mobile.\n                        </span></span>\n                    );\n                }\n            } else {\n                return (\n                    <MayHaveCaption \n                        type=\"Photo\" \n                        caption={message.content.caption?.text} \n                        className={className} \n                        message={message} \n                        chat={chat}\n                        users={users}/>\n                );\n            }\n        \n        // case 'messagePinMessage':\n        case 'messagePoll':\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">{message.content.poll.question}</span>\n                </span>\n            );\n        \n        // case 'messageProximityAlertTriggered':\n        // case 'messageScreenshotTaken':\n        case 'messageSticker':\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">{message.content.sticker.emoji} Sticker</span>\n                </span>\n            );\n\n        case 'messageSupergroupChatCreate':\n            if(message.is_channel_post) {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\">Channel created</span>\n                    </span>\n                );\n            } else {\n                return (\n                    <span className={className}>\n                        <span className=\"part-1\"><SenderFullName chat={chat} message={message} users={users}/> created the group «{message.content.title}»</span>\n                    </span>\n                );\n            }\n\n        case 'messageText':\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-2\">{message.content.text.text.replace(/(\\n|\\r|\\r\\n|\\n\\r)/g, ' ')}</span>\n                </span>\n            );\n\n        case 'messageUnsupported':\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-2\">This message is not supported by your version of DIBgram. Please update to the latest version.</span>\n                </span>\n            );\n        \n        case 'messageVenue':\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">Location, </span>\n                    <span className=\"part-2\">{message.content.venue.title}</span>\n                </span>\n            );\n\n        case 'messageVideo':\n            return (\n                <MayHaveCaption \n                    type=\"Video\" \n                    caption={message.content.caption?.text} \n                    className={className} \n                    message={message} \n                    chat={chat}\n                    users={users}/>\n            );\n\n        case 'messageVideoNote':\n            return (\n                <span className={className}>\n                    <MessageSummarySender message={message} chat={chat} users={users}/>\n                    <span className=\"part-1\">Video message</span>\n                </span>\n            );\n\n        case 'messageVoiceNote':\n            return (\n                <MayHaveCaption \n                    type=\"Voice message\" \n                    caption={message.content.caption?.text} \n                    className={className} \n                    message={message} \n                    chat={chat}\n                    users={users}/>\n            );\n\n        case 'messageWebsiteConnected':\n            return (\n                <span className={className}>\n                    <span className=\"part-1\">You allowed this bot to message you when you logged in on {message.content.domain_name}</span>\n                </span>\n            );\n\n        default:\n            return null;\n        }\n    });\nexport default MessageSummaryWithoutIcon;\nMessageSummaryWithoutIcon.propTypes= {\n    message: PropTypes.object,\n    className: PropTypes.string\n};\n\n\n// If caption has a value, add a comma to type and return type\nfunction MayHaveCaption({type, caption, className, message, chat, users}) {\n    if(caption) type+=',';\n    return (\n        <span className={className}>\n            <MessageSummarySender message={message} chat={chat} users={users}/>\n            <span className=\"part-1\">{type}</span> <span className=\"part-2\">{caption.replace(/(\\n|\\r|\\r\\n|\\n\\r)/g, ' ')}</span>\n        </span>\n    );\n}\nMayHaveCaption.propTypes= {\n    type: PropTypes.string.isRequired,\n    caption: PropTypes.string,\n    className: PropTypes.string,\n    message: PropTypes.object,\n    chat: PropTypes.object,\n    users: PropTypes.object.isRequired\n};\n\nfunction SenderFullName({message, chat, users, includeYou}) {\n    if(includeYou) {\n        return message.is_outgoing ? 'You' : <SenderFullName message={message} chat={chat} users={users}/>;\n    }\n    const sender=message.sender;\n    const user=users[sender.user_id];\n    if(sender['@type']=='messageSenderUser') {\n        return user.last_name ? (user.first_name +' '+ user.last_name) : user.first_name;\n    } else if(sender['@type']=='messageSenderChat') {\n        return chat.title;\n    }\n}\n\nexport const MessageSummarySender= \n    function MessageSummarySender ({message, chat, users}) {\n        if(!message) return null;\n        var part1;\n        if(chat && (!message.is_channel_post)) {\n            if(message.is_outgoing) {\n                part1= 'You: ';\n            } else if(['chatTypeBasicGroup', 'chatTypeSupergroup'].includes(chat.type['@type'])) {\n                if(message.sender['@type']=='messageSenderUser') {\n                    part1= users[message.sender.user_id].first_name + ': ';\n                }\n            }\n            if(message.sender['@type']=='messageSenderChat') {\n                part1= chat.title+': ';\n            }\n        }\n        return part1? <span className=\"sender\">{part1}</span> : null;\n    };\nMessageSummarySender.propTypes= {\n    message: PropTypes.object.isRequired,\n    chat: PropTypes.object.isRequired,\n    users: PropTypes.object.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './link-button.scss';\n\nexport default function LinkButton({href, children, onClick, ...rest}) {\n    const click= href ? ()=> window.open(href) : onClick;\n    return (\n        <button className=\"link-button\" onClick={click} {...rest}>{children}</button>\n    );\n}\nLinkButton.propTypes = {\n    /** Link content */\n    children: PropTypes.node.isRequired,\n    /** Function to be called when link is clicked. */\n    onClick: PropTypes.func,\n    /** If provided, the URL will be opened in a new tab on click. */\n    href: PropTypes.string\n};\n","import {createStore} from 'redux';\nimport TdLib from '../TdWeb/tdlib';\n\nfunction reducer(state, action) {\n    switch (action.type) {\n    case 'UPD_SUPERGROUP':\n        return {\n            ...state,\n            [action.supergroup.id]: action.supergroup\n        };\n    default:\n        return state;\n    }\n}\n\nconst supergroupStore= createStore(reducer);\nexport default supergroupStore;\n\nTdLib.registerUpdateHandler('updateSupergroup', (update) => {\n    supergroupStore.dispatch({\n        type: 'UPD_SUPERGROUP',\n        supergroup: update.supergroup\n    });\n});","\n/**\n * Converts a date and time to a short string.\n * - If the date is in the last 20 hours, the time is displayed in the format HH:MM.\n * - If the date is in the last 7 days, the weekday is displayed.\n * - If the date is older, the date is displayed in the format DD.MM.YY.\n * @param {Date|Number} date Input date\n */\nexport function smallDateTimeToString(date) {\n    if(typeof date == 'number') date= TdLibDateToDate(date);\n    const now = new Date();\n    const yesterday = new Date(now.getTime() - 20 * 60 * 60 * 1000);\n    const lastWeek = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n\n    if (date.getTime() >= yesterday.getTime()) {\n        return timeToString(date);\n    } else if (date.getTime() >= lastWeek.getTime()) {\n        return weekdayToString(date);\n    } else {\n        return dateToString(date);\n    }\n}\n\n/**\n * Formats time in 12-hour format\n * @param {Date|Number} date input date\n */\nexport function timeToString(date) {\n    if(typeof date == 'number') date= TdLibDateToDate(date);\n    var hours = date.getHours();\n    var minutes = date.getMinutes();\n    const ampm = hours >= 12 ? 'PM' : 'AM';\n    hours = hours % 12;\n    hours = hours ? hours : 12; // the hour '0' should be '12'\n    minutes = minutes < 10 ? `0${minutes}` : minutes;\n    return `${hours}:${minutes} ${ampm}`;\n}\n\n/**\n * Formats weekday in WWW format\n * @param {Date|Number} date input date\n */\nexport function weekdayToString(date) {\n    if(typeof date == 'number') date= TdLibDateToDate(date);\n    const weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    return weekdays[date.getDay()];\n}\n\n/**\n * Formats date in DD.MM.YY format\n * @param {Date|Number} date input date\n */\nexport function dateToString(date) {\n    if(typeof date == 'number') date= TdLibDateToDate(date);\n    var day = date.getDate();\n    var month = date.getMonth() + 1;\n    const year = String(date.getFullYear()).slice(2);\n    if (day < 10) {\n        day = `0${day}`;\n    }\n    if (month < 10) {\n        month = `0${month}`;\n    }\n    return `${day}.${month}.${year}`;\n}\n\nexport function TdLibDateToDate(tdLibDate) {\n    return new Date(tdLibDate * 1000);\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './menu.scss';\n\nexport default function Menu(props) {\n    return (\n        <div className=\"menu\" {...props}/>\n    );\n}\n\nMenu.MenuContents= function MenuContents(props) {\n    return (\n        <div className=\"menu-contents\" {...props}/>\n    );\n};\n\nMenu.MenuItem= function MenuItem({children, ...rest}) {\n    return (\n        <div className=\"menu-item\" {...rest}>\n            {children}\n        </div>\n    );\n};\nMenu.MenuItem.propTypes = {\n    children: PropTypes.node\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { createStore } from 'redux';\nimport Menu from './menu';\nimport { connect } from 'react-redux';\n\nexport function ContextMenu({x, y, children}) {\n    return (\n        <div className=\"context-menu\" style={{'--x': x+'px', '--y': y+'px'}}>\n            <Menu>\n                {children}\n            </Menu>\n        </div>\n    );\n}\nContextMenu.propTypes = {\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired,\n    children: PropTypes.node.isRequired\n};\n\nexport const contextMenusStore = createStore(function (state = null, action) {\n    if (action.type === 'ADD_CONTEXT_MENU') {\n        return action.menu;\n    }\n    else if (action.type === 'REMOVE_CONTEXT_MENUS') {\n        return null;\n    }\n    return state;\n});\n\nexport const ContextMenus= connect(state=>({menus:state}))(({menus}) => menus);\n\n/**\n * Create a context menu\n * @param {React.SyntheticEvent} e Pass down `e` from the event handler\n * @param {React.ReactNode} menu Context menu contents\n */\nexport function createContextMenu(e, menu) {\n    e.preventDefault();\n    setTimeout(() => { // This is to fix ripple effect glitch\n        contextMenusStore.dispatch({\n            type: 'ADD_CONTEXT_MENU',\n            menu: <ContextMenu x={e.nativeEvent.pageX} y={e.nativeEvent.pageY}>{menu}</ContextMenu>\n        });\n    }, 50); // Human brain cannot notice 50ms delay\n}\n\nexport function onAnywhereClicked() {\n    contextMenusStore.dispatch({\n        type: 'REMOVE_CONTEXT_MENUS'\n    });\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { createStore } from 'redux';\n\n/**\n * A redux store which state is an array of objects with {id: unique ID of dialog, element: react element of the dialog}\n */\nexport var dialogStore= createStore(\n    /**\n     * @param {any[]} state\n     * @param {Object} action\n     */\n    function (state= [], action) {\n        switch (action.type) {\n        case 'ADD_DIALOG':\n            return [\n                ...state,\n                action.dialog\n            ];\n        \n        case 'REMOVE_DIALOG':\n            return state.filter(value => value.id!=action.id);\n        \n        default:\n            break;\n        }\n    },\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n\n/**\n * Opens a dialog\n * @param {string} id A unique ID for the dialog\n * @param {React.ReactElement} dialog The dialog React element\n */\nexport function addDialog(id, dialog) {\n    dialogStore.dispatch({\n        type: 'ADD_DIALOG',\n        dialog: {\n            element: dialog,\n            id: id\n        }\n    });\n}\n\n/**\n * Closes an existing dialog\n * @param {string} id The dialog unique ID\n */\nexport function removeDialog(id) {\n    dialogStore.dispatch({\n        type: 'REMOVE_DIALOG',\n        id: id\n    });\n}\n\n/**\n * Renders all dialogs.\n */\nconst Dialogs= (connect(function (state) {\n    return {dialogs: state || []};\n})(function Dialogs(props) {\n    return props.dialogs.map(el => <React.Fragment key={el.id}>{el.element}</React.Fragment>) || null;\n}));\n\nexport default Dialogs;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { removeDialog } from './dialogs';\nimport './toast.scss';\n\nexport default function Toast({id, children}) {\n    const [closed, setClosed] = React.useState(false);\n    React.useEffect(() => {\n        setTimeout(() => {\n            setClosed(true);\n            setTimeout(() => {\n                removeDialog(id);\n            }, 2000);\n        }, 6000);\n    }, []);\n    return (\n        <div className={'toast' + (closed? ' closed':'')}>\n            <div className=\"toast-content\">\n                {children}\n            </div>\n        </div>\n    );\n}\nToast.propTypes = {\n    id: PropTypes.string.isRequired,\n    children: PropTypes.node.isRequired,\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport RippleEffect, {handleMyMouseEvents} from './ripple-effect';\n\n/**\n * Renders a small button with accent color\n */\nexport default class SmallButton extends React.Component {\n    static propTypes= {\n        /** The button's content */\n        children: PropTypes.node.isRequired,\n        /** Fires when the button is clicked */\n        onClick: PropTypes.func,\n        /** Setting to true causes the button to become red */\n        attention: PropTypes.bool\n    };\n    state= {\n        ripple: {\n            state: 'off'\n        }\n    }\n    constructor(props) {\n        super(props);\n        [this.mouseDown, this.mouseUp, this.mouseLeave]= handleMyMouseEvents(this);\n        var {children, ...rest}= props;\n        [this.children, this.rest]= [children, rest];\n    }\n    render() {\n        return (\n            <button \n                className=\"small-button\" \n                data-attention={this.props.attention? 'true': 'false'}\n                onMouseDown={this.mouseDown}\n                onMouseUp={this.mouseUp}\n                onMouseLeave={this.mouseLeave}\n                {...this.rest}>\n\n                <RippleEffect {...this.state.ripple} color=\"var(--theme-color-lightButtonBgRipple)\"/>\n\n                <div className=\"invisibleText\">\n                    {this.children}\n                </div>\n                <div className=\"content\">\n                    {this.children}\n                </div>\n                \n            </button>\n        );\n    }\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport SmallButton from '../elements/small-button';\nimport { removeDialog } from './dialogs';\n/**\n * Renders a modal dialog with a title and cancel and OK button. OK button text can be changed.\n */\nexport default class ConfirmDialog extends React.Component{\n    static propTypes= {\n        children: PropTypes.node.isRequired,\n        /** Dialog width in CSS format */\n        width: PropTypes.string,\n        /** Dialog header */\n        title: PropTypes.string,\n        /** Text content of the OK button*/\n        OKButtonText: PropTypes.string,\n        /** Pass true to only show the OK button */\n        hideCancelButton: PropTypes.bool,\n        /** Unique ID of this dialog, used to close it. */\n        id: PropTypes.any.isRequired,\n        /** Called when the OK button is pressed */\n        onOK: PropTypes.func,\n        /** Called when the cancel button is pressed */\n        onCancel: PropTypes.func,\n        /** Third button text (optional) */\n        thirdButton: PropTypes.string,\n        /** Pass true if third button click closes dialog */\n        thirdButtonClosesDialog: PropTypes.bool,\n        /** Called when third button is pressed */\n        onThirdButtonClick: PropTypes.func,\n        /** If true, the OK button will become red, meaning the user should pay attention */\n        attention: PropTypes.bool\n    };\n    state= {\n        closing: false\n    }\n    handleOK =()=>{\n        this.closeDialog();\n        this.props.onOK && this.props.onOK();\n    }\n    handleCancel =()=>{\n        this.closeDialog();\n        this.props.onCancel && this.props.onCancel();\n    }\n    handleButton =(handler)=>{\n        this.closeDialog();\n        handler && handler();\n    }\n    render() {\n        return (\n            <div className={'modal-dialog confirm-dialog' + ((this.state.closing) ? ' closing' : '')}>\n                <div style={{\n                    'width': this.props.width || '320px'\n                }}\n                data-id={this.props.id}>\n                    <h1>{this.props.title || ''}</h1>\n                    <div className=\"content\">\n                        {this.props.children}\n                    </div>\n                    <div className=\"options\">\n                        {this.props.thirdButton ?  (\n                            <SmallButton \n                                className=\"small-button left\"\n                                style={{'float': 'left'}}\n                                onClick={\n                                    this.props.thirdButtonClosesDialog ?\n                                        ()=>this.handleButton(this.props.onThirdButtonClick)\n                                        : this.props.onThirdButtonClick}>\n                                {this.props.thirdButton}\n                            </SmallButton>\n                        ) : null}\n                        {this.props.hideCancelButton ? null : (\n                            <SmallButton onClick={()=>this.handleButton(this.props.onCancel)}>\n                                Cancel\n                            </SmallButton>\n                        )}\n                        <SmallButton onClick={()=>this.handleButton(this.props.onOK)} attention={this.props.attention}>\n                            {this.props.OKButtonText || 'OK'}\n                        </SmallButton>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n    \n    closeDialog= ()=>{\n        this.setState({\n            closing: true\n        });\n        setTimeout(() => {\n            removeDialog(this.props.id);\n        }, 1000);\n    }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect, Provider } from 'react-redux';\nimport TdLib from '../../../TdWeb/tdlib';\nimport chatStore, { compareChatList } from '../../chat-store';\nimport './chat-list.scss';\nimport ProfilePhoto, { getChatTypeId } from '../../../ui/components/profile-photo';\nimport { dialogs_chat, dialogs_channel, dialogs_bot, dialogs_pinned, dialogs_verified_star, dialogs_verified_check, dialogs_sending, dialogs_sent, dialogs_received, archive_userpic } from '../../../ui/icon/icons';\nimport usersStore from '../../users-store';\nimport ScrollView from '../../../ui/scroll/scrollbar';\nimport MessageSummaryWithoutIcon from '../../message/message-summary-noicon';\nimport LinkButton from '../../../ui/elements/link-button';\nimport { isChatWithDeletedAccount, isChatVerified } from '../../chat-misc';\nimport { smallDateTimeToString } from '../../../time-tostring';\nimport { getMessageStatus } from '../../message-misc';\nimport options from '../../../TdWeb/options';\nimport RippleEffect, { handleMyMouseEvents, handleMyMouseEventsFunction } from '../../../ui/elements/ripple-effect';\nimport { createContextMenu } from '../../../ui/menu/context-menu';\nimport Menu from '../../../ui/menu/menu';\nimport Toast from '../../../ui/dialog/toast';\nimport { addDialog } from '../../../ui/dialog/dialogs';\nimport ConfirmDialog from '../../../ui/dialog/confirm-dialog';\n\n/**\n * Returns a sorted list of all chats in the given chat list\n * \n * Also for every chat, sets `chat.position` to the matching position (creates copy instead of modifying original object)\n * @param {import('tdweb').TdObject[]} chats\n * @param {import('tdweb').TdObject} list\n */\nexport function getChatsFromList(chats, list) {\n    return chats.map(chat => {\n        for( const position of chat.positions ) {\n            if (compareChatList(list, position.list)) {\n                if( position.order=='0' ) return false;\n                return {\n                    ...chat,\n                    position: position\n                };\n            }\n        }\n        return chat;\n    })\n        .filter(chat => !!chat.position)\n        .sort((a, b) => {\n            let order1= a.position.order, order2= b.position.order;\n\n            if (order1 == order2) {\n                return 0;\n            }\n            if (order1 < order2) {\n                return 1;\n            }\n            return -1;\n        });\n}\n\nconst ChatList= connect(state=> ({connectionState: state}))(\n    class ChatList extends React.Component { \n        static propTypes = {\n            chats: PropTypes.array.isRequired,\n            list: PropTypes.object.isRequired,\n            connectionState: PropTypes.string.isRequired\n        }\n\n        // When updating, TDLib sends updates of type\n        // updateChatLastMessage, where only the last one is needed.\n        // This greatly hurts performance.\n        // However, we can workaround it by not re-rendering \n        // until all updates have arrived.\n        shouldComponentUpdate(nextProps) {\n            return (nextProps.chats !== this.props.chats \n                || nextProps.list !== this.props.list \n                || nextProps.connectionState !== this.props.connectionState)\n                && nextProps.connectionState != 'connectionStateUpdating';\n        }\n\n        render() {\n            const array= getChatsFromList(this.props.chats, this.props.list).map(chat=><ChatListItem key={chat.id} chat={chat} />);\n            return (\n                <ScrollView id=\"chat-list\" scrollBarWidth=\"4\">\n                    {this.props.list['@type']=='chatListMain' && (\n                        <Provider store={chatStore}>\n                            <ArchivedChatsItem chats={this.props.chats}/>\n                        </Provider>\n                    )}\n                    <Provider store={usersStore}>\n                        {array.length ? array :  <EmptyChatList list={this.props.list} connectionState={this.props.connectionState}/>}\n                    </Provider>\n                </ScrollView>\n            );\n        }\n\n        componentDidMount() {\n            TdLib.sendQuery({\n                '@type': 'getChats',\n                'chat_list': {\n                    '@type': 'chatListMain'\n                },\n                'offset_order': '9223372036854775807',\n                'offset_chat_id': 0,\n                'limit': 50\n            });\n            TdLib.sendQuery({\n                '@type': 'getChats',\n                'chat_list': {\n                    '@type': 'chatListArchive'\n                },\n                'offset_order': '9223372036854775807',\n                'offset_chat_id': 0,\n                'limit': 50\n            });\n        }\n    }\n);\nexport default ChatList;\n\nexport class ChatListItem extends React.Component {\n    constructor(props) {\n        super(props);\n        [this.mouseDown, this.mouseUp, this.mouseLeave]= handleMyMouseEvents(this);\n    }\n    state= {\n        ripple: {\n            state: 'off'\n        }\n    };\n    shouldComponentUpdate(nextProps, nextState) {\n        return nextProps.chat.id !== this.props.chat.id\n            || nextProps.chat.last_message !== this.props.chat.last_message\n            || nextProps.chat.draft_message !== this.props.chat.draft_message\n            || nextProps.chat.unread_count !== this.props.chat.unread_count\n            || nextProps.chat.unread_mention_count !== this.props.chat.unread_mention_count\n            || nextProps.chat.is_marked_as_unread !== this.props.chat.is_marked_as_unread\n            || nextProps.chat.position.is_pinned !== this.props.chat.position.is_pinned\n            || nextProps.chat.photo?.small?.id !== this.props.chat.photo?.small?.id\n            || nextProps.chat.title !== this.props.chat.title\n            || nextProps.chat.last_read_outbox_message_id !== this.props.chat.last_read_outbox_message_id\n            || nextState.ripple !== this.state.ripple;\n    }\n    render(){\n        const chat= {...this.props.chat}; // Clone chat object to avoid mutating it. Mutating it causes Saved messages and Deleted account chats to get past shouldComponentUpdate.\n        var chatType= '';\n        if (chat.type?.['@type'] == 'chatTypeBasicGroup' ||\n                (chat.type?.['@type'] == 'chatTypeSupergroup' &&\n                chat.type?.is_channel == false)\n        ){\n            chatType= dialogs_chat;\n        } \n        else if (chat.type?.['@type'] == 'chatTypeSupergroup' &&\n                chat.type?.is_channel == true){\n            chatType= dialogs_channel;\n        } \n        else if ((chat.type?.['@type'] == 'chatTypePrivate') &&\n                (usersStore.getState()[chat.type?.user_id]?.type?.['@type'] == 'userTypeBot')){\n            chatType= dialogs_bot;\n        }\n        if (chat.id==options['replies_bot_chat_id']) {\n            chatType= '';\n        }\n\n        if(isChatWithDeletedAccount(chat)) {\n            chat.title= 'Deleted Account'; // Chat object is a copy, so there is no problem with mutating it.\n        }\n\n        const isVerified= isChatVerified(chat);\n\n        if (chat.id==options['my_id']) {\n            chat.title= 'Saved Messages';\n        }\n\n        var messageStatus = null;\n        switch(getMessageStatus(chat, chat.last_message)) {\n        case 'sending': \n            messageStatus = <span className=\"message-status-icon sending\" dangerouslySetInnerHTML={{__html: dialogs_sending}}/>;\n            break;\n        case 'sent': \n            messageStatus = <span className=\"message-status-icon sent\" dangerouslySetInnerHTML={{__html: dialogs_sent}}/>;\n            break;\n        case 'seen': \n            messageStatus = <span className=\"message-status-icon seen\" dangerouslySetInnerHTML={{__html: dialogs_received}}/>;\n            break;\n        }\n\n        var unreadBadge = null;\n        const unreadBadgeClass= chat.notification_settings.mute_for ? 'unread-badge muted' : 'unread-badge';\n        // Show the mention badge alone if there is exactly one mention and no other unread messages\n        if (chat.unread_mention_count == 1 && chat.unread_count == chat.unread_mention_count) {\n            unreadBadge = <span className=\"unread-badge mention\">@</span>;\n        } \n        // Show the mention badge with unread badge together if there are more than one unread messages and there are mentions\n        else if (chat.unread_mention_count > 0 && chat.unread_count > 1 ) {\n            unreadBadge = <React.Fragment>\n                <span className=\"unread-badge mention\">@</span>\n                <span className={unreadBadgeClass}>{chat.unread_count}</span>\n            </React.Fragment>;\n        }\n        // Show the unread badge alone if there are no mentions and there are unread messages\n        else if (chat.unread_count > 0 && chat.unread_mention_count == 0) {\n            unreadBadge = <span className={unreadBadgeClass}>{chat.unread_count}</span>;\n        }\n        // Show an empty badge if chat is manually marked as unread\n        else if (chat.is_marked_as_unread) {\n            unreadBadge = <span className={unreadBadgeClass}></span>;\n        }\n\n        return(\n            <div className=\"chat\" onContextMenu={e=> createContextMenu(e, <ChatContextMenu chat={chat}/>)}\n                onMouseDown={this.mouseDown} onMouseUp={this.mouseUp} onMouseLeave={this.mouseLeave}>\n                <RippleEffect {...this.state.ripple} color=\"var(--theme-color-dialogsRippleBg)\"/>\n                <div className=\"content\">\n                    <ProfilePhoto name={chat.title} photo={chat.photo?.small} id={getChatTypeId(chat)}/>\n                    <div className=\"details\">\n                        <div className=\"top\">\n                            <div className=\"left\">\n                                <div className=\"type-icon\" dangerouslySetInnerHTML={{__html: chatType}}></div>\n                                <div className=\"title\">{chat.title}</div>\n                                {isVerified && <span className=\"verified-icon\">\n                                    <span className=\"verified-icon-star\" dangerouslySetInnerHTML={{__html: dialogs_verified_star}}></span>\n                                    <span className=\"verified-icon-check\" dangerouslySetInnerHTML={{__html: dialogs_verified_check}}></span>\n                                </span>}\n                            </div>\n                            <div className=\"right\">\n                                {messageStatus}\n                                {chat.last_message?.date && <span className=\"date\">{smallDateTimeToString(chat.last_message.date)}</span>}\n                            </div>\n                        </div>\n                        <div className=\"bottom\">\n                            <div className=\"left\">\n                                {(chat.draft_message && !unreadBadge) ?  // I don't know why, but Telegram Desktop does not show the draft message if the chat is unread.\n                                    <span className=\"last-message\">\n                                        <span className=\"draft\">Draft:</span> <span className=\"part-2\">{chat.draft_message.input_message_text.text.text}</span>\n                                    </span> \n                                    : \n                                    <MessageSummaryWithoutIcon message={chat.last_message} chat={chat} className=\"last-message\"/>\n                                }\n                            </div>\n                            <div className=\"right\">\n                                {unreadBadge || (\n                                    chat.position?.is_pinned && <span className=\"pinned_icon\" dangerouslySetInnerHTML={{__html: dialogs_pinned}}></span>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\nChatListItem.propTypes = {\n    chat: PropTypes.object.isRequired\n};\n\nfunction ChatContextMenu({chat}) {\n    const [movableChatLists, setMovableChatLists] = React.useState([]);\n\n    React.useEffect(() => {\n        TdLib.sendQuery({\n            '@type': 'getChatListsToAddChat',\n            chat_id: chat.id\n        }).then(result => {\n            setMovableChatLists(result.chat_lists.map(chatList=> {\n                const text= {'chatListMain': 'Unarchive chat', 'chatListArchive': 'Archive chat'}[chatList['@type']];\n                if(!text) return;\n                return (\n                    <Menu.MenuItem key={chatList.chat_filter_id || chatList['@type']} onClick={() => {\n                        TdLib.sendQuery({\n                            '@type': 'addChatToList',\n                            chat_id: chat.id,\n                            chat_list: chatList\n                        }).then(() => {\n                            if(chatList['@type'] == 'chatListMain') {\n                                addDialog('chat-un-archived-toast', (\n                                    <Toast id=\"chat-un-archived-toast\">\n                                        Chat restored from your archive.\n                                    </Toast>\n                                ));\n                            } \n                            else if(chatList['@type'] == 'chatListArchive') {\n                                addDialog('chat-archived-toast', (\n                                    <Toast id=\"chat-archived-toast\">\n                                        Chat archived. <br/>\n                                        Muted chats stay archived when new messages arrive.\n                                    </Toast>\n                                ));\n                            }\n                        });\n                    }}>\n                        {text}\n                    </Menu.MenuItem>\n                );\n            }));\n        });\n    }, []);\n\n    return (\n        <Menu.MenuContents>\n            {movableChatLists}\n            <Menu.MenuItem onClick={()=> {\n                TdLib.sendQuery({\n                    '@type': 'toggleChatIsPinned',\n                    chat_list: chat.position.list,\n                    chat_id: chat.id,\n                    is_pinned: !chat.position.is_pinned\n                }).catch(error=> {\n                    if(error.code == 400) {\n                        const max= chat.position.list['@type'] == 'chatListMain'? options['pinned_chat_count_max'] : options['pinned_archived_chat_count_max'];\n                        addDialog('maximum-pinned-chats-reached', (\n                            <ConfirmDialog id=\"maximum-pinned-chats-reached\" hideCancelButton={true}>\n                                Sorry, you can only pin {max} chats to the top.\n                            </ConfirmDialog>\n                        ));\n                    }\n                });\n            }}>\n                {chat.position.is_pinned? 'Unpin from top' : 'Pin to top'}\n            </Menu.MenuItem>\n        </Menu.MenuContents>\n    );\n}\nChatContextMenu.propTypes = {\n    chat: PropTypes.object.isRequired\n};\n\nconst ArchivedChatsItem= connect(state=> ({\n    archiveButtonState: state.archiveButtonState,\n    unread: state.unread.archive\n})) (function ArchivedChatsItem({chats, unread, archiveButtonState}) {\n    const chatsInList = getChatsFromList(chats, {'@type': 'chatListArchive'});\n    if(!chatsInList.length) return null; // There are no archived chats\n\n    const ripple= React.useState({state: 'off'});\n    const [mouseDown, mouseUp, mouseLeave]= handleMyMouseEventsFunction(ripple);\n\n    function onArchiveOpen() {\n        chatStore.dispatch({\n            type: 'SET_ARCHIVE_STATE',\n            archiveState: 'open'\n        });\n    }\n\n    function setButtonState(state) {\n        chatStore.dispatch({\n            type: 'SET_ARCHIVE_BUTTON_STATE',\n            archiveButtonState: state\n        });\n    }\n\n    const moveToMainMenuToast= <Toast id=\"moveToMainMenuToast\" >\n        Archive moved to the main menu! <br/>\n        You can return it from the context menu of the archive button.\n    </Toast>;\n\n    switch(archiveButtonState) {\n    case 'expanded':\n    default:\n        return (\n            <div \n                className=\"chat archived\" onClick={onArchiveOpen}\n                onMouseDown={mouseDown} onMouseUp={mouseUp} onMouseLeave={mouseLeave}\n                onContextMenu={e=> createContextMenu(e, (\n                    <Menu.MenuContents>\n                        <Menu.MenuItem onClick={()=>{\n                            setButtonState('collapsed');\n                            localStorage.setItem('dibgram-archived-chats-button-mode', 'collapsed');\n                        }}>\n                            Collapse\n                        </Menu.MenuItem>\n                        <Menu.MenuItem onClick={()=>{\n                            setButtonState('hidden-expanded');\n                            localStorage.setItem('dibgram-archived-chats-button-mode', 'hidden-expanded');\n                            addDialog('moveToMainMenuToast', moveToMainMenuToast);\n                        }}>\n                            Move to main menu\n                        </Menu.MenuItem>\n                    </Menu.MenuContents>\n                ))}>\n                <RippleEffect {...ripple[0]} color=\"var(--theme-color-dialogsRippleBg)\"/>\n                <div className=\"content\">\n                    <div className=\"profile-photo\">\n                        <div className=\"svg\" dangerouslySetInnerHTML={{__html: archive_userpic}}/>\n                    </div>\n                    <div className=\"details\">\n                        <div className=\"top\">\n                            <div className=\"left\">\n                                <div className=\"title\">Archived chats</div>\n                            </div>\n                        </div>\n                        <div className=\"bottom\">\n                            <div className=\"left\">\n                                <div className=\"last-message\">\n                                    <span className=\"part-1\">\n                                        {chatsInList\n                                            .filter(chat=> chat.unread_count > 0)\n                                            .map(chat => (chat.title || 'Deleted Account') + ', ')\n                                            .join('')}\n                                    </span>\n                                    <span className=\"part-2\">\n                                        {chatsInList\n                                            .filter(chat=> chat.unread_count == 0)\n                                            .map(chat => chat.title || 'Deleted Account')\n                                            .join(', ')}\n                                    </span>\n                                </div>\n                            </div>\n                            {unread.unread_messages_count? (\n                                <div className=\"right\">\n                                    <span className=\"unread-badge muted\">{unread.unread_messages_count}</span>\n                                </div>\n                            ) : null}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n\n    case 'collapsed':\n        return (\n            <div\n                className=\"chat archived collapsed\" onClick={onArchiveOpen}\n                onMouseDown={mouseDown} onMouseUp={mouseUp} onMouseLeave={mouseLeave}\n                onContextMenu={e=> createContextMenu(e, (\n                    <Menu.MenuContents>\n                        <Menu.MenuItem onClick={()=>{\n                            setButtonState('expanded');\n                            localStorage.setItem('dibgram-archived-chats-button-mode', 'expanded');\n                        }}>\n                            Expand\n                        </Menu.MenuItem>\n                        <Menu.MenuItem onClick={()=>{\n                            setButtonState('hidden-collapsed');\n                            localStorage.setItem('dibgram-archived-chats-button-mode', 'hidden-collapsed');\n                            addDialog('moveToMainMenuToast', moveToMainMenuToast);\n                        }}>\n                            Move to main menu\n                        </Menu.MenuItem>\n                    </Menu.MenuContents>\n                ))}>\n                <RippleEffect {...ripple[0]} color=\"var(--theme-color-dialogsRippleBg)\"/>\n                <div className=\"content\">\n                    Archived chats\n                    {unread.unread_messages_count? (\n                        <div className=\"details\">\n                            <span className=\"unread-badge muted\">{unread.unread_messages_count}</span>\n                        </div>\n                    ) : null}\n                </div>\n            </div>\n        );\n    case 'hidden-expanded':\n    case 'hidden-collapsed':\n        return null;\n    }\n});\nArchivedChatsItem.propTypes = {\n    chats: PropTypes.array.isRequired\n};\n\nfunction EmptyChatList({list, connectionState}) {\n    if(connectionState!='connectionStateReady') {\n        return (\n            <div className=\"empty\">\n                <div>Loading...</div>\n            </div>\n        );\n    }\n    if(list['@type']=='chatListFilter'){\n        return (\n            <div className=\"empty\">\n                <div>No chats currently belong to this folder.</div>\n                <LinkButton>Edit Folder</LinkButton>\n            </div>\n        );\n    } else {\n        return (\n            <div className=\"empty\">\n                <div>Your chats will be here</div>\n                <LinkButton>New contact</LinkButton>\n            </div>\n        );\n    }\n}\n","import supergroupStore from './supergroup-store';\nimport usersStore from './users-store';\n\nexport function isChatWithDeletedAccount(chat) {\n    switch (chat.type['@type']) {\n    case 'chatTypeBasicGroup':\n    case 'chatTypeSupergroup':\n        return false;\n    \n    case 'chatTypeSecret':\n    case 'chatTypePrivate': \n        var user= usersStore.getState()?.[chat.type.user_id];\n        return user && user.type['@type'] === 'userTypeDeleted';\n    }\n    return false;\n}\n\nexport function isChatVerified(chat){\n    switch (chat.type['@type']) {\n    case 'chatTypeBasicGroup':\n        return false;\n\n    case 'chatTypeSupergroup':\n        var supergroup= supergroupStore.getState()?.[chat.type.supergroup_id];\n        return supergroup.is_verified;\n        \n    case 'chatTypeSecret':\n    case 'chatTypePrivate': \n        var user= usersStore.getState()?.[chat.type.user_id];\n        return user.is_verified;\n    }\n    return false;\n}","/**\n * Gets message sending status. Can return 3 values:\n * - `\"sending\"`: the message is outgoing and is being sent.\n * - `\"sent\"`: the message is outgoing and was sent.\n * - `\"seen\"`: the message is outgoing and was seen by the other party.\n * - `\"unread\"`: the message is incoming and was not seen by this party.\n * - `\"read\"`: the message is incoming and was seen by this party.\n * @param {import(\"tdweb\").TdObject} chat The chat in which the message was sent.\n * @param {import(\"tdweb\").TdObject} message The message to check.\n */\nexport function getMessageStatus(chat, message) {\n    if(!chat || !message) return undefined;\n    if(message.is_outgoing) {\n        if(message.sending_state) {\n            return 'sending';\n        }\n        if(chat.last_read_outbox_message_id >= message.id) {\n            return 'seen';\n        }\n        return 'sent';\n    }\n    if(chat.last_read_inbox_message_id >= message.id) {\n        return 'read';\n    }\n    return 'unread';\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './search-box.scss';\nimport { info_close } from '../../../../ui/icon/icons';\n\n/**\n * Renders the search box.\n */\nexport default function SearchBox(props) {\n    return (\n        <div id=\"search-box\">\n            <input \n                placeholder=\"Search\"\n                value={props.value}\n                onChange={props.onChange}\n                {...props}/>\n            <button \n                className=\"clear\" \n                onClick={()=> props.onChange && props.onChange({target: {value: ''}})}\n                data-visible={(props.value || '').length}\n                dangerouslySetInnerHTML={{__html: info_close}}>\n            </button>\n        </div>\n    );\n}\nSearchBox.propTypes= {\n    value: PropTypes.string,\n    onChange: PropTypes.func\n};","import { createStore } from 'redux';\nimport TdLib from './tdlib';\n\nconst connectionStore = createStore(\n    (state = 'connectionStateConnecting', action) => {\n        switch (action.type) {\n        case 'SET_CONNECTION':\n            return  action.connection;\n        default:\n            return state;\n        }\n    }\n);\n\nTdLib.registerUpdateHandler('updateConnectionState', (update) => {\n    connectionStore.dispatch({\n        type: 'SET_CONNECTION',\n        connection: update.state['@type']\n    });\n});\nexport default connectionStore;","import React from 'react';\nimport { connect, Provider } from 'react-redux';\nimport ConnectionState from '../../../ui/components/connecting';\nimport ChatList from './chat-list';\nimport SearchBox from './search/search-box';\nimport HamburgerMenuButton from './hamburger-menu/menu-button';\nimport connectionStore from '../../../TdWeb/connectionStore';\nimport IconButton from '../../../ui/elements/icon-button';\nimport './chat-list-bar.scss';\nimport { info_back } from '../../../ui/icon/icons';\nimport chatStore from '../../chat-store';\n\n/**\n * Renders the navigation menu, containing chat list, search field and search results, chat folders and the hamburger menu\n */\nconst ChatListBar = connect(function (state) {\n    return {\n        useFolders: (state.filters || []).length != 0,\n        chats: state.chats, \n        list: state.currentChatList,\n        archiveState: state.archiveState,\n        unread: state.unread\n    };\n})(function ChatListBar({useFolders, chats, list, archiveState, unread, onHamburgerMenuOpened}) {\n    var [searchText, setSearchText] = React.useState('');\n    \n    function closeArchive() {\n        chatStore.dispatch({\n            type: 'SET_ARCHIVE_STATE',\n            archiveState: 'closing'\n        });\n        setTimeout(() => {\n            if(chatStore.getState().archiveState == 'closing') {\n                chatStore.dispatch({\n                    type: 'SET_ARCHIVE_STATE',\n                    archiveState: 'closed'\n                });\n            }\n        }, 2000);\n    }\n\n    return (\n        <div id=\"chat-list-bar\" className={archiveState == 'open' ? 'archive-open' : ''}>\n            <div className=\"chat-list-header\">\n                {(!useFolders) && <HamburgerMenuButton.WithoutFolders onClick={onHamburgerMenuOpened}/>}\n                <SearchBox value={searchText} onChange={e => setSearchText(e.target.value)}/>\n            </div>\n            <Provider store={connectionStore}>\n                <ChatList chats={chats} list={list}/>\n                {archiveState != 'closed' && (\n                    <div className=\"archived-chats\">\n                        <div className=\"chat-list-header\">\n                            <IconButton icon={info_back} onClick={closeArchive}/>\n                            {unread.main.unread_unmuted_messages_count? (\n                                <div className=\"unread-badge\">\n                                    <span>{unread.main.unread_unmuted_messages_count}</span>\n                                </div>\n                            ): null}\n                            <div className=\"title\">Archived chats</div>\n                        </div>\n                        <ChatList chats={chats} list={{'@type': 'chatListArchive'}}/>\n                    </div>\n                )}\n                <ConnectionState/>\n            </Provider>\n        </div>\n    );\n});\nexport default ChatListBar;\n","/**\n * There are 3 ways to import the items\n * 1. import each component from the respective file\n * 2. import each component from tool-strip.js\n * 3. import the default export from tool-strip.js and access the object members\n * You can use whichever you want.\n */\n\nimport ToolStripButton from './button';\nimport ToolStripSection from './section';\n\nconst ToolStrip = {\n    Button: ToolStripButton,\n    Section: ToolStripSection\n};\nexport default ToolStrip;\nexport { ToolStripButton, ToolStripSection };\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport RippleEffect, {handleMyMouseEventsFunction} from '../elements/ripple-effect';\nimport './button.scss';\n\nexport default function ToolStripButton({icon, text, children, ...rest}) {\n    const ripple = React.useState({state: 'off'});\n    const [mouseDown, mouseUp, mouseLeave]= handleMyMouseEventsFunction(ripple);\n    return (\n        <div className=\"tool-strip-button\" {...rest}\n            onMouseDown={mouseDown} onMouseUp={mouseUp} onMouseLeave={mouseLeave}>\n            <RippleEffect {...ripple[0]} color=\"var(--theme-color-windowBgRipple)\"/>\n            <div className=\"content\">\n                <div className=\"icon\" dangerouslySetInnerHTML={{__html: icon}}></div> \n                <div className=\"title\">{text}</div>\n                {children && (\n                    <div className=\"right\">\n                        {children}\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\nToolStripButton.propTypes = {\n    /** Icon HTML */\n    icon: PropTypes.string,\n    /** Button text */\n    text: PropTypes.string,\n    /** Optionally, an element to show aligned to right */\n    children: PropTypes.node\n};","import React from 'react';\nimport './section.scss';\n\nexport default function Section(props) {\n    return <div className=\"tool-strip-section\" {...props}/>;\n}\n// Too simple for a separate file, no?","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './menu.scss';\nimport TdLib from '../../../../TdWeb/tdlib';\nimport ProfilePhoto from '../../../../ui/components/profile-photo';\nimport { getChatsFromList } from '../chat-list';\nimport chatStore from '../../../chat-store';\nimport { archive_userpic, menu_settings } from '../../../../ui/icon/icons';\nimport { connect } from 'react-redux';\nimport { createContextMenu } from '../../../../ui/menu/context-menu';\nimport Menu from '../../../../ui/menu/menu';\nimport ScrollView from '../../../../ui/scroll/scrollbar';\nimport LinkButton from '../../../../ui/elements/link-button';\nimport version from '../../../../../version';\nimport { addDialog } from '../../../../ui/dialog/dialogs';\nimport ConfirmDialog from '../../../../ui/dialog/confirm-dialog';\nimport ToolStrip from '../../../../ui/tool-strip/tool-strip';\n\nconst HamburgerMenu= connect(state=> ({\n    chats: state.chats,\n    archiveButtonState: state.archiveButtonState,\n})) (\n    function HamburgerMenu ({visible, onClose, chats, archiveButtonState}) {\n        const [me, setMe] = React.useState(null);\n        React.useEffect(() => {\n            TdLib.sendQuery({\n                '@type': 'getMe'\n            }).then(result => {\n                if(result.phone_number) {\n                    TdLib.sendQuery({\n                        '@type': 'getPhoneNumberInfo',\n                        phone_number_prefix: result.phone_number\n                    }).then(info => {\n                        if(info.country_calling_code){\n                            result.phone_number= `+${info.country_calling_code} ${info.formatted_phone_number}`;\n                        }\n                        setMe(result);\n                    });\n                } \n                else setMe(result);\n            });\n        }, []);\n\n        /**@type React.KeyboardEventHandler<HTMLDivElement> */\n        function onKeyDown (e){\n            if(e.key === 'Escape') {\n                onClose();\n            }\n        }\n        var ref = React.useRef(null);\n        React.useEffect(() => {\n            if(visible) {\n                ref.current.focus();\n            }\n        }, [visible]);\n\n        const showArchivedChats = getChatsFromList(chats, {'@type': 'chatListArchive'}).length > 0;\n\n        return (\n            <div id=\"hamburger-menu\" ref={ref} className={visible ? 'visible' : ''} \n                onKeyDown={onKeyDown} tabIndex={0}>\n                <div className=\"content\">\n                    <div className=\"header\">\n                        <div className=\"row-1\">\n                            <ProfilePhoto \n                                id={me?.id || 0} \n                                name={(me?.first_name || '') + (me?.last_name? (' ' + me.last_name) : '')} \n                                photo={me?.profile_photo?.small}\n                                disableSavedMessages={true}/>\n                            <div className=\"buttons\">\n                                {(showArchivedChats && (['hidden-collapsed', 'hidden-expanded'].includes(archiveButtonState))) && (\n                                    <button \n                                        className=\"button\" \n                                        dangerouslySetInnerHTML={{__html: archive_userpic}}\n                                        onClick={() => {\n                                            chatStore.dispatch({\n                                                type: 'SET_ARCHIVE_STATE',\n                                                archiveState: 'open'\n                                            });\n                                            onClose();\n                                        }}\n                                        onContextMenu={e=> createContextMenu(e, (\n                                            <Menu.MenuContents>\n                                                <Menu.MenuItem onClick={()=> {\n                                                    const newState= {'hidden-collapsed': 'collapsed', 'hidden-expanded': 'expanded'}[archiveButtonState];\n                                                    chatStore.dispatch({\n                                                        type: 'SET_ARCHIVE_BUTTON_STATE',\n                                                        archiveButtonState: newState\n                                                    });\n                                                    localStorage.setItem('dibgram-archived-chats-button-mode', newState);\n                                                    onClose();\n                                                }}>Move to chats list</Menu.MenuItem>\n                                            </Menu.MenuContents>\n                                        ))}/>\n                                )}\n                            </div>\n                        </div>\n                        <div className=\"row-2\">\n                            <div className=\"name\">\n                                {me?.first_name} {me?.last_name || ''}\n                            </div>\n                            <div className=\"phone-number\">\n                                {me?.phone_number}\n                            </div>\n                        </div>\n                    </div>\n                    <ScrollView>\n                        <div className=\"scroll-content\">\n                            <div className=\"options\">\n                                <ToolStrip.Section>\n                                    <ToolStrip.Button icon={menu_settings} text={'Log out'} onClick={()=> {\n                                        onClose();\n                                        addDialog('log-out-from-main-menu-confirm-dialog',\n                                            <ConfirmDialog \n                                                id=\"log-out-from-main-menu-confirm-dialog\"\n                                                OKButtonText=\"Log out\" onOK={()=> {\n                                                    TdLib.sendQuery({\n                                                        '@type': 'logOut'\n                                                    });\n                                                }} attention={true}>\n                                                Are you sure you want to log out?\n                                            </ConfirmDialog>\n                                        );\n                                    }}/>\n                                </ToolStrip.Section>\n                            </div>\n                            <div className=\"about\">\n                                <div className=\"row-1\">\n                                    <LinkButton href=\"https://github.com/DIBgram/DIBgram\">DIBgram</LinkButton>\n                                </div>\n                                <div className=\"row-2\">\n                                    <LinkButton href=\"https://github.com/DIBgram/DIBgram/releases/\">Version {version}</LinkButton> ­– <LinkButton onClick={()=> {\n                                        onClose();\n                                        addDialog('main-menu-about-dibgram-dialog', (\n                                            <ConfirmDialog id=\"main-menu-about-dibgram-dialog\"\n                                                width=\"390px\" title=\"DIBgram\" OKButtonText=\"CLOSE\"\n                                                hideCancelButton={true}>\n\n                                                <LinkButton className=\"version link-button\"\n                                                    style={{color: 'var(--theme-color-windowSubTextFg)'}} \n                                                    href=\"https://github.com/DIBgram/DIBgram/releases/\">\n                                                        version {version}\n                                                </LinkButton>\n\n                                                <p>Unofficial Telegram app based on <LinkButton href=\"https://core.telegram.org/tdlib\">TDLib</LinkButton> for speed and security.</p>\n\n                                                <p>This software is licensed under <LinkButton href=\"https://github.com/DIBgram/DIBgram/blob/main/LICENSE\">GNU GPL</LinkButton> version 3.<br/>\n                                                Source code is available on <LinkButton href=\"https://github.com/DIBgram/DIBgram\">GitHub</LinkButton>.</p>\n\n                                                <p>Visit the <LinkButton href=\"https://telegram.org/faq\">Telegram FAQ</LinkButton> for more info.</p>\n                                            </ConfirmDialog>\n                                        ));\n                                    }}>\n                                        About\n                                    </LinkButton>\n                                </div>\n                            </div>\n                        </div>\n                    </ScrollView>\n                </div>\n                <div className=\"shadow\" onClick={onClose}></div>\n            </div>\n        );\n    });\nHamburgerMenu.propTypes = {\n    visible: PropTypes.bool.isRequired,\n    onClose: PropTypes.func\n};\nexport default HamburgerMenu;\n","import React from 'react';\nimport ChatFoldersList from './sections/navigation-menu/chat-folders';\nimport ChatListBar from './sections/navigation-menu/chat-list-bar';\nimport chatStore from './chat-store';\nimport { Provider } from 'react-redux';\nimport './messengerWindow.scss';\nimport HamburgerMenu from './sections/navigation-menu/hamburger-menu/menu';\n\n/**\n * Renders the messenger screen\n */\nexport function MessengerWindow () {\n\n    const [isMenuOpen, setIsMenuOpen] = React.useState(false);\n\n    return (\n        <div id=\"messenger-screen\">\n            <Provider store={chatStore}>\n                <HamburgerMenu visible={isMenuOpen} onClose={()=> setIsMenuOpen(false)}/>\n                <ChatFoldersList onHamburgerMenuOpened={()=> setIsMenuOpen(true)}/>\n                <ChatListBar onHamburgerMenuOpened={()=> setIsMenuOpen(true)}/>\n            </Provider>\n            <div id=\"chat-container\">\n                \n            </div>\n        </div>\n    );\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport RippleEffect, {handleMyMouseEvents} from './ripple-effect';\n\n/**\n * Renders a BIG button which is filled with accent color\n */\nexport default class BigHighlightedButton extends React.Component{\n    static propTypes= {\n        /** Fires when the button is clicked */\n        onClick: PropTypes.func,\n        /** The button's content */\n        children: PropTypes.node.isRequired\n    };\n    state= {\n        ripple: {\n            state: 'off'\n        }\n    }\n    constructor() {\n        super();\n        [this.mouseDown, this.mouseUp, this.mouseLeave]= handleMyMouseEvents(this);\n    }\n\n    render () {\n        return (\n            <button \n                className=\"big-highlighted-button\" \n                onClick={this.props.onClick}\n                onMouseDown={this.mouseDown}\n                onMouseUp={this.mouseUp}\n                onMouseLeave={this.mouseLeave}>\n\n                <RippleEffect {...this.state.ripple} color=\"var(--theme-color-activeButtonBgRipple)\"/>\n                <div className=\"content\">\n                    {this.props.children}\n                </div>\n            </button>\n        );\n    }\n}","import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * Renders a beautiful field with a title and underline\n */\nexport default class UnderlinedInput extends React.Component {\n    constructor(args) {\n        super(args);\n\n        this.state= {\n            inactive: false,\n            mouseX: '50%',\n            titleClass: this.getTitleClass(this.props.autoFocus)\n        };\n    }\n\n    getTitleClass (focus) {\n        return (focus || (!!this.props.value)) ? 'title top' : 'title placeholder';\n    }\n\n    render () {\n        var className='underlined-input';\n        if(this.state.inactive) {\n            className+=' inactive';\n        }\n        if(this.props.autoFocus) {\n            className+=' autoFocus';\n        }\n        if(this.props.invalid) {\n            className+=' invalid';\n        }\n        return (\n            <div className={className}\n                style={{'--mouse-left': this.state.mouseX || '50%'}}>\n                { this.props.title ? (\n                    <div className={this.state.titleClass}>{this.props.title}</div>\n                ) : null }\n                <input \n                    type={this.props.type} \n                    onChange={this.props.onChange} \n                    value={this.props.value}\n                    onMouseDown={this.handleMouseDown}\n                    onFocus={this.handleFocus}\n                    onBlur={this.handleBlur}\n                    autoFocus={this.props.autoFocus || false}\n                    onKeyDown={this.handleKeyDown}\n                    maxLength={this.props.maxLength}\n                    onCopy={e=> {\n                        if(this.props.disableCopy) {\n                            e.preventDefault();\n                        }\n                    }}/>\n                <div className=\"underline\"></div>\n            </div>\n        );\n    }\n\n    handleFocus =()=>{\n        this.setState({\n            inactive: false,\n            titleClass: this.getTitleClass(true)\n        });\n    }\n    handleBlur =()=>{\n        this.setState({\n            inactive: true, \n            mouseX: '50%',\n            titleClass: this.getTitleClass(false)\n        });\n    }\n    handleMouseDown =(e)=>{\n        this.setState({\n            mouseX: e.nativeEvent.offsetX+'px'\n        });\n    }\n    handleKeyDown =(e)=>{\n        if(e.key=='Enter') {\n            this.props.onEnterKeyPressed && this.props.onEnterKeyPressed();\n        }\n    }\n\n    static propTypes = {\n        type: PropTypes.oneOf(['text', 'number', 'password', 'email', 'url']).isRequired,\n        onChange: PropTypes.func,\n        value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        maxLength: PropTypes.number,\n        active: PropTypes.bool,\n        autoFocus: PropTypes.bool,\n        onEnterKeyPressed: PropTypes.func,\n        title: PropTypes.string,\n        invalid: PropTypes.bool,\n        disableCopy: PropTypes.bool,\n    }\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TdLib from '../TdWeb/tdlib';\nimport Auth from '../TdWeb/auth';\nimport {MessengerWindow} from '../messenger/messengerWindow';\n\nimport BigHighlightedButton from '../ui/elements/highlighted-button';\nimport UnderlinedInput from '../ui/elements/underlined-input';\nimport ConnectionState from '../ui/components/connecting';\nimport { addDialog } from '../ui/dialog/dialogs';\nimport ConfirmDialog from '../ui/dialog/confirm-dialog';\n\nimport './auth.scss';\nimport { Provider } from 'react-redux';\nimport connectionStore from '../TdWeb/connectionStore';\n\nvar initialAuthState = {'@type': undefined};\nexport function setInitialAuthState(state) {\n    initialAuthState=state;\n}\n\n/**\n * Start managing a status text block with fade effects.  \n * Usage:\n * ```js\n * manageStatusTextContent(this);\n * ```\n * \n * @param {React.Component} thisClass pass `this` as this argument\n * @returns Store this function and call it to change \n */\nfunction manageStatusTextContent(thisClass) {\n    thisClass.Status= function Status(){\n        return (\n            <div className={'status'+ (thisClass.state.statusVisible?'':' hidden')}>{thisClass.state.statusContent}</div>\n        );\n    };\n    thisClass.changeStatus= function(string){\n        if(string) {\n            thisClass.setState({\n                statusContent: string,\n                statusVisible: true\n            });\n        } else {\n            thisClass.setState({\n                statusVisible: false\n            });\n            setTimeout(() => {\n                thisClass.setState({\n                    statusContent: null\n                });\n            }, 1000);\n        }\n    };\n}\n\n/**\n * Renders the messenger or authorization screens. Does not include dialogs and toasts\n */\nexport class MainApp extends React.Component {\n    state= {\n        step: initialAuthState\n    };\n\n    componentDidMount(){\n        // eslint-disable-next-line no-func-assign\n        setInitialAuthState= state=> {\n            this.setState({step: state});\n        };\n\n        TdLib.registerUpdateHandler('updateAuthorizationState', this.handleAuthStateUpdate);\n    }\n\n    handleAuthStateUpdate= update => {\n        const states= [\n            'authorizationStateWaitPhoneNumber',\n            'authorizationStateWaitCode',\n            'authorizationStateWaitPassword',\n            'authorizationStateWaitRegistration',\n            'authorizationStateReady',\n            'authorizationStateClosed',\n        ];\n        const state=update['authorization_state'];\n        if(states.includes(state['@type'])) {\n            this.setState({step: state});\n        }\n    };\n    \n    render () {\n        switch (this.state.step['@type']) {\n        case 'authorizationStateWaitPhoneNumber':\n            return (\n                <AuthWindowStepPhoneNumber/>\n            );\n\n        case 'authorizationStateWaitCode':\n            return (\n                <AuthWindowStepCode info={this.state.step.code_info}/>\n            );\n\n        case 'authorizationStateWaitPassword':\n            return (\n                <AuthWindowStepPassword info={this.state.step}/>\n            );\n\n        case 'authorizationStateWaitRegistration':\n            return (\n                <AuthWindowStepRegister/>\n            );\n\n        case 'authorizationStateReady':\n            return (\n                <MessengerWindow/>\n            );\n\n        case 'authorizationStateClosed':\n            window.location.reload();\n            return (\n                <p>This session is closed. Please wait till DIBgram reloads automatically...</p>\n            );\n        \n        default:\n            return <p>Loading...</p>;\n        }\n    }\n}\n\n/**\n * Renders the phone number step of authorization screen\n */\nclass AuthWindowStepPhoneNumber extends React.Component {\n    constructor(args) {\n        super(args);\n        manageStatusTextContent(this);\n    }\n    state= {\n        number: '',\n        invalid: false,\n        statusContent: '',\n        statusVisible: false\n    };\n    handlePNFieldChange = (event) => {\n        this.setState({\n            number: event.target.value,\n            invalid: false\n        });\n        this.changeStatus('');\n    }\n    submitNumber= async () => {\n        Auth.givePhoneNumber(this.state.number).catch(reason=> {\n            switch(reason.message){\n            case 'PHONE_NUMBER_FLOOD':\n                addDialog( 'phone_number_flood_error',\n                    <ConfirmDialog width=\"320px\" hideCancelButton={true} id=\"phone_number_flood_error\">\n                        Sorry, you have deleted and re-created your account too many times recently.<br/>\n                        Please wait for a few days before signing up again.\n                    </ConfirmDialog>\n                );\n                this.changeStatus('');\n                break;\n            case 'PHONE_NUMBER_INVALID':\n                this.setState({invalid: true});\n                this.changeStatus('Invalid phone number. Please try again.');\n                \n                break;\n            case 'Another authorization query has started': \n                break;\n            default:\n                this.setState({invalid: false});\n                this.changeStatus(reason.message);\n                break;\n            }\n        });\n    }\n    render () {\n        const Status=this.Status;\n        return (\n            <div id=\"auth\" className=\"auth-step-phoneNumber\">\n\n                <h2>Your Phone Number</h2>\n\n                <p className=\"description\">\n                    Please confirm your country code and enter your mobile phone number.\n                </p>\n\n                <UnderlinedInput \n                    type=\"text\" \n                    value={this.state.number} \n                    autoFocus={true}\n                    onChange={this.handlePNFieldChange}\n                    onEnterKeyPressed={this.submitNumber}\n                    invalid={this.state.invalid}/>\n\n                <Status/>\n\n                <BigHighlightedButton \n                    onClick={this.submitNumber}>\n                    NEXT\n                </BigHighlightedButton>\n\n                <Provider store={connectionStore}>\n                    <ConnectionState/>\n                </Provider>\n            </div>\n        );\n    }\n}\n\n/**\n * Renders verification code step of authorization screen\n */\nclass AuthWindowStepCode extends React.Component {\n    static propTypes= {\n        info: PropTypes.object\n    };\n    constructor(args) {\n        super(args);\n        manageStatusTextContent(this);\n    }\n    state= {\n        code: '',\n        invalid: false,\n        statusContent: '',\n        statusVisible: false\n    };\n    handleCodeFieldChange= (event) => {\n        this.setState({\n            code: event.target.value,\n            invalid: false\n        });\n        this.changeStatus('');\n        if(event.target.value.length==this.props.info.type.length) {\n            this.handleContinueButton(event.target.value);\n        }\n    }\n    handleContinueButton= (code) => {\n        if(typeof code != 'string') {\n            code= undefined;\n        }\n        code = code || this.state.code;\n        if(code.length!=this.props.info.type.length) return;\n\n        Auth.checkAuthCode(code).catch(reason=> {\n            if(reason.message==='PHONE_CODE_INVALID'){\n                this.setState({invalid: true});\n                this.changeStatus('You have entered an invalid code.');\n            }\n            else {\n                this.setState({invalid: true});\n                this.changeStatus(reason.message);\n            }\n        });\n    }\n    render () {\n        const Status = this.Status;\n\n        var message= (this.props.info.type['@type']=='authenticationCodeTypeSms') ?\n            (<p className=\"description\">\n                We&apos;ve sent an activation code to your phone. <br/>\n                Please enter it below.\n            </p>) \n            :\n            (<p className=\"description\">\n                A code was sent <strong>via Telegram</strong> to your other devices, if you have any connected.\n            </p>);\n            \n        return (\n            <div id=\"auth\" className=\"auth-step-code\">\n\n                <h2>{this.props.info.phone_number}</h2>\n\n                {message}\n\n                <UnderlinedInput \n                    type=\"text\" \n                    value={this.state.code} \n                    onChange={this.handleCodeFieldChange}\n                    autoFocus={true}\n                    title=\"Code\"\n                    maxLength={this.props.info.type.length}\n                    onEnterKeyPressed={this.handleContinueButton}\n                    invalid={this.state.invalid}/>\n\n                <Status/>\n\n                <BigHighlightedButton \n                    onClick={this.handleContinueButton}>\n                    NEXT\n                </BigHighlightedButton>\n\n                <Provider store={connectionStore}>\n                    <ConnectionState/>\n                </Provider>\n            </div>\n        );\n    }\n}\n\n/**\n * Renders 2FA password step of authorization screen\n */\nclass AuthWindowStepPassword extends React.Component {\n    constructor(args) {\n        super(args);\n        manageStatusTextContent(this);\n    }\n    static propTypes= {\n        info: PropTypes.object\n    };\n    state= {\n        password: '',\n        invalid: false,\n        statusContent: '',\n        statusVisible: false\n    };\n    handlePasswordFieldChange= (event) => {\n        this.setState({\n            password: event.target.value,\n            invalid: false,\n        });\n        this.changeStatus('');\n    }\n    handleContinueButton= async () => {\n        Auth.check2FACode(this.state.password).catch(reason=> {\n            if(reason.message=='PASSWORD_HASH_INVALID') {\n                this.setState({invalid: true});\n                this.changeStatus('You have entered a wrong password.');\n            }\n            else {\n                this.setState({invalid: true});\n                this.changeStatus(reason.message);\n            }\n        });\n    }\n    render () {\n        const Status=this.Status;\n        return (\n            <div id=\"auth\" className=\"auth-step-password\">\n                <div className=\"content\">\n\n                    <h2>Cloud password check</h2>\n\n                    <p className=\"description\">\n                        Please enter your cloud password.\n                    </p>\n\n                    <UnderlinedInput \n                        type={'webkitTextSecurity' in document.body.style ? 'text' : 'password'} \n                        value={this.state.password} \n                        onChange={this.handlePasswordFieldChange}\n                        autoFocus={true} \n                        title=\"Your cloud password\"\n                        onEnterKeyPressed={this.handleContinueButton}\n                        disableCopy={true}\n                        invalid={this.state.invalid}/>\n\n                    <div className=\"hint\">\n                        {this.props.info.password_hint?'Hint: ':<span>&nbsp;</span>}{this.props.info.password_hint}\n                    </div>\n\n                    <div className=\"forgot-password\">\n                        <a href=\"#\">Forgot password?</a>\n                    </div>\n\n                    <Status/>\n\n                    <BigHighlightedButton \n                        onClick={this.handleContinueButton}>\n                        SUBMIT\n                    </BigHighlightedButton>\n\n                    <Provider store={connectionStore}>\n                        <ConnectionState/>\n                    </Provider>\n                </div>\n            </div>\n        );\n    }\n}\n\n/**\n * Render sign up step of authorization screen\n */\nclass AuthWindowStepRegister extends React.Component {\n    state= {\n        firstName: '',\n        lastName: '',\n        statusContent: '',\n        statusVisible: false\n    };\n    handleFirstNameFieldChange= (event) => {\n        this.setState({firstName: event.target.value});\n    }\n    handleLastNameFieldChange= (event) => {\n        this.setState({lastName: event.target.value});\n    }\n    handleContinueButton= async () => {\n        await Auth.registerNewAccount(this.state.firstName, this.state.lastName).catch(reason=> {\n            this.setState({textUnderField: reason.message});\n        });\n    }\n    render () {\n        return (\n            <div id=\"auth\" className=\"auth-step-signup\">\n                <div className=\"content\">\n\n                    <h2>Your info</h2>\n\n                    <p className=\"description\">\n                        Please enter your name and upload a photo.\n                    </p>\n\n                    <UnderlinedInput \n                        type=\"text\" \n                        value={this.state.firstName} \n                        onChange={this.handleFirstNameFieldChange}\n                        autoFocus={true} />\n\n                    <UnderlinedInput \n                        type=\"text\" \n                        value={this.state.lastName} \n                        onChange={this.handleLastNameFieldChange} />\n\n                    <div className=\"status\">\n                        {this.state.textUnderField || ''}\n                    </div>\n\n                    <BigHighlightedButton \n                        onClick={this.handleContinueButton}>\n                        SIGN UP\n                    </BigHighlightedButton>\n\n                    <Provider store={connectionStore}>\n                        <ConnectionState/>\n                    </Provider>\n                </div>\n            </div>\n        );\n    }\n}\n","// DIBgram themes are converted to CSS in runtime here.\n\nexport function convertThemeToCSS(theme){\n    var css={};\n    for(const name in theme){\n        var obj= theme[name];\n        if(typeof obj.value == 'string') {\n            css['--theme-color-' + name]= obj.value;\n        } else if(typeof obj.value == 'object') {\n            css['--theme-color-' + name]= `var(--theme-color-${obj.value.equals})`;\n        }\n    }\n    return css;\n}","import React from 'react';\nimport classic from './classic.json';\nimport day from './day.json';\nimport tinted from './tinted.json';\nimport night from './night.json';\nimport { convertThemeToCSS } from './dibgram-theme-to-css';\n\nconst themes = { day, classic, tinted, night };\nexport var currentTheme= 'night';\n\nexport function ThemeProvider(props) {\n    return (\n        <div \n            data-theme-is-dark={isThemeDark}\n            {...props} \n            style={convertThemeToCSS({...classic, ...themes[currentTheme]})}\n        />\n    );\n}\n\nconst isThemeDark=themes[currentTheme].isDark.value;\nexport {isThemeDark};","import React from 'react';\nimport { Provider } from 'react-redux';\nimport {MainApp, setInitialAuthState} from './dibgram/auth/auth-screen';\nimport TdLib from './dibgram/TdWeb/tdlib';\nimport ConfirmDialog from './dibgram/ui/dialog/confirm-dialog';\nimport Dialogs, {dialogStore, addDialog} from './dibgram/ui/dialog/dialogs';\nimport './dibgram/ui/main.scss';\nimport { ContextMenus, contextMenusStore, onAnywhereClicked } from './dibgram/ui/menu/context-menu';\nimport { ThemeProvider } from './dibgram/ui/themes/theme';\n\nTdLib.initializeTdLib().then(function (res) {\n    setInitialAuthState(res);\n});\n\n/**\n * Renders the whole React app\n */\nfunction App() {\n    React.useEffect(() => {\n        TdLib.registerUpdateHandler('updateFatalError', window.simulateFatalError=  function (update) {\n            console.error('Fatal error:', update.error);\n            \n            addDialog( 'tdlib_fatal_error',\n                <ConfirmDialog \n                    width=\"400px\" \n                    hideCancelButton={true} \n                    id=\"tdlib_fatal_error\" \n                    thirdButton=\"Refresh\"\n                    onThirdButtonClick={window.location.reload.bind(window.location)}\n                    thirdButtonClosesDialog={false}\n                    title=\"Fatal Error\">\n                    \n                    A fatal error occurred in TdLib.<br/> \n                    Try refreshing, clearing site data or opening \n                    DIBgram in a private window. <br/>\n                    If none of these helped, report this to the developers \n                    by <a href=\"https://github.com/DIBgram/DIBgram/issues/new/choose\" rel=\"noreferrer\" target=\"_blank\"\n                        style={{color: 'var(--theme-color-windowActiveTextFg)'}}>filing an issue.</a>\n                    <br/><br/>\n                    <pre>{update.error.toString()}</pre>\n                </ConfirmDialog>\n            );\n        });\n    }, []);\n\n    return (\n        <ThemeProvider id=\"app\" onClick={onAnywhereClicked}>\n            <Provider store={dialogStore}>\n                <Dialogs/>\n            </Provider>\n            <MainApp/>\n            <Provider store={contextMenusStore}>\n                <ContextMenus/>\n            </Provider>\n        </ThemeProvider>\n    );\n}\n\nexport default App;\n","import './remove-item-from-array';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}